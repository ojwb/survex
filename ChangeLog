Sat Aug 22 21:14:40 GMT 2015  Olly Betts <olly@survex.com>

	* lib/fr.po: Use fancy quotes.

Wed Aug 19 14:08:14 GMT 2015  Olly Betts <olly@survex.com>

	* lib/fr.po: Merge translation updates from Michel Bovey.

Mon Aug 17 08:32:18 GMT 2015  Olly Betts <olly@survex.com>

	* NEWS,configure.ac,doc/manual.sgml: Update for 1.2.22.

Thu Aug 13 16:12:06 GMT 2015  Olly Betts <olly@survex.com>

	* lib/: Update source references and merge po files.

Thu Aug 13 16:11:03 GMT 2015  Olly Betts <olly@survex.com>

	* src/commands.c: Correct an example in a TRANSLATORS comment.

Wed Aug 12 19:46:34 GMT 2015  Olly Betts <olly@survex.com>

	* src/readval.c: Anonymous stations can't be exported, so we don't need
	  to set them up ready for implicit exports.

Tue Aug 11 21:31:44 GMT 2015  Olly Betts <olly@survex.com>

	* src/commands.c,tests/Makefile.am,tests/cavern.tst,
	  tests/cmd_set_bad.out: Improve errors for invalid survey names in
	  *equate and *export.

Tue Aug 11 20:34:05 GMT 2015  Olly Betts <olly@survex.com>

	* src/commands.c,tests/cmd_begin_bad.out,tests/cmd_begin_bad.svx:
	  Improve error when *begin is followed by an invalid survey name.

Tue Aug 11 20:02:31 GMT 2015  Olly Betts <olly@survex.com>

	* src/commands.c,tests/: Improve error when *begin is followed by an
	  invalid survey name.

Tue Aug 11 19:44:40 GMT 2015  Olly Betts <olly@survex.com>

	* NEWS: Update.

Fri Aug 07 14:19:04 GMT 2015  Olly Betts <olly@survex.com>

	* src/aven.cc,src/gla-gl.cc: Ensure that the window has a depth buffer.
	  Whether it does by default seems to vary depending on OS and maybe
	  graphics card.  Fixes #55 (terrain is no longer visible through
	  itself), and also the rendering of passage tubes.  Thanks to Martin
	  Green for pointing me in the right direction for finding this fix.

Fri Aug 07 11:13:19 GMT 2015  Olly Betts <olly@survex.com>

	* doc/manual.sgml: Update to reflect *declination with a number not
	  working in 1.2.21.

Fri Aug 07 10:55:42 GMT 2015  Olly Betts <olly@survex.com>

	* src/netartic.c,tests/: Fix assertion if we try to identify a hanging
	  survey by an anonymous station.

Fri Aug 07 10:33:38 GMT 2015  Olly Betts <olly@survex.com>

	* src/commands.c,tests/: Fix *declination with an angle to actually
	  work.

Tue Jul 28 19:18:37 GMT 2015  Olly Betts <olly@survex.com>

	* src/Makefile.am: Ship thgeomag.h.

Tue Jul 28 19:10:52 GMT 2015  Olly Betts <olly@survex.com>

	* src/Makefile.am: Distribute igrf coefficients file and script to
	  generate C header from it.

Tue Jul 28 18:57:43 GMT 2015  Olly Betts <olly@survex.com>

	* doc/HACKING.htm: Document where the unofficial Innosetup translations
	  came from.

Tue Jul 28 18:57:15 GMT 2015  Olly Betts <olly@survex.com>

	* doc/HACKING.htm: wx2.8-i18n -> wx3.0-i18n.

Tue Jul 28 18:56:46 GMT 2015  Olly Betts <olly@survex.com>

	* NEWS: Update.

Tue Jul 28 18:35:03 GMT 2015  Olly Betts <olly@survex.com>

	* src/datain.c: Add FIXME for actually looking at clino readings in
	  diving data.

Tue Jul 28 18:23:07 GMT 2015  Olly Betts <olly@survex.com>

	* doc/aven.sgml: Document the command line options.  Reported by Jenny
	  Black.

Tue Jul 28 18:17:51 GMT 2015  Olly Betts <olly@survex.com>

	* doc/manual.sgml: Point to '*case' and '*truncate' from the 'SEE ALSO'
	  sections of each other.

Tue Jul 28 18:17:16 GMT 2015  Olly Betts <olly@survex.com>

	* doc/manual.sgml: Fix broken markup introduced by recent changes.

Tue Jul 28 15:55:23 GMT 2015  Olly Betts <olly@survex.com>

	* NEWS: Update.

Tue Jul 28 15:54:05 GMT 2015  Olly Betts <olly@survex.com>

	* doc/manual.sgml: Next release will be 1.2.21 not 1.2.22.

Tue Jul 28 15:52:31 GMT 2015  Olly Betts <olly@survex.com>

	* doc/manual.sgml,src/commands.c,tests/: Allow the units for the zero
	  error to be specified, making it easier to specify calibration with
	  a scale if you measure the zero error externally (rather than using
	  the instrument itself).  Fixes #61, reported by Andrew Atkinson.

Tue Jul 28 12:15:20 GMT 2015  Olly Betts <olly@survex.com>

	* src/datain.c,src/date.c,src/date.h: Calculate the Julian date to use
	  for the declination properly.

Tue Jul 28 11:44:05 GMT 2015  Olly Betts <olly@survex.com>

	* lib/survex.pot,src/,tests/: Warn if we see an undated compass reading
	  when 'declination auto' is active.  Cache the computed declination
	  as that saves 5-6% of the run time when processing CUCC's big dataset.

Tue Jul 28 11:43:27 GMT 2015  Olly Betts <olly@survex.com>

	* lib/ru.po: Add missing ellipses to translated message.

Tue Jul 28 10:33:37 GMT 2015  Olly Betts <olly@survex.com>

	* NEWS: Update.

Tue Jul 28 09:22:44 GMT 2015  Olly Betts <olly@survex.com>

	* src/export.cc: Set LC_NUMERIC to the C locale while exporting so that
	  "." is used for the decimal separator in KML and other textual formats.
	  Reported by Jan Schorn.

Mon Jul 27 22:13:54 GMT 2015  Olly Betts <olly@survex.com>

	* src/commands.c: Fix comment typo.

Mon Jul 27 22:13:33 GMT 2015  Olly Betts <olly@survex.com>

	* lib/zh_CN.po: Add missing ellipses to translated message.

Mon Jul 27 22:13:16 GMT 2015  Olly Betts <olly@survex.com>

	* doc/manual.sgml: Fix doc typo.

Mon Jul 27 22:11:09 GMT 2015  Olly Betts <olly@survex.com>

	* doc/TODO.htm,doc/manual.sgml,lib/survex.pot,src/cavern.h,
	  src/commands.c,src/datain.c: Add new *declination command with
	  support for setting the declination automatically based on the
	  survey date.

Mon Jul 27 20:48:21 GMT 2015  Olly Betts <olly@survex.com>

	* lib/,src/commands.c,tests/csbad.out,tests/csbad.svx: Report error
	  from PROJ when coordinate conversion fails as part of the actual
	  error rather than on a separate line.

Mon Jul 27 20:07:30 GMT 2015  Olly Betts <olly@survex.com>

	* src/thgeomag.c,src/thgeomag.h: Make thgeomag() return declination in
	  radians, since that's what we want and it's more consistent with it
	  taking lat and lon in radians.

Mon Jul 27 20:04:38 GMT 2015  Olly Betts <olly@survex.com>

	* src/cavern.h: Document what days1 and days2 members of meta_data
	  struct are.

Mon Jul 27 15:15:53 GMT 2015  Olly Betts <olly@survex.com>

	* src/: Clean up support for repeat readings (currently disabled) to
	  only expect them for survey readings.

Mon Jul 27 13:25:28 GMT 2015  Olly Betts <olly@survex.com>

	* doc/manual.sgml: Add example of using "*CALIBRATE DECLINATION".

Mon Jul 27 13:24:52 GMT 2015  Olly Betts <olly@survex.com>

	* doc/manual.sgml: Consistently say "magnetic declination" instead of
	  "magnetic deviation".

Mon Jul 27 13:05:58 GMT 2015  Olly Betts <olly@survex.com>

	* src/Makefile.am: Add thgeomag code to the build system.

Mon Jul 27 13:04:54 GMT 2015  Olly Betts <olly@survex.com>

	* src/thgeomag.c,src/thgeomag.cxx: Tweak thgeomag.cxx to be valid C
	  code.

Mon Jul 27 12:54:19 GMT 2015  Olly Betts <olly@survex.com>

	* src/thgeomag.cxx: Fix "set but not used" warning.

Mon Jul 27 12:42:47 GMT 2015  Olly Betts <olly@survex.com>

	* src/: Add IGRF handling code from therion 5.3.16.

Mon Jul 27 08:08:11 GMT 2015  Olly Betts <olly@survex.com>

	* src/commands.c,tests/: Extend check for *fix before *cs to catch
	  *fix with standard deviations too.

Sun Jul 26 11:36:36 GMT 2015  Olly Betts <olly@survex.com>

	* src/printing.cc: Remove the "Coordinate projection" field from the
	  print dialog, as it isn't relevant there.

Sun Jul 26 11:21:33 GMT 2015  Olly Betts <olly@survex.com>

	* src/gfxcore.cc,src/gfxcore.h: Fix initial scale for small caves
	  (since 1.2.18 the initial scale has been too small).  Don't rescale
	  if the same file is reloaded, but adjust the volume diameter as
	  appropriate.

Wed Jul 15 09:10:50 GMT 2015  Olly Betts <olly@survex.com>

	* doc/HACKING.htm: Update list of debian packages to install to build
	  from git.

Wed Jul 15 08:16:44 GMT 2015  Olly Betts <olly@survex.com>

	* NEWS,configure.ac,doc/manual.sgml: Update for 1.2.21.

Wed Jul 15 08:15:20 GMT 2015  Olly Betts <olly@survex.com>

	* doc/manual.sgml: Document that 1.2.21 is needed for *fix using
	  latitude and longitude, or with standard deviations.

Tue Jul 14 17:53:21 GMT 2015  Olly Betts <olly@survex.com>

	* NEWS: Update.

Tue Jul 14 17:46:38 GMT 2015  Olly Betts <olly@survex.com>

	* src/commands.c,tests/: Fix *fix with standard deviations when *cs is
	  in use.

Wed Jul 08 09:42:14 GMT 2015  Olly Betts <olly@survex.com>

	* src/commands.c,tests/: Fix coordinate systems using latitude and
	  longitude - PROJ.4 wants these in radians, but we were passing
	  degrees, which would generally cause the conversion to the output
	  coordinate system to fail.  Reported by Wookey.

Wed Jul 01 10:15:49 GMT 2015  Olly Betts <olly@survex.com>

	* doc/manual.sgml: Strip references to obsolete versions of MS Windows.

Tue Jun 30 12:22:55 GMT 2015  Olly Betts <olly@survex.com>

	* src/kml.cc: Put all the <LineString> elements into a <MultiGeometry>,
	  rather than having each in a separate <Placemark>.

Tue Jun 30 09:32:17 GMT 2015  Olly Betts <olly@survex.com>

	* src/: Whitespace cleanup.

Mon Jun 29 12:27:49 GMT 2015  Olly Betts <olly@survex.com>

	* doc/cad3d.sgml,doc/manual.sgml: Remove references to SpeleoGen,
	  which hasn't been updated for many years, and which can't read
	  current the recent versions of the .3d format.

Mon Jun 29 03:14:52 GMT 2015  Olly Betts <olly@survex.com>

	* NEWS: Update.

Sun Jun 28 13:35:47 GMT 2015  Olly Betts <olly@survex.com>

	* NEWS: Update.

Sun Jun 28 11:43:11 GMT 2015  Olly Betts <olly@survex.com>

	* src/message.c: Ignore any "@<something>" modifier in the language
	  code.

Sun Jun 28 11:40:06 GMT 2015  Olly Betts <olly@survex.com>

	* src/message.c: Remove compatibility handling for specifying a country
	  variant of a language in SURVEXLANG using "-" with a lower case
	  country code (e.g. "en-us") - we changed to the standard "en_US" way
	  back in 2001.

Sun Jun 28 09:28:56 GMT 2015  Olly Betts <olly@survex.com>

	* src/kml.cc: Use the "paddle" placemarkers rather than push pins.

Sun Jun 28 07:25:12 GMT 2015  Olly Betts <olly@survex.com>

	* src/kml.cc,src/kml.h,src/printing.cc: Implement exporting of survey
	  legs in KML format.

Sun Jun 28 07:20:09 GMT 2015  Olly Betts <olly@survex.com>

	* src/kml.h: Whitespace tweak.

Sun Jun 28 07:18:42 GMT 2015  Olly Betts <olly@survex.com>

	* src/kml.cc: Put coloured "pin" icons into KML files, like we do for
	  GPX files.

Sat Jun 27 12:46:03 GMT 2015  Olly Betts <olly@survex.com>

	* src/cavernlog.cc: Use wxSystem() rather than conditionally calling
	  system() or _wsystem() depending on the platform.

Sat Jun 27 12:45:22 GMT 2015  Olly Betts <olly@survex.com>

	* src/mainfrm.cc: Use wxAtof() to get double from wxString.

Sat Jun 27 12:44:04 GMT 2015  Olly Betts <olly@survex.com>

	* src/cavernlog.cc,src/mainfrm.cc: Use wxFopen() rather than
	  conditionally calling fopen() or _wfopen() depending on the platform.

Sat Jun 27 12:42:57 GMT 2015  Olly Betts <olly@survex.com>

	* src/gfxcore.cc: Create wxFileInputStream directly, avoiding
	  intermediate file descriptor.

Sat Jun 27 12:41:32 GMT 2015  Olly Betts <olly@survex.com>

	* src/cavernlog.cc: Use wxGetenv() to read the SURVEXEDITOR variable,
	  so we can accept Unicode values on Windows.

Sat Jun 27 06:51:29 GMT 2015  Olly Betts <olly@survex.com>

	* src/netskel.c: Fix use after free after *solve.  This only occurs if
	  a leg between the two exact same stations appears right before and
	  right after the *solve, which is unlikely in real data, but the
	  testsuite has an instance of this.  This was introduced by the repeat
	  leg averaging added in 1.2.17.

Sat Jun 27 06:49:38 GMT 2015  Olly Betts <olly@survex.com>

	* src/netartic.c: Fix small memory leak when solving network.  This
	  doesn't really matter when solving at the end of processing as cavern
	  will exit after that, but if *solve is used we continue processing
	  after solving.

Sat Jun 27 04:36:39 GMT 2015  Olly Betts <olly@survex.com>

	* src/message.c: Fix comment typo.

Fri Jun 26 00:42:07 GMT 2015  Olly Betts <olly@survex.com>

	* NEWS: More updates for 1.2.20.

Fri Jun 26 00:05:51 GMT 2015  Olly Betts <olly@survex.com>

	* src/gfxcore.cc,src/gfxcore.h,src/mainfrm.cc: Add support for reading
	  DEM data which isn't in a .zip file.

Thu Jun 25 21:58:38 GMT 2015  Olly Betts <olly@survex.com>

	* src/gfxcore.cc: Force a refresh after loading terrain data so
	  that it gets displayed right away.

Thu Jun 25 05:16:10 GMT 2015  Olly Betts <olly@survex.com>

	* lib/icons/Makefile.am: Fix install directories for filetype icons.

Wed Jun 24 12:51:10 GMT 2015  Olly Betts <olly@survex.com>

	* lib/icons/Makefile.am: Fix for VPATH build and to create directories
	  to install icons to if necessary.

Wed Jun 24 12:45:52 GMT 2015  Olly Betts <olly@survex.com>

	* NEWS,configure.ac,doc/manual.sgml: Update for 1.2.20.

Wed Jun 24 12:45:06 GMT 2015  Olly Betts <olly@survex.com>

	* lib/unlaunchpad-po: Fix regex to clean up transifex source refs.

Wed Jun 24 12:24:31 GMT 2015  Olly Betts <olly@survex.com>

	* src/gfxcore.cc: Add a FIXME about problem reading zip files with
	  wxZipInputStream on __WXMSW__.

Wed Jun 24 12:23:44 GMT 2015  Olly Betts <olly@survex.com>

	* src/gfxcore.cc: When reading .hgt files, flag a read error if we
	  can't read any data.

Wed Jun 24 12:22:53 GMT 2015  Olly Betts <olly@survex.com>

	* src/gfxcore.cc: If we reading terrain data fails, don't continue and
	  try to display it.

Wed Jun 24 12:21:44 GMT 2015  Olly Betts <olly@survex.com>

	* src/gfxcore.cc: Avoid unnecessary call to OpenEntry() if we're
	  already on the zip entry we want to read.

Mon Jun 22 05:00:49 GMT 2015  Olly Betts <olly@survex.com>

	* src/gfxcore.cc: Lowercase filenames of .zip entries before checking
	  extensions.

Mon Jun 22 04:36:26 GMT 2015  Olly Betts <olly@survex.com>

	* src/commands.c: Define MASK_PASSAGE after MASK_NOSURVEY to match
	  order of mask[] array.

Mon Jun 22 04:35:57 GMT 2015  Olly Betts <olly@survex.com>

	* doc/manual.sgml: Document that clino is now allowed in diving data.

Mon Jun 22 02:14:08 GMT 2015  Olly Betts <olly@survex.com>

	* src/commands.c,src/datain.c,tests/bug4.svx,tests/diving.pos,
	  tests/diving.svx: Allow clino readings in diving style data,
	  suggested by Andrew Atkinson.  Currently these readings are ignored,
	  but a future version will check that they're consistent with the angle
	  given by the depth gauge and tape, and perform suitable averaging.

Mon Jun 22 00:40:39 GMT 2015  Olly Betts <olly@survex.com>

	* buildmacosx.sh: Hardlink the .msg files in the .dmg rather than
	  shipping two copies of each.

Fri Jun 19 12:20:00 GMT 2015  Olly Betts <olly@survex.com>

	* NEWS: Update.

Fri Jun 19 11:46:10 GMT 2015  Olly Betts <olly@survex.com>

	* src/printing.cc: Fix to use top margin rather than right margin when
	  calculating the page height.

Fri Jun 19 11:44:50 GMT 2015  Olly Betts <olly@survex.com>

	* src/avenprcore.cc,src/avenprcore.h,src/printing.cc: Factor out the
	  height of the footer we put on each printout page into a constant.

Fri Jun 19 10:59:21 GMT 2015  Olly Betts <olly@survex.com>

	* src/avenprcore.cc: Cleaner code to calculate printable area.

Fri Jun 19 10:54:13 GMT 2015  Olly Betts <olly@survex.com>

	* src/avenprcore.cc: Note why we seem to have to create a temporary
	  wxPrinterDC or wxPostScriptDC in a comment.

Fri Jun 19 08:27:08 GMT 2015  Olly Betts <olly@survex.com>

	* src/avenprcore.cc: Add back in header required in mingw build.

Fri Jun 19 08:22:57 GMT 2015  Olly Betts <olly@survex.com>

	* buildmacosx.sh: Remove useless extra copy of about box images from
	  OS X disk image.

Fri Jun 19 08:22:20 GMT 2015  Olly Betts <olly@survex.com>

	* Makefile.am,lib/images/,src/aboutdlg.cc,survex.iss.in: Optimise the
	  size of the about dialog images.

Fri Jun 19 05:12:59 GMT 2015  Olly Betts <olly@survex.com>

	* buildmacosx.sh,lib/icons/Makefile.am,survex.spec.in: Install the
	  filetype and app icons under /usr/share/icons/hicolor, which is
	  where they're expected to be these days.

Fri Jun 19 04:39:04 GMT 2015  Olly Betts <olly@survex.com>

	* lib/survex-aven.desktop: Add %f to Exec.

Fri Jun 19 03:46:48 GMT 2015  Olly Betts <olly@survex.com>

	* .gitignore,configure.ac,desc-svxedit.txt,doc/,lib/,src/Makefile.am,
	  src/svxedit.rc: Remove lingering traces of svxedit.

Fri Jun 19 01:01:08 GMT 2015  Olly Betts <olly@survex.com>

	* src/aboutdlg.cc: Avoid assertion if the about dialog image fails to
	  load.  Reported by Phil Maynard.

Thu Jun 18 12:04:31 GMT 2015  Olly Betts <olly@survex.com>

	* configure.ac: Fix to allow compiling without libav.

Thu Jun 18 12:02:46 GMT 2015  Olly Betts <olly@survex.com>

	* src/avenprcore.cc,src/avenprcore.h: Clean up unused header includes.

Thu Jun 18 11:04:29 GMT 2015  Olly Betts <olly@survex.com>

	* buildmacosx.sh: Disable a load of libav features we don't use.

Thu Jun 18 11:01:37 GMT 2015  Olly Betts <olly@survex.com>

	* doc/HACKING.htm: Fix typo.

Thu Jun 18 11:00:33 GMT 2015  Olly Betts <olly@survex.com>

	* doc/HACKING.htm: Update recipe for building libav for mingw to
	  disable a load of features we don't use, reducing the size of
	  aven significantly.

Thu Jun 18 10:58:58 GMT 2015  Olly Betts <olly@survex.com>

	* doc/HACKING.htm,lib/,survex.iss.in: Update innosetup translations -
	  minor updates for zh_CN and an unofficial translation for en_GB from
	  the issrc repo (which is identical to mine in content).

Thu Jun 18 05:04:04 GMT 2015  Olly Betts <olly@survex.com>

	* NEWS: Bump release date for 1.2.19.

Thu Jun 18 00:07:46 GMT 2015  Olly Betts <olly@survex.com>

	* configure.ac: pkg-config support in proj seems quite new, so probe
	  directly if not found.

Wed Jun 17 11:02:40 GMT 2015  Olly Betts <olly@survex.com>

	* lib/: Update line number references.

Wed Jun 17 10:59:38 GMT 2015  Olly Betts <olly@survex.com>

	* lib/pl.po: Keep the "illegal option" message as a fuzzy translation
	  of the "invalid option" message.

Wed Jun 17 10:57:42 GMT 2015  Olly Betts <olly@survex.com>

	* lib/,src/getopt.c: #if 0 out the support for -W longopt (which we
	  don't use) and the posixly_correct "illegal option" message
	  ("invalid option" is clearer).

Wed Jun 17 10:18:12 GMT 2015  Olly Betts <olly@survex.com>

	* src/getopt.c,src/gettexttomsg.pl: Take preprocessor directives into
	  account to avoid converting gettext() uses which won't be used.

Wed Jun 17 02:06:12 GMT 2015  Olly Betts <olly@survex.com>

	* lib/INSTALL.OSX: Update.

Wed Jun 17 02:02:46 GMT 2015  Olly Betts <olly@survex.com>

	* lib/hu.po: Translate a couple more messages.

Wed Jun 17 01:18:20 GMT 2015  Olly Betts <olly@survex.com>

	* NEWS: Update.

Wed Jun 17 01:12:12 GMT 2015  Olly Betts <olly@survex.com>

	* lib/,src/mainfrm.cc,src/printing.cc: Use "..." rather than Unicode
	  ellipses in menu items and button labels, as that's conventional
	  (but keep using Unicode ellipses in other messages).

Tue Jun 16 22:29:49 GMT 2015  Olly Betts <olly@survex.com>

	* src/guicontrol.cc,src/mainfrm.cc: If the measuring line isn't
	  currently active, exit full screen mode if "Escape" is pressed.

Tue Jun 16 22:28:52 GMT 2015  Olly Betts <olly@survex.com>

	* make_release: Update for change to use pkg-config to find libav and
	  proj.

Tue Jun 16 07:31:35 GMT 2015  Olly Betts <olly@survex.com>

	* src/mainfrm.cc: Fix OS X shortcut for full screen mode to be
	  Ctrl+Command+F as that's the standard one, not Shift+Command+F
	  which we have been using since 1.2.7.

Tue Jun 16 07:28:50 GMT 2015  Olly Betts <olly@survex.com>

	* buildmacosx.sh,configure.ac,src/Makefile.am,src/moviemaker.cc,
	  src/moviemaker.h: Use pkg-config to probe for libav and proj.  This
	  sorts out the correct flags for building on OS X against a static
	  install of libav.

Mon Jun 15 01:54:03 GMT 2015  Olly Betts <olly@survex.com>

	* doc/manual.sgml: Update version in manual.

Mon Jun 15 01:31:01 GMT 2015  Olly Betts <olly@survex.com>

	* NEWS,configure.ac: Update for 1.2.19.

Mon Jun 15 01:26:18 GMT 2015  Olly Betts <olly@survex.com>

	* doc/survex.ent: Remove SGML entities which are no longer used.

Mon Jun 15 01:25:56 GMT 2015  Olly Betts <olly@survex.com>

	* doc/3dtopos.sgml,doc/diffpos.sgml: Add notes that aven can now
	  export .pos files.

Mon Jun 15 01:16:11 GMT 2015  Olly Betts <olly@survex.com>

	* lib/INSTALL.OSX: Update status and list the command line tools.

Mon Jun 15 01:07:17 GMT 2015  Olly Betts <olly@survex.com>

	* buildmacosx.sh: Just use "tar xf" - GNU tar automatically detects
	  any decompressor needed in the versions we'll encounter on OS X.

Mon Jun 15 01:06:16 GMT 2015  Olly Betts <olly@survex.com>

	* buildmacosx.sh,lib/INSTALL.OSX: Build OS X version with libav to
	  enable aven's movie export feature.

Mon Jun 15 01:04:22 GMT 2015  Olly Betts <olly@survex.com>

	* buildmacosx.sh: Move compression used for disk image into variable
	  dmg_format.

Mon Jun 15 01:03:23 GMT 2015  Olly Betts <olly@survex.com>

	* buildmacosx.sh: Improve documentation of wx --enable-unicode.

Sun Jun 14 13:17:15 GMT 2015  Olly Betts <olly@survex.com>

	* src/: Mark all single-argument constructors as 'explicit'.

Sun Jun 14 12:59:37 GMT 2015  Olly Betts <olly@survex.com>

	* lib/: Update source references and fill in translations for new
	  message.

Sun Jun 14 12:50:07 GMT 2015  Olly Betts <olly@survex.com>

	* lib/survex.pot,src/printing.cc: "pos files" reads better than "POS
	  files".

Sun Jun 14 12:34:05 GMT 2015  Olly Betts <olly@survex.com>

	* NEWS: Update.

Sun Jun 14 12:31:32 GMT 2015  Olly Betts <olly@survex.com>

	* src/gfxcore.cc: When reading terrain data from a .zip file, report an
	  error if the .zip file is bad, or if it doesn't contain any terrain
	  data we recognise.

Sun Jun 14 12:30:36 GMT 2015  Olly Betts <olly@survex.com>

	* buildmacosx.sh: Enable wxDisplay to better support multi-monitor
	  setups.

Sun Jun 14 12:11:11 GMT 2015  Olly Betts <olly@survex.com>

	* buildmacosx.sh: No need for --enable-unicode with wx3.

Sun Jun 14 11:33:46 GMT 2015  Olly Betts <olly@survex.com>

	* src/: Use the correct separator for sorting stations when exporting a
	  .pos file.

Sun Jun 14 11:09:49 GMT 2015  Olly Betts <olly@survex.com>

	* lib/survex.pot,src/: Add exporting to Survex POS format to aven.

Sat Jun 13 13:48:09 GMT 2015  Olly Betts <olly@survex.com>

	* NEWS: Update.

Sat Jun 13 13:29:01 GMT 2015  Olly Betts <olly@survex.com>

	* src/printing.cc: Remove code to workaround wxMac opening the preview
	  window at minimum size, as this no longer happens with wxWidgets
	  3.0.2.  We currently disable this preview window anyway, as OS X has
	  its own print preview, which is slicker than the generic wxWidgets
	  one.

Sat Jun 13 13:20:54 GMT 2015  Olly Betts <olly@survex.com>

	* src/mainfrm.cc: We need to call Layout() when we come out of
	  FullScreen mode under OS X so the sizer adjusts to show the toolbar.

Sat Jun 13 13:17:47 GMT 2015  Olly Betts <olly@survex.com>

	* src/: Fix exporting to GPX, KML and HPGL, which all failed to write
	  the header to the exported file in 1.2.18.

Sat Jun 13 11:00:29 GMT 2015  Olly Betts <olly@survex.com>

	* src/mainfrm.cc,src/mainfrm.h: Now we're using a non-native toolbar
	  for OS X, GetToolBar() returns NULL, and we need to do a bit of
	  extra work to get the toolbar.

Sat Jun 13 10:18:07 GMT 2015  Olly Betts <olly@survex.com>

	* lib/de_CH.po: Add missing "fuzzy" marker.

Sat Jun 13 07:54:07 GMT 2015  Olly Betts <olly@survex.com>

	* src/mainfrm.cc: On OS X, drop out of full screen mode if the mouse is
	  mode to the top of the screen, since we can't seem to display the
	  menu bar in this case.

Sat Jun 13 07:27:27 GMT 2015  Olly Betts <olly@survex.com>

	* src/aven.cc: Remove crude bodge which tries to pick a suitable
	  initial window size when using wxWidgets without wxDisplay on a
	  multi-monitor setup.  It was based on the setup I had at the time,
	  and might not work well in every situation, and now we persist the
	  window size between runs, picking a nice initial size isn't so
	  important.

Sat Jun 13 07:24:07 GMT 2015  Olly Betts <olly@survex.com>

	* src/aven.cc: If the saved size for aven's window exceeds the current
	  display size (mostly likely because we're now plugged into a smaller
	  monitor), then reduce the size of the window to fit the display.
	  If the saved size is < (480x320), increase it to at least that, as
	  aven isn't usable in a smaller window.

Fri Jun 12 11:28:46 GMT 2015  Olly Betts <olly@survex.com>

	* lib/,src/mainfrm.cc: Add another TRANSLATORS comment.

Fri Jun 12 10:43:27 GMT 2015  Olly Betts <olly@survex.com>

	* src/aven.cc: Remove unused '#include <signal.h>'.

Fri Jun 12 10:34:37 GMT 2015  Olly Betts <olly@survex.com>

	* configure.ac,lib/,src/message.c,src/msvc/config.h.in: Stop trying to
	  catch and report signals.  The only real reason to do it is so we
	  can say "Bug in program detected! Please report this to the authors"
	  before we exit, but when the program crashes that's pretty obvious.
	  In aven we try to pop up a message box for this message, which may
	  fail due to whatever caused the signal, while with the command line
	  tools there's no great benefit over just letting the shell report
	  the signal.

Fri Jun 12 10:30:11 GMT 2015  Olly Betts <olly@survex.com>

	* lib/: Translation updates.

Fri Jun 12 06:13:04 GMT 2015  Olly Betts <olly@survex.com>

	* src/Makefile.am: Use $(COMMONSRC) in aven_SOURCES.

Thu Jun 11 02:22:11 GMT 2015  Olly Betts <olly@survex.com>

	* lib/: Assorted translation updates.

Thu Jun 11 02:06:25 GMT 2015  Olly Betts <olly@survex.com>

	* lib/,src/cmdline.c: Fix typo in TRANSLATORS comment (--verbose ->
	  --version).

Thu Jun 11 01:39:34 GMT 2015  Olly Betts <olly@survex.com>

	* src/mainfrm.cc: Stop trying to scale toolbar icons by the content
	  scale factor on OS X, as this doesn't seem to achieve what we want,
	  requires an as-yet unreleased version of wx, and forcing a
	  non-native toolbar works with current releases.

Thu Jun 11 00:55:50 GMT 2015  Olly Betts <olly@survex.com>

	* lib/INSTALL.OSX,src/mainfrm.cc: Force use of a non-native toolbar on
	  OS X to stop the toolbar icons from getting rescaled and looking
	  fuzzy.

Wed Jun 10 11:23:03 GMT 2015  Olly Betts <olly@survex.com>

	* src/guicontrol.cc: On OS X, when we centre the view on the station
	  this can generate a mouse move event, so clear the variable which
	  says we are dragging before we process a left click on a station.
	  This avoids random rotations of the survey when clicking on a
	  station, reported in #47 by Hugh St. Lawrence.

Wed Jun 10 11:22:02 GMT 2015  Olly Betts <olly@survex.com>

	* lib/Info.plist.in: Add missing CFBundleTypeRole to silence warning
	  on stderr.

Wed Jun 10 06:18:08 GMT 2015  Olly Betts <olly@survex.com>

	* lib/id.po: Merge updates from launchpad.

Wed Jun 10 06:17:22 GMT 2015  Olly Betts <olly@survex.com>

	* lib/en_US.po: Remove extra blank line.

Tue Jun 09 02:16:44 GMT 2015  Olly Betts <olly@survex.com>

	* lib/id.po: Merge translation updates from launchpad.

Tue Jun 09 01:18:18 GMT 2015  Olly Betts <olly@survex.com>

	* lib/: Update .pot and merge changes to .po files.

Tue Jun 09 01:09:43 GMT 2015  Olly Betts <olly@survex.com>

	* lib/extract-msgs.pl: Recognise %.0f as a C printf format string.

Tue Jun 09 01:06:04 GMT 2015  Olly Betts <olly@survex.com>

	* lib/generate-po-todo: Add code to update the todo files on the
	  website.

Tue Jun 09 01:04:43 GMT 2015  Olly Betts <olly@survex.com>

	* src/printing.cc: Redo the code which rescales the footer so that the
	  right end aligns exactly, like it does in the non-rescaling case.

Tue Jun 09 00:48:52 GMT 2015  Olly Betts <olly@survex.com>

	* lib/survex.pot,src/printing.cc: Shorten the datestamp by dropping
	  any day name and timezone, and add "Processed: " before it so it
	  is clear what it is the date and time of.

Tue Jun 09 00:05:54 GMT 2015  Olly Betts <olly@survex.com>

	* lib/survex.pot,src/printing.cc: Mark printouts of extended
	  elevations in the footer appropriately.

Mon Jun 08 13:13:20 GMT 2015  Olly Betts <olly@survex.com>

	* lib/survex.pot,src/printing.cc: Also include the scale in the footer
	  of printouts.

Mon Jun 08 13:00:55 GMT 2015  Olly Betts <olly@survex.com>

	* lib/survex.pot,src/printing.cc: Add view details to footer of
	  printouts.  (ticket #52)

Mon Jun 08 12:00:47 GMT 2015  Olly Betts <olly@survex.com>

	* src/: Rename printwx.cc to printing.cc, etc - we only have wx-based
	  printing now.

Sun Jun 07 14:40:23 GMT 2015  Olly Betts <olly@survex.com>

	* lib/survex.pot,src/printwx.cc: Simplify the page footer on printouts.
	  If the footer is too long to fit the page width, reduce the font size
	  so it exactly fits; otherwise space out the elements evenly to fill
	  the width.

Sun Jun 07 06:38:14 GMT 2015  Olly Betts <olly@survex.com>

	* src/gfxcore.cc: Tweak error message in terrain reading code to
	  distinguish two failure cases.

Thu Jun 04 05:37:23 GMT 2015  Olly Betts <olly@survex.com>

	* lib/INSTALL.OSX,src/mainfrm.cc: Only try to scale the OS X toolbar
	  icons for wx >= 3.1.0, as current releases don't have the required
	  API methods.  Also, correct "GetClientScaleFactor" to
	  "GetContentScaleFactor".

Thu Jun 04 01:19:31 GMT 2015  Olly Betts <olly@survex.com>

	* make_release: Tag releases with message "Survex $VERSION".

Thu Jun 04 01:19:16 GMT 2015  Olly Betts <olly@survex.com>

	* buildmacosx.sh: Fix comment typo.

Wed Jun 03 08:23:27 GMT 2015  Olly Betts <olly@survex.com>

	* survex.iss.in: No more .ini files to install.

Wed Jun 03 07:34:16 GMT 2015  Olly Betts <olly@survex.com>

	* src/mainfrm.cc: Fix WXMSW build.

Wed Jun 03 07:28:37 GMT 2015  Olly Betts <olly@survex.com>

	* doc/Makefile.am: Fix manual version check to work in a VPATH build.

Wed Jun 03 07:10:50 GMT 2015  Olly Betts <olly@survex.com>

	* NEWS,configure.ac: Update for 1.2.18.

Wed Jun 03 07:09:54 GMT 2015  Olly Betts <olly@survex.com>

	* lib/: Update survex.pot and merge pos.

Wed May 20 13:52:06 GMT 2015  Olly Betts <olly@survex.com>

	* src/: Fix to compile without warnings with 'g++ --std=gnu++11'.

Tue Apr 14 06:58:16 GMT 2015  Olly Betts <olly@survex.com>

	* NEWS: Update.

Tue Apr 14 00:27:12 GMT 2015  Olly Betts <olly@survex.com>

	* src/mainfrm.cc: Moan if there's no coordinate system before allowing
	  the user to pick a terrain file.

Mon Apr 13 11:37:57 GMT 2015  Olly Betts <olly@survex.com>

	* src/export.cc: Adjust 'creator' in EPS output.

Mon Apr 13 11:20:04 GMT 2015  Olly Betts <olly@survex.com>

	* src/export.cc,src/printwx.cc: Add passage export for EPS format.
	  (see #4)

Mon Apr 13 03:06:48 GMT 2015  Olly Betts <olly@survex.com>

	* src/commands.c,tests/cmd_fix_bad.out,tests/cmd_fix_bad.svx: Reject
	  *fix with SDs which aren't all positive.  (fixes#2, reported by
	  susscorfa).

Mon Apr 13 02:34:03 GMT 2015  Olly Betts <olly@survex.com>

	* tests/cmd_entrance_bad.svx: Fix not to accidentally specify sd of 0.

Sun Apr 12 13:00:37 GMT 2015  Olly Betts <olly@survex.com>

	* src/avenprcore.cc,src/avenprcore.h,src/printwx.cc: Working towards
	  supporting "skip blank pages".

Sun Apr 12 10:22:13 GMT 2015  Olly Betts <olly@survex.com>

	* src/printwx.cc: Eliminate Init() and Pre() methods of svxPrintout
	  class.

Sun Apr 12 10:08:42 GMT 2015  Olly Betts <olly@survex.com>

	* src/printwx.cc: Comment clean-ups.

Sun Apr 12 10:02:31 GMT 2015  Olly Betts <olly@survex.com>

	* src/printwx.cc: Eliminate unused return value of svxPrintout::Pre().

Sun Apr 12 10:01:08 GMT 2015  Olly Betts <olly@survex.com>

	* src/avenprcore.cc,src/avenprcore.h,src/printwx.cc: Eliminate footer
	  member of layout.

Sun Apr 12 09:50:24 GMT 2015  Olly Betts <olly@survex.com>

	* src/printwx.cc: Eliminate 4 file global variables.

Sun Apr 12 09:49:58 GMT 2015  Olly Betts <olly@survex.com>

	* src/printwx.cc: Make a couple of arrays const.

Sun Apr 12 09:38:49 GMT 2015  Olly Betts <olly@survex.com>

	* src/avenprcore.h,src/printwx.cc: Make clip rectangle part of the
	  svxPrintout class.

Sun Apr 12 09:32:54 GMT 2015  Olly Betts <olly@survex.com>

	* src/avenprcore.h: Remove unused header.

Sun Apr 12 09:04:09 GMT 2015  Olly Betts <olly@survex.com>

	* src/avenprcore.h: Remove dead code.

Sun Apr 12 08:54:16 GMT 2015  Olly Betts <olly@survex.com>

	* make_release: Add comment documenting the purpose of this script.

Sun Apr 12 08:51:16 GMT 2015  Olly Betts <olly@survex.com>

	* tests/back.out,tests/back2.out,tests/lengthunits.out: Add missing
	  testcase output files.

Sun Apr 12 08:37:31 GMT 2015  Olly Betts <olly@survex.com>

	* src/dump3d.c: Remove some commented out code from development.

Sun Apr 12 08:24:54 GMT 2015  Olly Betts <olly@survex.com>

	* lib/: Remove unused message 166.

Sun Apr 12 08:23:24 GMT 2015  Olly Betts <olly@survex.com>

	* src/avenprcore.cc: Clean up the currently unused code for skipping
	  blank pages, by removing parts we definitely don't want.

Sun Apr 12 08:08:28 GMT 2015  Olly Betts <olly@survex.com>

	* src/avenprcore.h,src/printwx.cc: Simplify setting of pen colours
	  while printing.

Sun Apr 12 07:57:22 GMT 2015  Olly Betts <olly@survex.com>

	* src/avenprcore.h,src/printwx.cc: Simplify setting of text colour.

Sun Apr 12 07:56:48 GMT 2015  Olly Betts <olly@survex.com>

	* src/avenprcore.h: Remove unused constants.

Sun Apr 12 07:22:34 GMT 2015  Olly Betts <olly@survex.com>

	* src/avenprcore.h,src/printwx.cc: Simplify font handling when
	  printing.

Sun Apr 12 07:04:38 GMT 2015  Olly Betts <olly@survex.com>

	* src/printwx.cc: Use DC::GetCharHeight() to get the height of the
	  font, rather than calling DC::GetTextExtent("My").

Sat Apr 11 23:30:42 GMT 2015  Olly Betts <olly@survex.com>

	* src/printwx.cc: Destroy any existing clipping region before we write
	  the page footer.  Hopefully solves #52, reported by Erin Lynch.

Sat Apr 11 00:50:03 GMT 2015  Olly Betts <olly@survex.com>

	* NEWS: Update.

Fri Apr 10 20:31:56 GMT 2015  Olly Betts <olly@survex.com>

	* lib/en_US.po: Say "control point" more consistently.

Fri Apr 10 10:34:57 GMT 2015  Olly Betts <olly@survex.com>

	* src/: Pressing F6 toggles the display of rendering stats, currently
	  FPS (Frames Per Second) and the number of triangles in the terrain
	  mesh.

Tue Apr 07 21:52:29 GMT 2015  Olly Betts <olly@survex.com>

	* lib/en_US.po: Remove fuzzy markers from a couple of messages.

Tue Apr 07 06:03:01 GMT 2015  Olly Betts <olly@survex.com>

	* src/gfxcore.cc: Fix printf format/type mismatch.

Tue Apr 07 06:02:24 GMT 2015  Olly Betts <olly@survex.com>

	* src/gfxcore.cc: Report an error if the survey data has no coordinate
	  system and you try to load terrain.

Mon Apr 06 15:33:11 GMT 2015  Olly Betts <olly@survex.com>

	* lib/en_US.po: Tweak accelerators to match recent tweaks to the master
	  strings.

Mon Apr 06 15:30:55 GMT 2015  Olly Betts <olly@survex.com>

	* lib/en_US.po: Add translation of new message.

Mon Apr 06 15:22:02 GMT 2015  Olly Betts <olly@survex.com>

	* lib/po-to-msg.pl: Fix off-by-one in count of untranslated messages.

Mon Apr 06 15:21:34 GMT 2015  Olly Betts <olly@survex.com>

	* lib/po-to-msg.pl: Report if there are fuzzy strings for a language.

Mon Apr 06 15:17:54 GMT 2015  Olly Betts <olly@survex.com>

	* lib/,src/mainfrm.cc: Update pot and merge pos.

Mon Apr 06 14:03:44 GMT 2015  Olly Betts <olly@survex.com>

	* lib/survex.pot,src/: Add UI for loading terrain files.

Mon Apr 06 11:28:57 GMT 2015  Olly Betts <olly@survex.com>

	* src/gfxcore.h: Remove method which is never defined.

Sun Apr 05 10:58:34 GMT 2015  Olly Betts <olly@survex.com>

	* doc/TODO.htm,doc/manual.sgml: Update for addition of terrain support.

Sun Apr 05 09:50:09 GMT 2015  Olly Betts <olly@survex.com>

	* src/gla-gl.cc: Tweak code for drawing crosses to be more like the
	  code for drawing blobs.

Sun Apr 05 09:49:39 GMT 2015  Olly Betts <olly@survex.com>

	* src/gfxcore.cc: Fix reversed check for endian-ness of .bil files.

Sun Apr 05 09:48:39 GMT 2015  Olly Betts <olly@survex.com>

	* src/gfxcore.cc,src/gla-gl.cc,src/gla.h: Plot the terrain with a
	  Z-prepass so that we don't see the terrain through itself.

Sun Apr 05 09:46:31 GMT 2015  Olly Betts <olly@survex.com>

	* src/gfxcore.cc: Increase volume diameter so that terrain doesn't get
	  clipped.

Sun Apr 05 06:36:56 GMT 2015  Olly Betts <olly@survex.com>

	* src/gfxcore.cc: Show busy cursor while building the terrain model.

Sun Apr 05 04:36:51 GMT 2015  Olly Betts <olly@survex.com>

	* lib/checkshortcut.pl: Strip off accelerator before looking at
	  shortcuts, and don't offer ellipses as a potential shortcut.

Sun Apr 05 04:25:32 GMT 2015  Olly Betts <olly@survex.com>

	* lib/checkshortcut.pl: Treat a missing shortcut as an error too.

Sun Apr 05 04:24:07 GMT 2015  Olly Betts <olly@survex.com>

	* lib/checkshortcut.pl: If there's a shortcut clash, report letters
	  used in strings in the menu which aren't used for shortcuts, and
	  separately any ASCII letters which aren't used in the menu strings at
	  all.

Sun Apr 05 04:22:39 GMT 2015  Olly Betts <olly@survex.com>

	* lib/deadmessages.txt,lib/merge-po: Fix extra "" on msgid when adding
	  to deadmessages.txt.

Sun Apr 05 03:59:42 GMT 2015  Olly Betts <olly@survex.com>

	* lib/: Merge messages and resolve clashing menu accelarators.

Sun Apr 05 03:40:13 GMT 2015  Olly Betts <olly@survex.com>

	* lib/survex.pot,src/mainfrm.cc: Fix clashing menu accelarators.

Sun Apr 05 03:34:52 GMT 2015  Olly Betts <olly@survex.com>

	* lib/survex.pot,src/: Create a "Colour by" submenu of the "View" menu.

Sun Apr 05 03:04:00 GMT 2015  Olly Betts <olly@survex.com>

	* src/gfxcore.cc,src/gfxcore.h: Add support for reading DEM data from
	  SRTM .hgt files.

Sun Apr 05 02:22:03 GMT 2015  Olly Betts <olly@survex.com>

	* src/gfxcore.cc: Remove header which is no longer used.

Sun Apr 05 01:25:59 GMT 2015  Olly Betts <olly@survex.com>

	* src/: Remove actions from 'Orientation' menu which you wouldn't
	  sanely want to perform from the menu.

Sat Apr 04 23:24:13 GMT 2015  Olly Betts <olly@survex.com>

	* src/: Remove actions from 'Rotation' menu which you wouldn't sanely
	  want to perform from the menu.

Sat Apr 04 23:06:26 GMT 2015  Olly Betts <olly@survex.com>

	* src/gfxcore.cc,src/gfxcore.h: Factor out DEM loading into a separate
	  method.

Sat Apr 04 22:30:03 GMT 2015  Olly Betts <olly@survex.com>

	* src/gfxcore.cc: Draw terrain before crosses/blobs.

Sat Apr 04 22:01:29 GMT 2015  Olly Betts <olly@survex.com>

	* src/gfxcore.cc: Support 'SKIPBYTES' in the DEM data.

Sat Apr 04 21:58:59 GMT 2015  Olly Betts <olly@survex.com>

	* src/gfxcore.cc: Remove unused macros.

Sat Apr 04 13:04:04 GMT 2015  Olly Betts <olly@survex.com>

	* src/gfxcore.cc: Fix DEM reading for big-endian platforms.

Sat Apr 04 03:17:32 GMT 2015  Olly Betts <olly@survex.com>

	* src/gfxcore.cc,src/gfxcore.h: Render terrain as a transparent mesh of
	  triangles.

Fri Apr 03 04:26:34 GMT 2015  Olly Betts <olly@survex.com>

	* src/gfxcore.cc: Test with the void-filled 3-arc second SRTM data.

Thu Apr 02 11:17:01 GMT 2015  Olly Betts <olly@survex.com>

	* NEWS: Update.

Thu Apr 02 11:13:24 GMT 2015  Olly Betts <olly@survex.com>

	* lib/ru.po: Fix accelerator clash.

Thu Apr 02 10:43:37 GMT 2015  Olly Betts <olly@survex.com>

	* lib/id.po,lib/ru.po: Merge translation updates.

Wed Apr 01 11:53:26 GMT 2015  Olly Betts <olly@survex.com>

	* src/gfxcore.cc: Make stats read from DEM file static.

Wed Apr 01 07:33:18 GMT 2015  Olly Betts <olly@survex.com>

	* src/gfxcore.cc: Process all of the DEM data.

Tue Mar 31 11:46:25 GMT 2015  Olly Betts <olly@survex.com>

	* src/gfxcore.cc: Read terrain data directly from the zip file.

Tue Mar 31 11:37:21 GMT 2015  Olly Betts <olly@survex.com>

	* src/gfxcore.cc: Make terrain white with 30% alpha rather than light
	  grey and opaque.

Mon Mar 23 04:41:11 GMT 2015  Olly Betts <olly@survex.com>

	* buildmacosx.sh: Remove packaging of svxedit for OS X.

Mon Mar 23 02:30:39 GMT 2015  Olly Betts <olly@survex.com>

	* survex.spec.in: Drop svxedit from RPM spec file.

Mon Mar 23 02:27:52 GMT 2015  Olly Betts <olly@survex.com>

	* .gitignore,Makefile.am,configure.ac,lib/INSTALL.OSX,
	  lib/icons/Makefile.am,src/,survex.iss.in: Remove editwrap - while an
	  editor with built-in knowledge of survex would be nice to have,
	  svxedit doesn't really offer that, and it looks ugly in a modern
	  desktop.

Mon Mar 23 00:55:24 GMT 2015  Olly Betts <olly@survex.com>

	* lib/INSTALL.OSX,src/mainfrm.cc: Attempt to address the size of the
	  toolbar icons on Mac OS X.

Sun Mar 22 10:10:21 GMT 2015  Olly Betts <olly@survex.com>

	* doc/manual.sgml: <?dbhtml seems to require > not ?> to terminate.

Sun Mar 22 04:39:39 GMT 2015  Olly Betts <olly@survex.com>

	* doc/manual.sgml: Fix bugs in the markup.

Sun Mar 22 04:07:53 GMT 2015  Olly Betts <olly@survex.com>

	* .gitignore,configure.ac,doc/: Eliminate most of the SGML entities we
	  define.

Sat Mar 21 20:51:54 GMT 2015  Olly Betts <olly@survex.com>

	* NEWS: Update.

Sat Mar 21 02:43:48 GMT 2015  Olly Betts <olly@survex.com>

	* doc/diffpos.sgml,doc/extend.sgml: Remove &nbsp; which actually make
	  the output formatting worse (presumably these used to work around a
	  bug in one of the docbook processing tools.

Sat Mar 21 02:26:59 GMT 2015  Olly Betts <olly@survex.com>

	* doc/: Eliminate uses of Null End Tag, as a step towards making the
	  docs valid XML rather than just SGML.

Thu Mar 19 11:57:14 GMT 2015  Olly Betts <olly@survex.com>

	* src/gfxcore.cc,src/gfxcore.h,src/mainfrm.h: Terrain data work in
	  progress.

Thu Mar 19 10:32:48 GMT 2015  Olly Betts <olly@survex.com>

	* lib/icons/Makefile.am,lib/icons/solid-surface.png,
	  lib/icons/solid_surface.xpm,lib/survex.pot,src/: Add UI for toggling
	  terrain on and off.

Wed Mar 18 04:11:49 GMT 2015  Olly Betts <olly@survex.com>

	* lib/bg.po,lib/el.po: A few updates.

Wed Mar 18 03:22:09 GMT 2015  Olly Betts <olly@survex.com>

	* doc/manual.sgml: Add a link to the sample data from the manual too.

Wed Mar 18 03:12:09 GMT 2015  Olly Betts <olly@survex.com>

	* doc/manual.sgml: Remove references to contact addresses which are
	  no longer there.  Remove offer to post people floppies, and
	  references to a fictional CD image.

Sun Mar 15 03:38:32 GMT 2015  Olly Betts <olly@survex.com>

	* lib/: Merge po changes.

Sun Mar 15 03:35:48 GMT 2015  Olly Betts <olly@survex.com>

	* src/gfxcore.cc,src/gfxcore.h: Take the width of the messages used
	  above the compass and clino into account when calculating how wide
	  they are.

Sun Mar 15 03:35:07 GMT 2015  Olly Betts <olly@survex.com>

	* src/gla-gl.cc,src/gla.h: Make GLACanvas::GetTextExtent() const.

Sun Mar 15 03:34:26 GMT 2015  Olly Betts <olly@survex.com>

	* src/commands.c,src/gfxcore.cc: Add and enhance some TRANSLATORS
	  comments.

Sun Mar 15 03:33:13 GMT 2015  Olly Betts <olly@survex.com>

	* lib/survex.pot: Add TRANSLATORS comments for a couple of messages
	  which aren't yet used.

Sun Mar 15 02:47:30 GMT 2015  Olly Betts <olly@survex.com>

	* lib/id.po: Merge translation updates.

Fri Mar 13 21:28:07 GMT 2015  Olly Betts <olly@survex.com>

	* NEWS: Update.

Fri Mar 13 11:27:54 GMT 2015  Olly Betts <olly@survex.com>

	* src/findentrances.cc: If the 3d file specifies the coordinate system,
	  use it.

Fri Mar 13 03:49:45 GMT 2015  Olly Betts <olly@survex.com>

	* lib/hu.po: Merged adjusted versions of some suggestions, marked as
	  "fuzzy".

Thu Mar 12 22:30:14 GMT 2015  Olly Betts <olly@survex.com>

	* lib/: Update source references.

Thu Mar 12 22:27:13 GMT 2015  Olly Betts <olly@survex.com>

	* lib/survex.pot: Add message ready for future use.

Thu Mar 12 01:51:31 GMT 2015  Olly Betts <olly@survex.com>

	* lib/ru.po: Juggle menu shortcuts.

Thu Mar 12 01:42:09 GMT 2015  Olly Betts <olly@survex.com>

	* lib/de.po,lib/de_CH.po: Adapt some translations.

Thu Mar 12 01:12:51 GMT 2015  Olly Betts <olly@survex.com>

	* lib/fr.po: Adapt a couple of translations.

Wed Mar 11 06:12:09 GMT 2015  Olly Betts <olly@survex.com>

	* lib/ro.po,lib/sk.po: Fix some shortcut clashes.

Wed Mar 11 05:00:26 GMT 2015  Olly Betts <olly@survex.com>

	* lib/,src/: Add "Colour by Gradient".

Wed Mar 11 04:55:38 GMT 2015  Olly Betts <olly@survex.com>

	* lib/fr.po: Juggle menu shortcuts.

Wed Mar 11 04:54:57 GMT 2015  Olly Betts <olly@survex.com>

	* lib/fr.po: Add translation.

Wed Mar 11 04:38:52 GMT 2015  Olly Betts <olly@survex.com>

	* lib/fr.po: Fix typo.

Wed Mar 11 04:30:17 GMT 2015  Olly Betts <olly@survex.com>

	* src/gfxcore.cc: Minor refactor.

Wed Mar 11 04:27:04 GMT 2015  Olly Betts <olly@survex.com>

	* src/gfxcore.cc: Refactor code to dispatch drawing of the colour key.

Wed Mar 11 03:59:57 GMT 2015  Olly Betts <olly@survex.com>

	* src/gfxcore.cc,src/gfxcore.h: Factor out function to pick the colour
	  pen based on a value between 0 and 1.

Wed Mar 11 03:15:46 GMT 2015  Olly Betts <olly@survex.com>

	* src/gfxcore.h: Invalidate the length key when "Metric" is toggled.

Wed Mar 11 03:14:30 GMT 2015  Olly Betts <olly@survex.com>

	* src/gfxcore.cc: Context menu on length key now allows toggling
	  "Metric", like it does on the depth key.

Wed Mar 11 03:12:54 GMT 2015  Olly Betts <olly@survex.com>

	* src/gfxcore.cc: Put units below length key (like we do for depth
	  key) and only show one decimal place on the lengths.

Wed Mar 11 03:11:11 GMT 2015  Olly Betts <olly@survex.com>

	* lib/de.po,lib/de_CH.po,lib/fr.po: Attempt to update some
	  translations.

Tue Mar 10 12:30:42 GMT 2015  Olly Betts <olly@survex.com>

	* NEWS: Update.

Tue Mar 10 00:54:10 GMT 2015  Olly Betts <olly@survex.com>

	* lib/: Update source references and TRANSLATORS comments.

Tue Mar 10 00:50:44 GMT 2015  Olly Betts <olly@survex.com>

	* src/: Add more TRANSLATORS comments.

Tue Mar 10 00:49:03 GMT 2015  Olly Betts <olly@survex.com>

	* lib/pt.po,lib/pt_BR.po: Add missing "fuzzy" marker to two
	  translations.

Tue Mar 10 00:46:55 GMT 2015  Olly Betts <olly@survex.com>

	* lib/id.po,lib/ru.po: Merge translation updates.

Tue Mar 10 00:45:15 GMT 2015  Olly Betts <olly@survex.com>

	* lib/launchpad-merge-po: Sync merging at blank lines between
	  messages.

Tue Mar 10 00:05:29 GMT 2015  Olly Betts <olly@survex.com>

	* lib/: Update po files for new message.

Sun Mar 08 13:20:00 GMT 2015  Olly Betts <olly@survex.com>

	* NEWS: Update.

Sun Mar 08 13:12:10 GMT 2015  Olly Betts <olly@survex.com>

	* doc/manual.sgml: Document averaging of a group of repeated readings.

Sun Mar 08 10:09:04 GMT 2015  Olly Betts <olly@survex.com>

	* src/gfxcore.cc: Remove unnecessary clamping when colouring by date or
	  error, due to cut-and-pasting code from the colour by depth case.

Sun Mar 08 09:35:59 GMT 2015  Olly Betts <olly@survex.com>

	* lib/survex.pot,src/: Add "Colour by Length".

Sun Mar 08 09:30:16 GMT 2015  Olly Betts <olly@survex.com>

	* src/datain.c: Fix amended message in source from the output units
	  commit.

Sun Mar 08 04:22:29 GMT 2015  Olly Betts <olly@survex.com>

	* doc/TODO.htm: "Save cavern log from aven" now implemented.

Sun Mar 08 02:22:33 GMT 2015  Olly Betts <olly@survex.com>

	* src/commands.c: Slightly simplify handling of the units scaling
	  factor.

Sun Mar 08 02:21:09 GMT 2015  Olly Betts <olly@survex.com>

	* src/cavern.h: Reorder the Q_ enum values so that those used in
	  bitmasks tests are together and first.

Sun Mar 08 02:20:30 GMT 2015  Olly Betts <olly@survex.com>

	* src/datain.c: Add FIXME about warnings when the backclino has range
	  0-180 degrees.

Sun Mar 08 02:16:39 GMT 2015  Olly Betts <olly@survex.com>

	* doc/TODO.htm,lib/,src/,tests/: In cavern, use the currently set units
	  when outputting measurements in warnings, errors, and the stats at
	  the end of the run.

Sun Mar 08 02:10:03 GMT 2015  Olly Betts <olly@survex.com>

	* src/message.c: Document the CP-1250 and CP-1252 mappings are
	  complete, and which positions are unused in these character sets.

Sun Mar 08 02:07:39 GMT 2015  Olly Betts <olly@survex.com>

	* src/message.c: Add commented out mappings for the CP-1252 characters
	  we don't currently make use of.

Sun Mar 08 02:06:29 GMT 2015  Olly Betts <olly@survex.com>

	* src/message.c: Add CP-1252 mappings for fancy quotes.

Sun Mar 08 02:03:43 GMT 2015  Olly Betts <olly@survex.com>

	* src/message.c: Improve debug message for a missing transliteration to
	  report the codepoint in question, and note why 169 isn't handled here.

Sun Mar 08 00:55:56 GMT 2015  Olly Betts <olly@survex.com>

	* src/message.c: Transliterate gradient and infinity symbols if the
	  current character set lacks them.

Sat Mar 07 10:36:43 GMT 2015  Olly Betts <olly@survex.com>

	* src/message.c: Don't dynamically generate a message string for a
	  message requested before messages are read or for an out of range
	  message number - instead return a fixed string and write the
	  message number to STDERR.

Sat Mar 07 10:03:37 GMT 2015  Olly Betts <olly@survex.com>

	* src/avenprcore.cc,src/message.c,src/message.h: msg() has returned a
	  persistent copy of the message for decades, so the code's bound to
	  rely on that in some places.  And there's no real reason it
	  shouldn't continue to as the messages are under 20KB of UTF-8 text
	  for any language, so lazy loading isn't worth the complication.  So
	  remove msgPerm() and the unused msgFree() macro, and document that
	  msg() returns a persistent copy.

Sat Mar 07 00:01:50 GMT 2015  Olly Betts <olly@survex.com>

	* src/commands.c: Make data tables const where possible.

Fri Mar 06 22:06:41 GMT 2015  Olly Betts <olly@survex.com>

	* lib/: More minor translation updates.

Fri Mar 06 21:48:58 GMT 2015  Olly Betts <olly@survex.com>

	* lib/bg.po: Minor update.

Fri Mar 06 12:39:29 GMT 2015  Olly Betts <olly@survex.com>

	* lib/INSTALL.OSX,lib/icons/Makefile.am,lib/icons/plt.svg: Add SVG
	  version of .plt icon.

Fri Mar 06 12:38:48 GMT 2015  Olly Betts <olly@survex.com>

	* src/datain.c: Improve wording of FIXME comment.

Fri Mar 06 11:48:08 GMT 2015  Olly Betts <olly@survex.com>

	* NEWS: Update.

Fri Mar 06 10:30:26 GMT 2015  Olly Betts <olly@survex.com>

	* .gitignore: Update.

Fri Mar 06 10:15:16 GMT 2015  Olly Betts <olly@survex.com>

	* .gitignore,Makefile.am,debian/survex.install,doc/,lib/,src/: Aven's
	  support for reading colours and font sizes for printouts from
	  print.ini has never worked - the contents of the ini files are
	  ignored due to a bug which has been there since the code was added
	  in 2005 - but nobody has ever complained.  So just strip out that
	  code entirely - we should support setting the colours and font sizes,
	  but a GUI interface for setting them would be better.

Fri Mar 06 07:00:35 GMT 2015  Olly Betts <olly@survex.com>

	* src/avenprcore.h: Remove prototypes for functions we no longer
	  declare.

Fri Mar 06 05:08:28 GMT 2015  Olly Betts <olly@survex.com>

	* src/datain.c: Warn if fore and back measurements differ by more than
	  3 SDs, rather than just by 2 SDs.

Fri Mar 06 05:01:24 GMT 2015  Olly Betts <olly@survex.com>

	* lib/: More translation updates.

Fri Mar 06 04:33:21 GMT 2015  Olly Betts <olly@survex.com>

	* lib/: Update and merge translations.

Fri Mar 06 04:30:33 GMT 2015  Olly Betts <olly@survex.com>

	* src/cavernlog.cc: Fix TRANSLATORS comment in source to match .pot
	  file.

Fri Mar 06 04:00:54 GMT 2015  Olly Betts <olly@survex.com>

	* src/cavernlog.cc: Avoid hardcoding numeric value of LOG_REPROCESS.

Fri Mar 06 03:56:13 GMT 2015  Olly Betts <olly@survex.com>

	* lib/survex.pot,src/cavernlog.cc,src/cavernlog.h: Add "Save Log"
	  button to Aven's cavern log window.

Fri Mar 06 03:24:54 GMT 2015  Olly Betts <olly@survex.com>

	* lib/icons/Makefile.am,lib/icons/log.xpm,lib/survex.pot,src/: Add a
	  menu item and toolbar button to show the cavern log window if the
	  currently shown survey data was processed by aven.  Reported by
	  Hugh St Lawrence in #47, and by Dave Clucas and others previously on
	  the list.

Fri Mar 06 01:24:57 GMT 2015  Olly Betts <olly@survex.com>

	* doc/manual.sgml: Add complete list of quantities you can set SDs
	  for.  Thanks for Wookey for highlighting that the previous list was
	  incomplete.

Fri Mar 06 01:24:13 GMT 2015  Olly Betts <olly@survex.com>

	* lib/id.po,lib/pl.po: More translation updates.

Fri Mar 06 00:49:09 GMT 2015  Olly Betts <olly@survex.com>

	* src/cavernlog.cc: Require ':' after error/warning marker.

Fri Mar 06 00:42:43 GMT 2015  Olly Betts <olly@survex.com>

	* lib/el.po: Fix language code in file to be 'el'.

Fri Mar 06 00:42:21 GMT 2015  Olly Betts <olly@survex.com>

	* lib/po-to-msg.pl: Add check that language code in file matches the
	  filename.

Thu Mar 05 23:53:33 GMT 2015  Olly Betts <olly@survex.com>

	* lib/: Add translations for "error" based on existing translations.

Thu Mar 05 23:42:33 GMT 2015  Olly Betts <olly@survex.com>

	* .gitignore,doc/manual.sgml,lib/Makefile.am,src/message.c: There's no
	  need to duplicate de.msg to de_DE.msg, as the code will fall-back to
	  de from de_DE anyway.

Thu Mar 05 04:32:13 GMT 2015  Olly Betts <olly@survex.com>

	* src/gfxcore.h: Fix (C) year typo.

Thu Mar 05 04:30:56 GMT 2015  Olly Betts <olly@survex.com>

	* src/aboutdlg.cc,src/aboutdlg.h: Make the button to dismiss the
	  "About" dialog "OK" rather than "Close", which seems more logical,
	  and also allows the dialog to be closed by pressing "Escape".

Thu Mar 05 03:21:45 GMT 2015  Olly Betts <olly@survex.com>

	* src/avenprcore.h,src/printwx.cc,src/printwx.h: Don't round bearing
	  and tilt angles to integers when printing and exporting.

Thu Mar 05 02:19:25 GMT 2015  Olly Betts <olly@survex.com>

	* lib/survex.pot: Update line number references, and reorder messages
	  a bit so some which are lower priority to translate are later in the
	  file.
	* lib/: Merge .pot changes.

Thu Mar 05 01:05:24 GMT 2015  Olly Betts <olly@survex.com>

	* lib/extract-msgs.pl: Whitespace tweak.

Thu Mar 05 01:04:44 GMT 2015  Olly Betts <olly@survex.com>

	* lib/extract-msgs.pl: Preserve any header from the existing .pot
	  file.

Thu Mar 05 00:51:17 GMT 2015  Olly Betts <olly@survex.com>

	* lib/survex.pot,src/img_hosted.c: Include the filename when we run
	  out of memory while reading a file with img, which avoids the %.0s
	  hack and is more helpful for users.

Wed Mar 04 12:30:39 GMT 2015  Olly Betts <olly@survex.com>

	* src/cavernlog.cc: Highlight "error" marker in red and "warning"
	  marker in orange.

Wed Mar 04 09:47:56 GMT 2015  Olly Betts <olly@survex.com>

	* src/datain.c,src/readval.c,tests/badinc.out,tests/badinc2.out,
	  tests/badinc3.out: Include column number when a *include file isn't
	  found.

Wed Mar 04 09:22:14 GMT 2015  Olly Betts <olly@survex.com>

	* src/datain.c: Fix compile_error() and friends not to segfault if 
	  passed a negative message number when no file is open.

Wed Mar 04 08:16:44 GMT 2015  Olly Betts <olly@survex.com>

	* src/json.cc,src/json.h: Add new files for JSON export.

Tue Mar 03 12:14:22 GMT 2015  Olly Betts <olly@survex.com>

	* lib/survex.pot,src/message.c,tests/: Show 'error' in front of error
	  messages, like we show 'warning' in front of warnings.  Fixes #48,
	  reported by Wookey.

Tue Mar 03 11:05:17 GMT 2015  Olly Betts <olly@survex.com>

	* lib/survex.pot: Add new message "JSON files".

Tue Mar 03 10:03:21 GMT 2015  Olly Betts <olly@survex.com>

	* src/cavernlog.cc: Rework code to read cavern's output.  In
	  particular, we no longer mix buffered I/O with select() on the
	  file descriptor.

Mon Mar 02 11:45:41 GMT 2015  Olly Betts <olly@survex.com>

	* src/gfxcore.cc,src/guicontrol.cc,src/mainfrm.cc: More tweaks to
	  compile with a unicode build of wx2.8.

Mon Mar 02 09:24:59 GMT 2015  Olly Betts <olly@survex.com>

	* src/labelinfo.h: Fix to compile with a unicode build of wxwidgets
	  2.8.

Mon Mar 02 07:43:47 GMT 2015  Olly Betts <olly@survex.com>

	* lib/hu.po: Change '...' to ellipses.

Mon Mar 02 07:43:31 GMT 2015  Olly Betts <olly@survex.com>

	* lib/hu.po: Add missing quotes.

Mon Mar 02 07:42:38 GMT 2015  Olly Betts <olly@survex.com>

	* lib/hu.po: Use curly double quotes.

Mon Mar 02 07:40:07 GMT 2015  Olly Betts <olly@survex.com>

	* lib/hu.po: Remove erroneous quotes from message.

Mon Mar 02 07:32:48 GMT 2015  Olly Betts <olly@survex.com>

	* lib/id.po: Add missing '#~'.

Mon Mar 02 07:32:22 GMT 2015  Olly Betts <olly@survex.com>

	* lib/id.po: Resolve clashing menu shortcuts.

Mon Mar 02 07:13:01 GMT 2015  Olly Betts <olly@survex.com>

	* src/: Add JSON export.

Mon Mar 02 07:11:53 GMT 2015  Olly Betts <olly@survex.com>

	* doc/TODO.htm: Update.

Mon Mar 02 06:02:58 GMT 2015  Olly Betts <olly@survex.com>

	* lib/ru.po: Resolve clashing menu shortcuts.

Mon Mar 02 05:58:42 GMT 2015  Olly Betts <olly@survex.com>

	* lib/ru.po: Merge more translation updates from "vsuhachev".

Mon Mar 02 05:57:25 GMT 2015  Olly Betts <olly@survex.com>

	* lib/id.po: Merged translation updates from "Cave ID" - all messages
	  are now translated into Indonesian!

Sat Feb 28 12:38:09 GMT 2015  Olly Betts <olly@survex.com>

	* src/export.cc: Eliminate more static variables.

Sat Feb 28 12:05:54 GMT 2015  Olly Betts <olly@survex.com>

	* src/export.cc: Eliminate static double factor.

Sat Feb 28 11:26:52 GMT 2015  Olly Betts <olly@survex.com>

	* src/export.cc: Eliminate use of static for text_height.

Sat Feb 28 11:06:25 GMT 2015  Olly Betts <olly@survex.com>

	* src/export.cc,src/exportfilter.h: Pass bounding box as parameters to
	  header() method rather than storing them as static data.

Wed Feb 25 06:34:53 GMT 2015  Olly Betts <olly@survex.com>

	* lib/icons/Makefile.am,lib/icons/xpm2png,src/mainfrm.cc: Fix display
	  of icons for toolbar and notebook under WXMSW.

Tue Feb 24 22:10:00 GMT 2015  Olly Betts <olly@survex.com>

	* src/mainfrm.cc: Work around GetIcon() not working under OS X.

Tue Feb 24 20:24:47 GMT 2015  Olly Betts <olly@survex.com>

	* buildmacosx.sh: Note that UDCO is larger still.

Tue Feb 24 20:24:16 GMT 2015  Olly Betts <olly@survex.com>

	* buildmacosx.sh: Move the instructions about specifying the
	  architecture to the top of the file with the other instructions.

Tue Feb 24 20:23:19 GMT 2015  Olly Betts <olly@survex.com>

	* Makefile.am: Fail building the MS Windows installer if the 'doc'
	  subdirectory somehow fails to exist.

Tue Feb 24 20:22:13 GMT 2015  Olly Betts <olly@survex.com>

	* Makefile.am: Copy PNG and JPG images from their new location.
	  Remove the code to strip out PNG images with .ico versions, as
	  those are now in a separate directory to the images that are PNG
	  format cross-platform.

Tue Feb 24 19:26:48 GMT 2015  Olly Betts <olly@survex.com>

	* src/Makefile.am: Fix include path to .ico files.

Tue Feb 24 19:04:01 GMT 2015  Olly Betts <olly@survex.com>

	* NEWS,configure.ac: Update for 1.2.17.

Tue Feb 24 04:44:41 GMT 2015  Olly Betts <olly@survex.com>

	* NEWS: Update.

Tue Feb 24 04:35:58 GMT 2015  Olly Betts <olly@survex.com>

	* lib/ru.po: Copy a couple of messages which only differ in the
	  accelerator character.

Tue Feb 24 04:30:14 GMT 2015  Olly Betts <olly@survex.com>

	* lib/hu.po: Another Hungarian message translated.

Tue Feb 24 04:28:00 GMT 2015  Olly Betts <olly@survex.com>

	* lib/ru.po: Merge in many updates to the Russian translation from
	  "vsuhachev".

Sat Feb 21 04:52:26 GMT 2015  Olly Betts <olly@survex.com>

	* tests/cmd_set.pos,tests/cmd_set.svx,tests/Makefile.am: Check that
	  '*set names .' works when '.' is also the decimal point.

Sat Feb 21 04:48:45 GMT 2015  Olly Betts <olly@survex.com>

	* lib/: A few translation updates.

Mon Feb 16 00:46:53 GMT 2015  Olly Betts <olly@survex.com>

	* lib/: Merge changes from sources to .pot and .po files.

Mon Feb 16 00:46:01 GMT 2015  Olly Betts <olly@survex.com>

	* lib/extract-msgs.pl: Report file:line for issues we spot.

Mon Feb 16 00:13:55 GMT 2015  Olly Betts <olly@survex.com>

	* lib/survex.pot,src/: Add more TRANSLATOR comments.

Mon Feb 16 00:12:32 GMT 2015  Olly Betts <olly@survex.com>

	* tests/badcalibrate.out,tests/badcalibrate.svx: Add test coverage for
	  "Can't calibrate angular and length quantities together".

Sun Feb 15 23:47:35 GMT 2015  Olly Betts <olly@survex.com>

	* lib/po-to-msg.pl: Report file and line number for warnings.

Sun Feb 15 23:46:12 GMT 2015  Olly Betts <olly@survex.com>

	* doc/manual.sgml,lib/Makefile.am,lib/hu.po,src/message.c,
	  survex.iss.in: Add start of Hungarian translation from Imre Balogh.

Sun Feb 01 04:53:22 GMT 2015  Olly Betts <olly@survex.com>

	* lib/INSTALL.OSX,lib/icons/Makefile.am,lib/icons/err.svg: Add SVG
	  version of .err file icon.

Sun Feb 01 04:49:06 GMT 2015  Olly Betts <olly@survex.com>

	* lib/INSTALL.OSX,lib/icons/Makefile.am,lib/icons/pos.svg: Add SVG
	  version of .pos file icon.

Sat Jan 31 14:39:32 GMT 2015  Olly Betts <olly@survex.com>

	* src/aboutdlg.cc,src/aboutdlg.h: Put the wxIcon into the
	  wxStaticBitmap directly, rather than converting it to a wxBitmap.

Sat Jan 31 13:09:07 GMT 2015  Olly Betts <olly@survex.com>

	* lib/icons/Makefile.am,lib/icons/svx.svg: Add SVG version of .svx file
	  icon.

Sat Jan 31 13:03:12 GMT 2015  Olly Betts <olly@survex.com>

	* lib/icons/Makefile.am: Ship 3d.svg.

Sat Jan 31 12:25:06 GMT 2015  Olly Betts <olly@survex.com>

	* lib/icons/svg2iconsetzip: Fix hard-coded icon name.

Sat Jan 31 10:45:17 GMT 2015  Olly Betts <olly@survex.com>

	* buildmacosx.sh,configure.ac,debian/survex-aven.install,
	  debian/survex.install,lib/Makefile.am,lib/icons/,lib/images/,
	  src/aboutdlg.cc,src/aboutdlg.h,src/gla-gl.cc,survex.iss.in: Split
	  out the images which aren't icons into an "images" directory.

Sat Jan 31 09:28:38 GMT 2015  Olly Betts <olly@survex.com>

	* lib/icons/Makefile.am: solid-surface.png isn't currently used, so
	  don't install it.

Sat Jan 31 09:19:48 GMT 2015  Olly Betts <olly@survex.com>

	* Makefile.am,lib/icons/Makefile.am,lib/icons/aven.png,
	  lib/icons/aven.xpm,src/: Compile in the "aven" icon on all platforms,
	  not just MSW, and use this icon for the about dialog instead of
	  loading it from disk.

Sat Jan 31 03:44:48 GMT 2015  Olly Betts <olly@survex.com>

	* lib/survex-aven.desktop,lib/survex-svxedit.desktop: Add "MimeType"
	  field to desktop files.

Sat Jan 31 03:43:03 GMT 2015  Olly Betts <olly@survex.com>

	* lib/icons/3d.svg,lib/icons/Makefile.am: Add SVG version of 3d file
	  icon, and use it to generate icon for OS X.

Fri Jan 30 21:59:07 GMT 2015  Olly Betts <olly@survex.com>

	* NEWS: Update.

Fri Jan 30 21:58:05 GMT 2015  Olly Betts <olly@survex.com>

	* buildmacosx.sh: Allow specifying arch to build for on the command
	  line, and update comments documenting usage.

Fri Jan 30 21:50:48 GMT 2015  Olly Betts <olly@survex.com>

	* buildmacosx.sh: Make the directory we build wx in 'BUILD', as the
	  source tree already has a 'build' subdirectory.  Use 'BUILD' for
	  proj too for consistency.

Fri Jan 30 11:07:46 GMT 2015  Olly Betts <olly@survex.com>

	* NEWS: Update.

Fri Jan 30 10:28:38 GMT 2015  Olly Betts <olly@survex.com>

	* lib/icons/png2winicon: Clean up - use set -e, create temporary files
	  in current directory, and quote filenames.

Fri Jan 30 10:12:14 GMT 2015  Olly Betts <olly@survex.com>

	* .gitignore,lib/icons/,src/aven.rc,src/mainfrm.cc: Rather than loading
	  all the toolbar and notebook icons from PNG files on disk, compile
	  them into the aven binary.  On most platforms, as XPMs; on MSW as
	  .ico files via a generated .rc file.

Wed Jan 28 13:46:50 GMT 2015  Olly Betts <olly@survex.com>

	* configure.ac: Note in comment that libav is an alternative to ffmpeg.

Wed Jan 28 09:45:29 GMT 2015  Olly Betts <olly@survex.com>

	* lib/svxedit_Info.plist.in: Update to run svxedit_wrap.

Wed Jan 28 09:45:01 GMT 2015  Olly Betts <olly@survex.com>

	* buildmacosx.sh: Remove empty share/doc directory from OS X disk
	  image.

Wed Jan 28 09:44:21 GMT 2015  Olly Betts <olly@survex.com>

	* .gitignore,configure.ac: Actually generate lib/svxedit_Info.plist.

Wed Jan 28 07:17:56 GMT 2015  Olly Betts <olly@survex.com>

	* lib/INSTALL.OSX: Update.

Wed Jan 28 07:09:38 GMT 2015  Olly Betts <olly@survex.com>

	* lib/Makefile.am: Fix typo from 0f5d06e9.

Wed Jan 28 07:05:49 GMT 2015  Olly Betts <olly@survex.com>

	* configure.ac: Fix typo from c1a94492.

Wed Jan 28 07:00:59 GMT 2015  Olly Betts <olly@survex.com>

	* buildmacosx.sh: Remove unused files and copies of files.

Wed Jan 28 07:00:41 GMT 2015  Olly Betts <olly@survex.com>

	* lib/Makefile.am: Don't install preload_font.h.

Wed Jan 28 06:59:22 GMT 2015  Olly Betts <olly@survex.com>

	* .gitignore,buildmacosx.sh,configure.ac,src/Makefile.am,
	  src/editwrap_osx.c: Add compiled C wrapper for svxedit on OS X as
	  OS X won't run the Tcl script for some reason.

Wed Jan 28 04:19:52 GMT 2015  Olly Betts <olly@survex.com>

	* lib/icons/: Rename helper scripts to match the names used in
	  Makefile.am.

Wed Jan 28 04:05:13 GMT 2015  Olly Betts <olly@survex.com>

	* buildmacosx.sh,lib/INSTALL.OSX,lib/svxedit_Info.plist.in: Create app
	  bundle for svxedit.

Wed Jan 28 03:26:00 GMT 2015  Olly Betts <olly@survex.com>

	* lib/INSTALL.OSX,lib/Info.plist.in: Add icons for other filetypes,
	  and run actions to load "plt" and "pos" into aven.

Wed Jan 28 03:22:41 GMT 2015  Olly Betts <olly@survex.com>

	* lib/icons/Makefile.am: Whitespace fix.

Wed Jan 28 03:22:08 GMT 2015  Olly Betts <olly@survex.com>

	* buildmacosx.sh,lib/icons/Makefile.am: Generate OS X .icns files for
	  all the filetypes and svxedit.

Wed Jan 28 03:13:36 GMT 2015  Olly Betts <olly@survex.com>

	* lib/icons/Makefile.am,lib/icons/png2iconset,lib/icons/svg2iconset:
	  Factor out conversion from png and svg to iconset.zip into helper
	  scripts.

Wed Jan 28 00:36:24 GMT 2015  Olly Betts <olly@survex.com>

	* NEWS: Update.

Tue Jan 27 23:23:26 GMT 2015  Olly Betts <olly@survex.com>

	* lib/INSTALL.OSX,src/aven.cc,src/aven.h: Add handlers so that files
	  can be loaded and printed from the finder on OS X.

Tue Jan 27 23:05:48 GMT 2015  Olly Betts <olly@survex.com>

	* src/dump3d.c: Report SEPARATOR used by the file being read.

Tue Jan 27 12:26:08 GMT 2015  Olly Betts <olly@survex.com>

	* lib/INSTALL.OSX: Add svxedit issue.

Tue Jan 27 12:20:14 GMT 2015  Olly Betts <olly@survex.com>

	* buildmacosx.sh,lib/INSTALL.OSX,lib/Info.plist.in,lib/icons/Makefile.am:
	  Add icon and file associations for .svx files, and add missing <dict>
	  and </dict> tags so the .3d association works better.

Tue Jan 27 09:57:41 GMT 2015  Olly Betts <olly@survex.com>

	* lib/icons/Makefile.am: Remove .iconset.zip files on maintainer-clean.

Mon Jan 26 13:35:46 GMT 2015  Olly Betts <olly@survex.com>

	* lib/icons/Makefile.am: Convert SVG to PNG with inkscape, as "convert"
	  loses transparency information.

Mon Jan 26 13:08:21 GMT 2015  Olly Betts <olly@survex.com>

	* lib/icons/aven.svg: Fix visual glitch in SVG icon for aven.  Noted
	  by David A. Riggs.

Mon Jan 26 13:05:59 GMT 2015  Olly Betts <olly@survex.com>

	* buildmacosx.sh: Use bzip2 to compress the disk image, which gives a
	  smaller download.  This means OS X 10.4 is required, but we probably
	  already need 10.5 because that's the minimum version which the
	  wxWidgets build supports by default.

Mon Jan 26 13:03:54 GMT 2015  Olly Betts <olly@survex.com>

	* buildmacosx.sh: Fix location of Aven.icns inside Aven.app.
	* buildmacosx.sh,lib/Info.plist.in,lib/icons/Makefile.am: Attempt to
	  add filetype info for 3d files.

Mon Jan 26 10:50:00 GMT 2015  Olly Betts <olly@survex.com>

	* lib/INSTALL.OSX,src/mainfrm.cc: On OS X, hide the status bar and tool
	  bar in full screen mode, as wx doesn't currently do this for us.

Mon Jan 26 08:44:17 GMT 2015  Olly Betts <olly@survex.com>

	* buildmacosx.sh: Use mkdir -p.

Mon Jan 26 08:33:14 GMT 2015  Olly Betts <olly@survex.com>

	* src/mainfrm.cc: Reduce flicker when mouse is moved to the top of the
	  screen in full screen mode and the menu bar reappears.

Mon Jan 26 08:31:17 GMT 2015  Olly Betts <olly@survex.com>

	* buildmacosx.sh,lib/INSTALL.OSX,lib/icons/Makefile.am: Add a custom
	  icon for the Mac OS X application bundle.

Mon Jan 26 04:55:39 GMT 2015  Olly Betts <olly@survex.com>

	* src/export.cc,src/export.h,src/printwx.cc: For export formats where
	  scaling is supporting, aven now actually uses the scale specified in
	  the export dialog (previously it ignored this and used 1:500).

Sat Jan 24 22:32:31 GMT 2015  Olly Betts <olly@survex.com>

	* buildmacosx.sh: Disable use of liblzma when building wxWidgets for
	  OS X, as this prevents the build from working on OS X 10.6.8.

Sat Jan 24 13:01:22 GMT 2015  Olly Betts <olly@survex.com>

	* src/gfxcore.cc,src/gfxcore.h: Factor out MAX_FRAMERATE.

Sat Jan 24 11:28:58 GMT 2015  Olly Betts <olly@survex.com>

	* src/gfxcore.cc: Fix presentation playback to work after the animation
	  changes.

Sat Jan 24 07:32:29 GMT 2015  Olly Betts <olly@survex.com>

	* src/: Merge OnStepOnceAnticlockwiseUpdate() and
	  OnStepOnceClockwiseUpdate().

Sat Jan 24 06:50:19 GMT 2015  Olly Betts <olly@survex.com>

	* src/guicontrol.cc: Disable stepping the rotation angle if animating,
	  not just if rotating.

Sat Jan 24 06:22:04 GMT 2015  Olly Betts <olly@survex.com>

	* src/gfxcore.cc,src/gfxcore.h: Reimplement animation so that it's
	  based on angular change per unit of elapsed time, rather than
	  averaging the time take for the last two scene redraws.  This gives
	  a more even animation in the face of variable load and scene redraw
	  time, and should be more consistent between platforms.
	* src/gfxcore.cc: Switch to a point of the compass during auto-rotation
	  now jumps straight there rather than the two animations fighting.
	* src/gfxcore.cc: Reduce the maximum auto-rotation speed, as the
	  previous limit was uselessly fast.

Sat Jan 24 04:49:33 GMT 2015  Olly Betts <olly@survex.com>

	* src/gfxcore.cc: Wrap the rotation angle to the range [0,360)
	  properly, rather than only if it's off by at most 360 either way.

Fri Jan 23 10:54:40 GMT 2015  Olly Betts <olly@survex.com>

	* buildmacosx.sh: Download wx from SF via redirecting link.  Thanks to
	  David A. Riggs.

Fri Jan 23 05:21:13 GMT 2015  Olly Betts <olly@survex.com>

	* src/gfxcore.cc: Fix comment typo.

Wed Jan 21 11:25:12 GMT 2015  Olly Betts <olly@survex.com>

	* buildmacosx.sh: The pathname of the mount point for the disk image
	  may a space.

Wed Jan 21 10:48:00 GMT 2015  Olly Betts <olly@survex.com>

	* lib/INSTALL.OSX,src/gfxcore.cc: On OS X, make custom cursors black
	  with a white outline to match the standard OS X cursor.

Wed Jan 21 10:18:50 GMT 2015  Olly Betts <olly@survex.com>

	* lib/INSTALL.OSX: Update status.

Wed Jan 21 10:15:02 GMT 2015  Olly Betts <olly@survex.com>

	* buildmacosx.sh: Build a static version of PROJ and use it.  Get wx
	  tarball from a sourceforge mirror as the wx ftp site has a
	  permissions problem.  Build wx with --disable-webview to avoid a
	  compilation failure.  Use wx-config --cc and --cxx to get the
	  compilers to use for building everything else, as wx adds options
	  to them which otherwise cause linking errors.

Wed Jan 21 09:41:10 GMT 2015  Olly Betts <olly@survex.com>

	* src/aboutdlg.cc: Fix "Close" button in about dialog under OS X.

Wed Jan 21 04:16:12 GMT 2015  Olly Betts <olly@survex.com>

	* configure.ac,debian/copyright,doc/manual.sgml: Update copyright
	  years.

Wed Jan 21 04:13:45 GMT 2015  Olly Betts <olly@survex.com>

	* NEWS: Update.

Tue Jan 20 20:36:02 GMT 2015  Olly Betts <olly@survex.com>

	* lib/INSTALL.OSX: Update for current status.

Tue Jan 20 20:33:52 GMT 2015  Olly Betts <olly@survex.com>

	* lib/INSTALL.OSX,src/mainfrm.cc: Make "About" menu item appear on OS
	  X.

Tue Jan 20 20:29:27 GMT 2015  Olly Betts <olly@survex.com>

	* src/mainfrm.cc: Fix short-cut for Full Screen mode on OS X.

Tue Jan 20 20:26:10 GMT 2015  Olly Betts <olly@survex.com>

	* src/datain.c,src/netbits.c,src/netbits.h,tests/: If the same leg is
	  repeated consecutively, average the readings and treat as a single
	  leg.

Sun Nov 23 18:49:52 GMT 2014  Olly Betts <olly@survex.com>

	* src/message.c: Avoid needless dropping of const qualifier via
	  strchr().

Sat Nov 15 10:43:36 GMT 2014  Olly Betts <olly@survex.com>

	* buildmacosx.sh: Default to building for x86_64, since modern Macs are
	  all 64 bit.

Tue Nov 11 08:50:18 GMT 2014  Olly Betts <olly@survex.com>

	* doc/manual.sgml: Remove $Id and $Date markers, as they don't get
	  expanded now we're using git.

Tue Nov 11 08:36:09 GMT 2014  Olly Betts <olly@survex.com>

	* tests/: Move the annotations for each test case out of cavern.tst and
	  into a comment in the first line of the .svx file which is the input
	  for the test.

Tue Nov 11 04:07:04 GMT 2014  Olly Betts <olly@survex.com>

	* tests/.gitignore: Ignore files produced by automake test machinery.

Tue Nov 11 04:05:16 GMT 2014  Olly Betts <olly@survex.com>

	* tests/back2.pos,tests/back2.svx,tests/cavern.tst: Extend test of fore
	  and back sights to test calibration of the back compass.

Fri Oct 17 00:55:04 GMT 2014  Olly Betts <olly@survex.com>

	* NEWS: Bump release date.

Fri Oct 17 00:53:25 GMT 2014  Olly Betts <olly@survex.com>

	* src/gettexttomsg.pl: Fix typo in generated code to suppress compiler
	  warnings, added since last release.

Fri Oct 17 00:38:21 GMT 2014  Olly Betts <olly@survex.com>

	* src/Makefile.am: Ship kml.h.

Fri Oct 17 00:25:53 GMT 2014  Olly Betts <olly@survex.com>

	* buildmacosx.sh: Update comment to note that wx3 is Unicode only.

Fri Oct 17 00:25:35 GMT 2014  Olly Betts <olly@survex.com>

	* buildmacosx.sh: Update to use wxWidgets 3.0.2.

Thu Oct 16 23:59:43 GMT 2014  Olly Betts <olly@survex.com>

	* lib/en_US.po: Translate new message.

Thu Oct 16 23:57:46 GMT 2014  Olly Betts <olly@survex.com>

	* lib/: Merge changes from survex.pot to *.po.

Thu Oct 16 23:56:51 GMT 2014  Olly Betts <olly@survex.com>

	* lib/survex.pot: Update source file references.

Thu Oct 16 23:48:31 GMT 2014  Olly Betts <olly@survex.com>

	* src/labelinfo.h,src/mainfrm.cc: Factor out code to show station name
	  or "anonymous station".

Thu Oct 16 23:47:50 GMT 2014  Olly Betts <olly@survex.com>

	* lib/survex.pot: Fix TRANSLATORS comment punctuation to match source
	  code.

Thu Oct 16 23:47:08 GMT 2014  Olly Betts <olly@survex.com>

	* src/extend.c,src/mainfrm.cc,src/sorterr.c: Fix message references
	  which I failed to update.

Thu Oct 16 11:15:24 GMT 2014  Olly Betts <olly@survex.com>

	* src/commands.c: Tweak code so one side of comparison is a constant.

Thu Oct 16 11:02:17 GMT 2014  Olly Betts <olly@survex.com>

	* NEWS,configure.ac: Update for 1.2.16.

Thu Oct 16 10:03:48 GMT 2014  Olly Betts <olly@survex.com>

	* lib/survex.pot,src/: Make measuring line work from anonymous
	  stations properly.  (Fixes #44)

Wed Oct 15 10:21:42 GMT 2014  Olly Betts <olly@survex.com>

	* src/mainfrm.h: Drop unnecessary forward declaration of class
	  LabelPlotCmp.

Fri Sep 19 11:05:26 GMT 2014  Olly Betts <olly@survex.com>

	* src/aboutdlg.cc,src/mainfrm.cc,src/printwx.cc: Calling Fit() on a
	  sizer is redundant where we also call SetSizeHints() on it.

Sat Sep 13 20:59:34 GMT 2014  Olly Betts <olly@survex.com>

	* lib/ca.po,lib/es.po: Apply translation updates from Adolfo Jayme via
	  launchpad.

Tue Sep 09 16:26:07 GMT 2014  Olly Betts <olly@survex.com>

	* NEWS: Update.

Tue Sep 09 16:13:00 GMT 2014  Olly Betts <olly@survex.com>

	* src/datain.c: Tiny code simplification.

Sun Sep 07 14:16:40 GMT 2014  Olly Betts <olly@survex.com>

	* survex.iss.in: More 'ru' to the list of official innosetup
	  translations.

Sat Sep 06 12:43:29 GMT 2014  Olly Betts <olly@survex.com>

	* survex.iss.in: Include Greek and Polish translations for the
	  installer.

Sun Aug 31 03:22:15 GMT 2014  Olly Betts <olly@survex.com>

	* doc/manual.sgml: Update list of codes for supported translations in
	  the manual.

Sun Aug 31 02:12:50 GMT 2014  Olly Betts <olly@survex.com>

	* src/message.c: Add handling for automatically selecting Greek and
	  Polish translations on Microsoft Windows.

Tue Aug 26 22:27:03 GMT 2014  Olly Betts <olly@survex.com>

	* lib/Makefile.am,lib/el.po,lib/pl.po: Add the start of translations
	  to Greek and Polish.

Sun Aug 24 12:49:31 GMT 2014  Olly Betts <olly@survex.com>

	* NEWS: Update from ChangeLog.

Sun Aug 24 06:13:10 GMT 2014  Olly Betts <olly@survex.com>

	* tests/: Add expected outputs for tests of nosurvey data style.

Sun Aug 24 06:06:54 GMT 2014  Olly Betts <olly@survex.com>

	* tests/: Add expected outputs for tests of cartesian data style.

Sat Aug 24 05:52:06 GMT 2014  Olly Betts <olly@survex.com>

	* lib/ru.po: More updates.

Thu Aug 21 02:22:41 GMT 2014  Olly Betts <olly@survex.com>

	* lib/ru.po: More updates.

Thu Aug 21 01:49:09 GMT 2014  Olly Betts <olly@survex.com>

	* lib/,src/cavern.c,tests/: Eliminate the "Done." message which cavern
	  outputs near the end - it doesn't really serve a useful purpose.

Thu Aug 21 01:28:43 GMT 2014  Olly Betts <olly@survex.com>

	* lib/merge-po: Add dropped messages with translations to
	  deadmessages.txt.

Thu Aug 21 01:08:50 GMT 2014  Olly Betts <olly@survex.com>

	* lib/: More translation updates.

Wed Aug 20 07:31:40 GMT 2014  Olly Betts <olly@survex.com>

	* lib/: More translation updates.

Wed Aug 20 05:28:20 GMT 2014  Olly Betts <olly@survex.com>

	* lib/,src/datain.c,src/img_hosted.c,src/printwx.cc,tests/badinc.out,
	  tests/badinc2.out,tests/badinc3.out: Merge two very similar
	  messages.

Wed Aug 20 01:50:07 GMT 2014  Olly Betts <olly@survex.com>

	* lib/ru.po,lib/zh_CN.po: Fill in some translations from the wxWidgets
	  po files.

Wed Aug 20 01:49:06 GMT 2014  Olly Betts <olly@survex.com>

	* lib/id.po: Adapt an existing translation in obvious way.

Wed Aug 20 00:02:59 GMT 2014  Olly Betts <olly@survex.com>

	* lib/: Merge changes from template.

Tue Aug 19 23:51:15 GMT 2014  Olly Betts <olly@survex.com>

	* lib/survex.pot: Update source references.

Tue Aug 19 12:21:49 GMT 2014  Olly Betts <olly@survex.com>

	* lib/survex.pot,src/: Add KML export (stations only currently).

Tue Aug 19 11:24:46 GMT 2014  Olly Betts <olly@survex.com>

	* src/export.cc: Take a const ref to the wxString for the label name
	  when exporting, to ensure the object is still valid when we call
	  mb_str() on it.

Tue Aug 19 08:26:11 GMT 2014  Olly Betts <olly@survex.com>

	* src/commands.c: Fix compiler warnings caused by previous change.

Sat Aug 17 01:36:50 GMT 2014  Olly Betts <olly@survex.com>

	* doc/manual.sgml,src/commands.c,tests/cs.svx,tests/csbad.out: Add
	  support for "*cs JTSK" and "*cs JTSK03".

Thu Aug 14 23:39:27 GMT 2014  Olly Betts <olly@survex.com>

	* src/guicontrol.cc: Fix to build against wxWidgets built with
	  assertions disabled.  Reported by Martin Sluka.

Thu Aug 14 23:29:20 GMT 2014  Olly Betts <olly@survex.com>

	* src/moviemaker.cc,src/moviemaker.h: Fix warnings from clang.
	  Reported by Martin Sluka.

Thu Aug 14 23:28:01 GMT 2014  Olly Betts <olly@survex.com>

	* src/: Rename methods which hide virtual methods in the parent class.
	  Reported by Martin Sluka.

Thu Aug 14 23:27:08 GMT 2014  Olly Betts <olly@survex.com>

	* src/gfxcore.cc: Remove constants which are no longer used.  Reported
	  by Martin Sluka.

Thu Aug 14 22:30:41 GMT 2014  Olly Betts <olly@survex.com>

	* src/getopt.h,src/gettexttomsg.pl: Fix warnings when compiling with
	  clang.  Reported by Martin Sluka.

Thu Aug 14 22:29:25 GMT 2014  Olly Betts <olly@survex.com>

	* src/log.cc,src/log.h: Fix log window under wxWidgets >= 2.9 to
	  include the system information before the first log message like it
	  does under wxWidgets 2.8.

Thu Aug 14 11:48:09 GMT 2014  Olly Betts <olly@survex.com>

	* doc/TODO.htm: Update for *cs being added.

Thu Aug 14 11:03:58 GMT 2014  Olly Betts <olly@survex.com>

	* NEWS,configure.ac: Update for 1.2.15.

Thu Aug 14 10:34:58 GMT 2014  Olly Betts <olly@survex.com>

	* doc/HACKING.htm,make_release: Update for building with latest Debian
	  packaged mingw cross compiler.

Mon Aug 04 10:34:19 GMT 2014  Olly Betts <olly@survex.com>

	* src/img.h: Improve documentation for img_ERROR_INFO.

Sun Aug 03 09:54:39 GMT 2014  Olly Betts <olly@survex.com>

	* survex.spec.in: Add run-time requirement on proj and proj-epsg for
	  survex package and on tk for svxedit package.

Fri Aug 01 19:42:00 GMT 2014  Olly Betts <olly@survex.com>

	* doc/manual.sgml,src/commands.c,tests/: Add support for "*cs
	  osgb:<two letter code>".

Sun Jul 27 14:25:17 GMT 2014  Olly Betts <olly@survex.com>

	* tests/cs.svx: Test that IJTSK and IJTSK03 are accepted as output
	  coordinate systems.

Sun Jul 27 12:17:47 GMT 2014  Olly Betts <olly@survex.com>

	* doc/manual.sgml,src/commands.c,tests/: Add support for "*cs ijtsk"
	  and "*cs ijtsk03".

Sun Jul 27 10:11:13 GMT 2014  Olly Betts <olly@survex.com>

	* doc/manual.sgml,src/commands.c,tests/cs.svx: Add support for
	  "*cs eur79z30" and *cs with epsg and esri codes.

Sun Jul 27 09:47:55 GMT 2014  Olly Betts <olly@survex.com>

	* src/commands.c: Make sure all proj strings have "+no_defs".

Sun Jul 27 09:46:53 GMT 2014  Olly Betts <olly@survex.com>

	* src/commands.c: Fix incorrect codes in proj string for S-MERC (all
	  are set to zero, so this change has no actual effect).

Sun Jul 27 07:09:41 GMT 2014  Olly Betts <olly@survex.com>

	* doc/manual.sgml,src/commands.c,tests/cs.svx: Add support for for
	  "*cs s-merc".

Sun Jul 27 06:27:50 GMT 2014  Olly Betts <olly@survex.com>

	* doc/manual.sgml,src/commands.c,tests/cs.svx,tests/csbad.out: Add
	  support for "*cs long-lat".

Sat Jul 26 07:06:50 GMT 2014  Olly Betts <olly@survex.com>

	* src/mainfrm.cc: Call EnableFullScreenView() if built with wx >= 3.1.0
	  - this improves the full screen mode experience on OS X 10.7 and
	  later.

Sat Jul 26 02:01:23 GMT 2014  Olly Betts <olly@survex.com>

	* src/: When in full screen mode, moving the mouse to the top of the
	  screen now makes the menu bar appear (and moving the mouse down again
	  makes it disappear).  This provides a non-shortcut way out of full
	  screen mode, as well as making it easier to perform other operations
	  while in full screen mode.

Fri Jul 25 08:47:01 GMT 2014  Olly Betts <olly@survex.com>

	* src/aven.cc: Don't persist full screen mode between runs - it's not a
	  standard behaviour of desktop programs, and it's too easy to go into
	  full screen mode from the menu and then not be able to get out again
	  because you don't know the required key shortcut.

Tue Jul 22 04:57:13 GMT 2014  Olly Betts <olly@survex.com>

	* tests/Makefile.am: Ship some missing .out files and compare.tst.

Tue Jul 22 04:52:44 GMT 2014  Olly Betts <olly@survex.com>

	* tests/inferplumbs.svx: Remove unused file containing the start of a
	  testcase for "*infer plumbs" - this isn't useful as we already test
	  this in cmd_infer.svx.

Tue Jul 22 04:50:23 GMT 2014  Olly Betts <olly@survex.com>

	* tests/: cavern.tst testcase back2 is now actually used.  Fix a bug
	  in this testcase, and extend it to cover a variant of the situation
	  reported as a bug in therion by Bill Gee to the therion list.

Fri Jul 11 21:58:11 GMT 2014  Olly Betts <olly@survex.com>

	* doc/manual.sgml: Note what coordinate systems *cs currently actually
	  supports.

Sun Jul 06 12:14:04 GMT 2014  Olly Betts <olly@survex.com>

	* doc/manual.sgml: Add missing "custom" to "*cs out" example.

Sat Jul 05 12:27:17 GMT 2014  Olly Betts <olly@survex.com>

	* src/glbitmapfont.cc: Fix to build on mingw.

Sat Jul 05 12:00:55 GMT 2014  Olly Betts <olly@survex.com>

	* configure.ac,src/Makefile.am: Error out in configure is PROJ isn't
	  found, and sort out how we pass -lproj to the linker properly.

Sat Jul 05 11:21:39 GMT 2014  Olly Betts <olly@survex.com>

	* src/commands.c: Fix '//' comment in C source.

Sat Jul 05 11:20:34 GMT 2014  Olly Betts <olly@survex.com>

	* make_release: Report correct line number for a // comment in a C
	  source file.

Sat Jul 05 02:11:07 GMT 2014  Olly Betts <olly@survex.com>

	* NEWS,configure.ac: Update for 1.2.14.

Fri Jul 04 12:57:12 GMT 2014  Olly Betts <olly@survex.com>

	* lib/: Merge changes from pot to po files.

Fri Jul 04 12:52:58 GMT 2014  Olly Betts <olly@survex.com>

	* lib/survex.pot,src/commands.c,tests/csbad.out: If proj fails to
	  handle a custom cs description, report pj_strerrno().

Fri Jul 04 12:41:40 GMT 2014  Olly Betts <olly@survex.com>

	* lib/,src/commands.c: Fix typo in two recently added messages; drop
	  message which is no longer used.

Fri Jul 04 12:33:33 GMT 2014  Olly Betts <olly@survex.com>

	* lib/survex.pot,src/commands.c,tests/cavern.tst,tests/cs.svx,
	  tests/csbad.out: Issue an error is a station has already been fixed
	  when *cs is first used.

Fri Jul 04 11:18:33 GMT 2014  Olly Betts <olly@survex.com>

	* lib/: Update translations.

Fri Jul 04 10:53:34 GMT 2014  Olly Betts <olly@survex.com>

	* tests/cavern.tst: Use "cmp -s" in another case to quietly compare
	  files.

Fri Jul 04 10:47:44 GMT 2014  Olly Betts <olly@survex.com>

	* tests/cavern.tst: Shows a diff of expected to actual output, not
	  actual to expected, as the latter is confusing (at least to me).

Fri Jul 04 10:37:27 GMT 2014  Olly Betts <olly@survex.com>

	* lib/survex.pot,src/commands.c,tests/cavern.tst,
	  tests/omitfixaroundsolve.out,tests/omitfixaroundsolve.svx: In the
	  case of more than one *fix without coordinates, still actually fix
	  the second and subsequent ones, to avoid then triggering bogus errors
	  about unconnected surveys.

Thu Jul 03 12:57:00 GMT 2014  Olly Betts <olly@survex.com>

	* lib/survex.pot,src/commands.c,tests/cavern.tst,
	  tests/omitfixaroundsolve.out,tests/omitfixaroundsolve.svx: If there's
	  more than one *fix command with coordinates, the station name of the
	  previous one, plus the file and line number where it was.

Thu Jul 03 12:12:05 GMT 2014  Olly Betts <olly@survex.com>

	* src/: Add compile_error() and compiler_warning() variants which
	  take a filename and line number, or a prefix to get the filename
	  and line number from.

Thu Jul 03 06:39:45 GMT 2014  Olly Betts <olly@survex.com>

	* lib/en_US.po: Update for new messages.

Thu Jul 03 06:33:12 GMT 2014  Olly Betts <olly@survex.com>

	* lib/: Merge changes for survex.pot.

Thu Jul 03 06:31:49 GMT 2014  Olly Betts <olly@survex.com>

	* lib/extract-msgs.pl: Handle TRANSLATORS comments spread over
	  multiple '//' comments.

Thu Jul 03 06:30:35 GMT 2014  Olly Betts <olly@survex.com>

	* lib/survex.pot: Update from sources.

Wed Jul 02 23:21:30 GMT 2014  Olly Betts <olly@survex.com>

	* src/findentrances.cc: Add TRANSLATORS comment.

Wed Jul 02 13:20:16 GMT 2014  Olly Betts <olly@survex.com>

	* NEWS: Update.

Wed Jul 02 13:14:17 GMT 2014  Olly Betts <olly@survex.com>

	* lib/survex.pot,src/: If the 3d file specifies a coordinate system,
	  then use it for exporting to formats which need to know (currently
	  GPX).  If the input file doesn't specify, allow the user to enter
	  one in the export dialog.

Wed Jul 02 12:03:19 GMT 2014  Olly Betts <olly@survex.com>

	* src/netskel.c: If there's an output coordinate system set, write it
	  to the 3d file.

Wed Jul 02 09:32:39 GMT 2014  Olly Betts <olly@survex.com>

	* src/dump3d.c: If there's a coordinate system specified, report it.

Wed Jul 02 09:31:48 GMT 2014  Olly Betts <olly@survex.com>

	* doc/3dformat.htm: Update format doc to mention coordinate system.

Wed Jul 02 08:59:07 GMT 2014  Olly Betts <olly@survex.com>

	* src/img.c,src/img.h: Add ability to store a proj string describing
	  the coordinate system in use in 3d v8 files.

Tue Jul 01 12:15:37 GMT 2014  Olly Betts <olly@survex.com>

	* NEWS: Update.

Tue Jul 01 12:14:56 GMT 2014  Olly Betts <olly@survex.com>

	* doc/manual.sgml: Expand documentation for *CS.

Tue Jul 01 09:54:52 GMT 2014  Olly Betts <olly@survex.com>

	* src/commands.c,tests/: Fix handling of *fix with no coordinates
	  followed by *solve and then another *fix with no coorindates not to
	  access freed memory.

Tue Jul 01 07:47:55 GMT 2014  Olly Betts <olly@survex.com>

	* .gitignore: Update.

Sun Jun 29 13:28:19 GMT 2014  Olly Betts <olly@survex.com>

	* src/netskel.c: If a coordinate system has been specified, don't
	  invent a fixed point if none exists like we do if the coordinate
	  system isn't specified.

Sun Jun 29 10:29:58 GMT 2014  Olly Betts <olly@survex.com>

	* lib/survex.pot,src/commands.c: Reject *fix without coordinates when a
	  coordinate system has been specified - defaulting to (0,0,0) in this
	  case doesn't make sense.

Thu Jun 26 14:57:00 GMT 2014  Olly Betts <olly@survex.com>

	* lib/survex.pot,src/,tests/: More work on *cs.

Tue Jun 24 12:01:32 GMT 2014  Olly Betts <olly@survex.com>

	* src/commands.c: Check !p->next before comparing with p->next->meta.

Tue Jun 24 11:58:06 GMT 2014  Olly Betts <olly@survex.com>

	* src/commands.c: Fix comment typo.

Sun Jun 22 07:37:26 GMT 2014  Olly Betts <olly@survex.com>

	* src/commands.c: Fix warning in recently added code for "*cs".

Sun Jun 22 07:36:50 GMT 2014  Olly Betts <olly@survex.com>

	* NEWS,src/export.cc: Fix exporting of passage tubes in elevations and
	  extended elevations - previously up and down were getting drawn
	  across the page!

Sun Jun 15 11:39:15 GMT 2014  Olly Betts <olly@survex.com>

	* NEWS: Update.

Sun Jun 15 11:33:25 GMT 2014  Olly Betts <olly@survex.com>

	* doc/manual.sgml: Update stats about CUCC Austria data.

Sun Jun 15 11:26:43 GMT 2014  Olly Betts <olly@survex.com>

	* src/commands.c: Fix comment typo.

Sun Jun 15 08:52:37 GMT 2014  Olly Betts <olly@survex.com>

	* src/: Add ability to zoom to a rubber-banded box - use Shift+Left
	  mouse button drag.  Releasing the left mouse button after the drag is
	  started changes the box to be centred on the start point.

Sat Jun 14 11:57:39 GMT 2014  Olly Betts <olly@survex.com>

	* doc/manual.sgml,lib/survex.pot,src/commands.c: Add a *cs command to
	  set the coordinate system.  Currently only the parsing part is
	  implemented.

Thu Jun 12 14:23:00 GMT 2014  Olly Betts <olly@survex.com>

	* src/gla-gl.cc: Support alpha in SetColour(gla_colour), since we use
	  that in some cases.

Mon Jun 09 07:48:34 GMT 2014  Olly Betts <olly@survex.com>

	* src/mainfrm.cc: Turn off live-update while dragging the sash - it
	  just looks clunky except on an ultra-fast machine.  Also, turn off
	  the 3D border for the splitter window (though it wasn't being shown
	  as such under wxGTK anyway).

Sun Jun 08 14:44:17 GMT 2014  Olly Betts <olly@survex.com>

	* NEWS: Update.

Sun Jun 08 12:13:43 GMT 2014  Olly Betts <olly@survex.com>

	* src/gfxcore.cc: Fix the conditions on which "Cancel measuring line"
	  is enabled - previously it was hard to actually cancel it via the
	  menu.  Reported by Hugh St Lawrence.

Sat Jun 07 07:03:59 GMT 2014  Olly Betts <olly@survex.com>

	* src/datain.c: Move comments next to the code that they relate to.

Sat Jun 07 07:03:09 GMT 2014  Olly Betts <olly@survex.com>

	* src/datain.c: Set pcs->infer for Compass DAT in terms of INFER_*
	  constants rather than to the literal 7.

Sat Jun 07 06:55:55 GMT 2014  Olly Betts <olly@survex.com>

	* src/datain.c: Remove superfluous call to skipblanks() before
	  get_token().

Sat Jun 07 06:35:21 GMT 2014  Olly Betts <olly@survex.com>

	* src/commands.c,src/commands.h: Refactor to provide new
	  get_token_no_blanks() function which is like get_token() but doesn't
	  skip blanks first.

Wed Jun 04 08:49:30 GMT 2014  Olly Betts <olly@survex.com>

	* src/gfxcore.cc,src/gla-gl.cc,src/gla.h: Use col_WHITE to specify we
	  want to draw something in white.

Wed Jun 04 07:14:41 GMT 2014  Olly Betts <olly@survex.com>

	* src/datain.c,tests/: Add support for 'L' flag (exclude from length)
	  in Compass .dat files - this handled in the same way as the
	  "DUPLICATE" flag in .svx files.

Mon Jun 02 12:21:43 GMT 2014  Olly Betts <olly@survex.com>

	* doc/cad3d.sgml: Add link to "Related Tools" section of the Survex web
	  site in the section about SpeloGen.

Mon Jun 02 12:18:30 GMT 2014  Olly Betts <olly@survex.com>

	* NEWS: Update.

Mon Jun 02 12:08:39 GMT 2014  Olly Betts <olly@survex.com>

	* Makefile.am: (Microsoft Windows version) Include dump3d in the
	  installer.

Sun Jun 01 11:45:36 GMT 2014  Olly Betts <olly@survex.com>

	* src/mainfrm.h: Remove unused default parameter value from
	  MainFrm::LoadData().

Sun Jun 01 11:35:56 GMT 2014  Olly Betts <olly@survex.com>

	* src/mainfrm.cc,src/mainfrm.h: Pass wxString by const reference in a
	  couple of places where we weren't.

Sat May 31 00:47:36 GMT 2014  Olly Betts <olly@survex.com>

	* src/gfxcore.cc: Re-wrap two comments.

Mon May 26 11:07:58 GMT 2014  Olly Betts <olly@survex.com>

	* lib/: Translate "Plan" in languages where we already have a suitable
	  similar translation.

Sun May 25 10:42:53 GMT 2014  Olly Betts <olly@survex.com>

	* lib/survex.pot,src/gfxcore.cc: Show special for views from
	  above and below in Aven, instead of always saying "Elevation".

Wed May 21 07:19:52 GMT 2014  Olly Betts <olly@survex.com>

	* lib/de.po,lib/de_CH.po: Abbreviate "Blickrichtung" so it doesn't
	  overfill the space available in the aven UI.

Tue May 20 02:03:08 GMT 2014  Olly Betts <olly@survex.com>

	* NEWS: Update.

Tue May 20 01:59:27 GMT 2014  Olly Betts <olly@survex.com>

	* NEWS: Correct "SURVEX_LANG" to "SURVEXLANG" in old NEWS entry.

Tue May 20 01:55:39 GMT 2014  Olly Betts <olly@survex.com>

	* tests/smoke.tst: Add regression test for aven segfault when used on
	  a system set to use a language which aven doesn't support (this bug
	  was fixed some time ago, but we want to ensure it doesn't reappear).

Tue May 20 01:44:59 GMT 2014  Olly Betts <olly@survex.com>

	* tests/smoke.tst: Check that --help and --version don't produce
	  output on stderr.

Mon May 19 21:43:08 GMT 2014  Olly Betts <olly@survex.com>

	* src/printwx.cc: Fix cancel to work on print/export dialog, broken
	  by changes in 1.2.13.  (Reported by Brian Clipstone)

Sun May 18 12:03:05 GMT 2014  Olly Betts <olly@survex.com>

	* configure.ac,src/glbitmapfont.cc,src/glbitmapfont.h: For platforms
	  which support mmap(), just mmap the extra font data, which on Linux
	  seems to typically be about twice as quick as loading it via fread()
	  or read().  For other platforms, use read() instead of fread(), since
	  that seems fractionally faster, and means more code in common with
	  the mmap case.

Sun May 18 07:01:23 GMT 2014  Olly Betts <olly@survex.com>

	* src/glbitmapfont.cc: Fix signed/unsigned comparison warning.

Sat May 17 06:36:29 GMT 2014  Olly Betts <olly@survex.com>

	* src/glbitmapfont.cc,src/glbitmapfont.h: Use an array of offsets to
	  each character, rather than a array of pointers, since offsets can
	  be 32 bit which saves 256KB on 64 bit platforms.

Thu May 15 06:20:07 GMT 2014  Olly Betts <olly@survex.com>

	* src/gfxcore.cc: Fix wx assertion failures when showing hit test
	  debug view on platforms such as 64-bit Linux.

Thu May 15 04:45:23 GMT 2014  Olly Betts <olly@survex.com>

	* tests/cavern.tst: Fix cavern.tst to run under valgrind during "make
	  distcheck".

Thu May 15 03:00:27 GMT 2014  Olly Betts <olly@survex.com>

	* tests/equatenosuchstn.out,tests/surveytypo.out: Update expected
	  output to match recent changes to messages.

Thu May 15 02:28:19 GMT 2014  Olly Betts <olly@survex.com>

	* NEWS,configure.ac: Update for 1.2.13.

Wed May 14 04:02:58 GMT 2014  Olly Betts <olly@survex.com>

	* lib/Bulgarian.isl,lib/Makefile.am,survex.iss.in: (Microsoft Windows
	  version) Include Bulgarian and Russian translations in the
	  installer.

Tue May 13 12:21:32 GMT 2014  Olly Betts <olly@survex.com>

	* NEWS: Update from ChangeLog.

Tue May 13 12:13:21 GMT 2014  Olly Betts <olly@survex.com>

	* src/: Fix aven --print to wait for printing to happen before exiting
	  (previously it would exit right after opening the print dialog, so
	  you couldn't actually print anything out).

Tue May 13 11:44:09 GMT 2014  Olly Betts <olly@survex.com>

	* src/printwx.h: Fix test for libgnomeprint, and add test for GtkPrint.

Mon May 12 13:13:55 GMT 2014  Olly Betts <olly@survex.com>

	* src/gfxcore.cc,src/gfxcore.h,src/guicontrol.cc: Add "fat finger
	  mode", toggled by pressing F2, to allow investigating if increasing
	  the minimum pointer-station threshold helps Hugh's problems with
	  using aven on a touch screen device.

Mon May 12 06:38:01 GMT 2014  Olly Betts <olly@survex.com>

	* NEWS: Update from ChangeLog.

Sun May 11 08:24:23 GMT 2014  Olly Betts <olly@survex.com>

	* src/gfxcore.cc: Use wxString::Format() instead of sprintf().

Sun May 11 06:03:01 GMT 2014  Olly Betts <olly@survex.com>

	* src/gfxcore.cc: Create the empty hit-test grid datastructure lazily,
	  to minimising start-up time.

Sun May 11 06:01:24 GMT 2014  Olly Betts <olly@survex.com>

	* src/guicontrol.cc: Pressing F4 now allows the user to toggle
	  wxWidgets assertion messages off and back on.

Sat May 10 23:22:37 GMT 2014  Olly Betts <olly@survex.com>

	* make_release: Compile C files in mingw build with optimisation on.

Sat May 10 03:29:48 GMT 2014  Olly Betts <olly@survex.com>

	* lib/,src/listpos.c: Change another "prefix" in a message to "survey
	  name".

Sat May 10 02:58:26 GMT 2014  Olly Betts <olly@survex.com>

	* tests/cavern.tst: Check number of errors returned by all testcases
	  expected to fail which give an error count.

Sat May 10 02:21:42 GMT 2014  Olly Betts <olly@survex.com>

	* tests/cavern.tst: Fix tests to work when builddir != srcdir.

Sat May 10 02:20:19 GMT 2014  Olly Betts <olly@survex.com>

	* src/glbitmapfont.cc: Fix compiler warning from GCC.

Sat May 10 00:08:15 GMT 2014  Olly Betts <olly@survex.com>

	* tests/: Add regression test 'reenterlots' for the fix in e1a66da.

Fri May 09 12:58:26 GMT 2014  Olly Betts <olly@survex.com>

	* tests/doubleinc.out: Fix testsuite for change to message in last
	  commit but one.

Fri May 09 12:54:41 GMT 2014  Olly Betts <olly@survex.com>

	* lib/: Merge changes from survex.pot to the po files.

Fri May 09 12:50:16 GMT 2014  Olly Betts <olly@survex.com>

	* lib/survex.pot,src/commands.c: Say "survey" instead of "prefix level"
	  in the warning about reentering one.
	* lib/survex.pot,src/commands.c: After 5 warnings about reentering a
	  survey we give up warning about that, but we used to keep reporting
	  where the survey was originally entered - this secondary diagnostic
	  message is now silenced when the main message is.

Fri May 09 11:49:29 GMT 2014  Olly Betts <olly@survex.com>

	* src/commands.c,tests/: For ages cavern has warned if you reentered
	  a survey, but this warning was suppressed if it occurred at the
	  same line of the same file as the survey was first entered, which can
	  only happen if you include the same survey file more than once, which
	  isn't a sensible thing to do for a file with actual survey data in
	  (you might reasonably do it to set up survey grade details or
	  something like that).  The warning is now given in this situation
	  too.

Fri May 09 11:42:43 GMT 2014  Olly Betts <olly@survex.com>

	* tests/anonstn.out,tests/anonstn.pos,tests/anonstn.svx: Test that
	  "..." anon station works.

Fri May 09 09:42:11 GMT 2014  Olly Betts <olly@survex.com>

	* src/message.c: Add handling for MS Windows LANG_RUSSIAN code.

Fri May 09 09:41:23 GMT 2014  Olly Betts <olly@survex.com>

	* lib/de.po,lib/de_CH.po: Attempt to update "Prfix" to
	  "Vermessungsnamen" in fuzzy messages.

Fri May 09 07:53:12 GMT 2014  Olly Betts <olly@survex.com>

	* src/gfxcore.cc,src/gfxcore.h,src/guicontrol.cc: Add "hit test debug"
	  mode, which shows the hit test grid and how many entries are in each
	  box (toggled by F3).

Fri May 09 07:50:15 GMT 2014  Olly Betts <olly@survex.com>

	* src/gfxcore.cc: Increase the threshold for how close the pointer
	  needs to be to a station from 5 pixels to 7 to try to help
	  touchscreen users.  Reported by Hugh St Lawrence.

Fri May 09 07:46:12 GMT 2014  Olly Betts <olly@survex.com>

	* src/gfxcore.cc: Divide evenly over the full number of hittest grid
	  boxes, rather than not really using the final box in each direction.

Fri May 09 07:44:26 GMT 2014  Olly Betts <olly@survex.com>

	* src/gfxcore.cc: Invalidate the hit-test grid when surface or
	  underground legs are toggled on or off.

Fri May 09 03:31:55 GMT 2014  Olly Betts <olly@survex.com>

	* src/cad3d.c: Whitespace tweak.

Fri May 09 03:30:53 GMT 2014  Olly Betts <olly@survex.com>

	* lib/merge-po: If a msgid has changed, use the old msgstr for that
	  msgno and automatically mark it as fuzzy.

Fri May 09 03:27:00 GMT 2014  Olly Betts <olly@survex.com>

	* lib/,src/cavern.h,src/commands.c,tests/badbegin.out: Improve cavern
	  messages which talk about "tags" and/or "prefixes" in *begin and *end
	  commands to instead talk about "survey names".

Fri May 09 00:30:14 GMT 2014  Olly Betts <olly@survex.com>

	* lib/: Merge template changes into .po files.

Fri May 09 00:15:46 GMT 2014  Olly Betts <olly@survex.com>

	* lib/extract-msgs.pl,lib/survex.pot,src/: Insert "TRANSLATORS"
	  comments into source code.

Mon May 05 05:53:01 GMT 2014  Olly Betts <olly@survex.com>

	* .gitignore,lib/Makefile.am,lib/ru.po: Add the start of a Russian
	  translation, with messages take from therion.

Mon May 05 00:01:19 GMT 2014  Olly Betts <olly@survex.com>

	* lib/fr.po: Minor updates.

Mon Apr 14 04:22:03 GMT 2014  Olly Betts <olly@survex.com>

	* NEWS,configure.ac: Update for 1.2.12.

Mon Apr 14 04:15:58 GMT 2014  Olly Betts <olly@survex.com>

	* src/printwx.cc: Tidy up the appearance of the "compass" and
	  "elevation on" arrow.

Mon Apr 14 04:15:07 GMT 2014  Olly Betts <olly@survex.com>

	* src/printwx.cc: Move the numbers below the scale bar down a little
	  so that they don't overlap the scale bar ticks.

Mon Apr 14 04:03:05 GMT 2014  Olly Betts <olly@survex.com>

	* src/printwx.cc: Set the clipping region after we draw the page
	  border and info box to avoid clipping the border in print preview.

Mon Apr 14 03:40:54 GMT 2014  Olly Betts <olly@survex.com>

	* src/printwx.cc: Fix printing with wx3.0 - 0 width lines don't appear
	  (before they would be as thin as possible) and we need to reset the
	  brush after setting it to transparent to draw a non-filled ellipse.

Mon Apr 14 00:58:47 GMT 2014  Olly Betts <olly@survex.com>

	* lib/survex-aven.desktop,lib/survex-svxedit.desktop: Add "Keywords:"
	  entry to .desktop files.

Sat Mar 15 11:37:32 GMT 2014  Olly Betts <olly@survex.com>

	* src/Makefile.am: Update findentrances comment.

Sat Mar 15 11:26:12 GMT 2014  Olly Betts <olly@survex.com>

	* NEWS: Update.

Sat Mar 15 11:23:54 GMT 2014  Olly Betts <olly@survex.com>

	* survex.spec.in: Update dependencies to wxWidgets3 packages.

Sat Mar 15 10:21:17 GMT 2014  Olly Betts <olly@survex.com>

	* survex.spec.in: Add proj-devel to BuildRequires.

Thu Feb 27 23:15:19 GMT 2014  Olly Betts <olly@survex.com>

	* configure.ac: Enable large file support, mostly to support filing
	  systems which return 64 bit inode values, such as CIFS mounts.

Mon Feb 17 22:48:33 GMT 2014  Olly Betts <olly@survex.com>

	* configure.ac,src/moviemaker.cc: Fix to work with libav 10.  Reported
	  by Moritz Muehlenhoff in <http://bugs.debian.org/739332>.

Mon Feb 10 22:48:50 GMT 2014  Olly Betts <olly@survex.com>

	* src/osdepend.c: Don't use isalpha() for checking drive letters as
	  it's locale dependent.

Mon Feb 10 22:48:29 GMT 2014  Olly Betts <olly@survex.com>

	* lib/de.po,lib/de_CH.po: Translation updates.

Mon Feb 10 21:23:12 GMT 2014  Olly Betts <olly@survex.com>

	* src/mainfrm.cc: Fix measuring line to show change in altitude rather
	  than altitude (broken in 1.2.11).  Reported by Brian Clipstone.

Thu Jan 30 02:10:41 GMT 2014  Olly Betts <olly@survex.com>

	* src/filename.c: Comment tweak.

Thu Jan 30 02:10:21 GMT 2014  Olly Betts <olly@survex.com>

	* lib/bg.po,lib/de_CH.po,lib/id.po: Translation updates.

Wed Jan 29 21:42:58 GMT 2014  Olly Betts <olly@survex.com>

	* lib/: Translation updates.

Wed Jan 29 21:03:14 GMT 2014  Olly Betts <olly@survex.com>

	* src/moviemaker.cc: Fix to build when avcodec_free_frame() isn't
	  available.

Tue Jan 28 01:57:57 GMT 2014  Olly Betts <olly@survex.com>

	* NEWS: More changes for 1.2.11.

Tue Jan 28 01:34:15 GMT 2014  Olly Betts <olly@survex.com>

	* lib/Makefile.am,lib/make-pixel-font,src/glbitmapfont.cc,
	  src/glbitmapfont.h: Embed the font data for the first 256 Unicode
	  codepoints into the compiled aven binary to reduce start up
	  overhead.  Any additional codepoints are loaded from a data file
	  only if/when a character >= U+100 is actually needed (as before).

Tue Jan 28 00:08:18 GMT 2014  Olly Betts <olly@survex.com>

	* src/gfxcore.cc,src/gfxcore.h: No need to dynamically allocate
	  m_Pens.

Mon Jan 27 20:25:39 GMT 2014  Olly Betts <olly@survex.com>

	* src/gfxcore.cc: Don't default to percent gradient.

Mon Jan 27 11:44:49 GMT 2014  Olly Betts <olly@survex.com>

	* NEWS,configure.ac: Update for 1.2.11.

Mon Jan 27 11:16:27 GMT 2014  Olly Betts <olly@survex.com>

	* make_release: Run "make check" under valgrind.

Mon Jan 27 11:15:17 GMT 2014  Olly Betts <olly@survex.com>

	* src/cad3d.c,src/str.c,src/str.h: Rename s_cat_len() to s_catlen()
	  for consistency with s_catchar().

Mon Jan 27 11:13:31 GMT 2014  Olly Betts <olly@survex.com>

	* make_release: Add simple check for // comments in C sources.
	* make_release: Before release, build with -Werror to catch any
	  warnings which may have been missed.

Mon Jan 27 10:25:02 GMT 2014  Olly Betts <olly@survex.com>

	* src/: Make cad3d remap control characters and spaces in station
	  names when generating PLT output in the same way aven does.

Mon Jan 27 07:43:27 GMT 2014  Olly Betts <olly@survex.com>

	* NEWS: Update.

Mon Jan 27 06:01:15 GMT 2014  Olly Betts <olly@survex.com>

	* lib/,src/: Add support for showing percentage gradient in the tilt
	  indicator in aven.  Show the units (degrees, grads, or percent) for
	  the tilt and bearing indicators.

Mon Jan 27 05:40:04 GMT 2014  Olly Betts <olly@survex.com>

	* src/mainfrm.cc: Fix GCC warnings.

Mon Jan 27 05:37:02 GMT 2014  Olly Betts <olly@survex.com>

	* src/glbitmapfont.cc,src/glbitmapfont.h:
	  BitmapFont::get_text_extent() now uses the width of all glyphs,
	  rather than assuming all those > BITMAPFONT_MAX_CHAR have width 16.

Mon Jan 27 05:32:12 GMT 2014  Olly Betts <olly@survex.com>

	* src/glbitmapfont.cc: Fix writing of Unicode characters above
	  BITMAPFONT_MAX_CHAR (which is 256 currently).

Mon Jan 27 00:44:30 GMT 2014  Olly Betts <olly@survex.com>

	* src/gfxcore.cc: Try to work around measuring line redraw issues on
	  Microsoft Windows by redrawing the whole window, which doesn't
	  seem to be measurably slower.

Mon Jan 27 00:21:30 GMT 2014  Olly Betts <olly@survex.com>

	* lib/: Translation updates.

Sun Jan 26 23:50:31 GMT 2014  Olly Betts <olly@survex.com>

	* doc/manual.sgml: Add missing quantities to the list documented as
	  accepted by *units: LEFT, RIGHT, UP/CEILING, DOWN/FLOOR (missing
	  entirely); BACKCOMPASS/BACKBEARING, BACKCLINO/BACKGRADIENT (missing
	  from the main list, mentioned in list of the units that can be set
	  for them); COUNT (missing alternative name for COUNTER); DX/EASTING,
	  DY/NORTHING, DZ/ALTITUDE (incorrectly listed as X, Y, Z).  Reported
	  by Jonny Prouty.

Sun Jan 26 23:48:19 GMT 2014  Olly Betts <olly@survex.com>

	* src/commands.c: If *units is used to set units for LEVEL, PLUMB, or
	  POSITION, give an error rather than quietly ignore the attempt.
	* tests/: New regression testcase bad_units_qlist.

Sun Jan 26 23:35:18 GMT 2014  Olly Betts <olly@survex.com>

	* tests/bad_units_factor.svx,tests/cavern.tst: Test that "*units
	  backclino 0 percent" gives an error about the factor being zero.
	* tests/Makefile.am,tests/bad_units_factor.out: Add expected output
	  to make sure we're getting the errors we expect, not just the
	  expected number of errors.

Fri Jan 24 06:20:49 GMT 2014  Olly Betts <olly@survex.com>

	* lib/de.po,lib/de_CH.po: Update.

Fri Jan 24 05:08:19 GMT 2014  Olly Betts <olly@survex.com>

	* src/gfxcore.cc: Don't crash with assertion failure when showing
	  passages for a cave with no vertical extent.  Reported by Jonny
	  Prouty.

Fri Jan 24 05:07:34 GMT 2014  Olly Betts <olly@survex.com>

	* src/moviemaker.cc: Fix to build again with libav/ffmpeg.

Tue Jan 23 19:52:21 GMT 2014  Olly Betts <olly@survex.com>

	* src/gfxcore.cc: Simplify accounting for size of blobs on measuring
	  line.

Thu Jan 23 11:42:01 GMT 2014  Olly Betts <olly@survex.com>

	* src/moviemaker.cc,src/moviemaker.h: Fix to actually build without
	  libav/ffmpeg.

Thu Jan 23 11:34:30 GMT 2014  Olly Betts <olly@survex.com>

	* lib/,src/: Make all uses of unit names translatable.

Tue Jan 21 12:23:06 GMT 2014  Olly Betts <olly@survex.com>

	* lib/fr.po: Merge translation updates from Eric Madelaine.

Tue Jan 21 11:31:22 GMT 2014  Olly Betts <olly@survex.com>

	* lib/: More translation updates.

Tue Jan 21 10:32:08 GMT 2014  Olly Betts <olly@survex.com>

	* lib/Makefile.am,lib/generate-po-todo: Add script and makefile target
	  to pick out the messages from each po file which need attention.

Tue Jan 21 10:30:45 GMT 2014  Olly Betts <olly@survex.com>

	* lib/survex.pot,src/mainfrm.cc: Allow "m" and "ft" suffixes to be
	  translated.

Tue Jan 21 04:14:55 GMT 2014  Olly Betts <olly@survex.com>

	* doc/TODO.htm: Remove things which have now been done, and reorganise
	  the rest.

Tue Jan 21 03:48:07 GMT 2014  Olly Betts <olly@survex.com>

	* src/message.c: On Microsoft Windows 2000 and newer, use
	  GetUserDefaultUILanguage() to get the UI language to use.  For older
	  versions, continue to use GetUserDefaultLCID().

Tue Jan 21 02:29:06 GMT 2014  Olly Betts <olly@survex.com>

	* lib/,src/avenprcore.cc,src/printwx.cc: Change term "info box" to
	  "legend".

Tue Jan 21 02:15:38 GMT 2014  Olly Betts <olly@survex.com>

	* src/mainfrm.cc,src/mainfrm.h: If full screen, don't recreate the
	  side panel when a new file is opened (e.g. via Ctrl+O).

Mon Jan 20 05:33:04 GMT 2014  Olly Betts <olly@survex.com>

	* NEWS: Update.

Mon Jan 20 04:54:28 GMT 2014  Olly Betts <olly@survex.com>

	* lib/bg.po,lib/de.po,lib/de_CH.po: More translation updates.

Sun Jan 19 01:44:44 GMT 2014  Olly Betts <olly@survex.com>

	* lib/,src/netskel.c,tests/: Drop "between nodes" from the progress
	  messages while solving the survey network, as the extra words don't
	  make the meaning clearer, and "node" doesn't mean exactly the same
	  here as the summary of nodes printed at the end of processing, which
	  is a bit confusing.

Sun Jan 19 01:31:54 GMT 2014  Olly Betts <olly@survex.com>

	* lib/: More translation updates.

Sun Jan 19 00:51:33 GMT 2014  Olly Betts <olly@survex.com>

	* lib/po-to-msg.pl: Fix menu shortcut check to allow for non-ASCII
	  shortcuts.  Remove code to check for menu shortcuts marked with '@'
	  as we no longer do that.

Sat Jan 18 23:24:47 GMT 2014  Olly Betts <olly@survex.com>

	* buildmacosx.sh: Update to use wx 3.0.0, and add a checksum check for
	  the downloaded wx sources.  Thanks to David A. Riggs for his work on
	  getting the Mac OS X build going with wx 3.0.0.

Sat Jan 18 23:09:12 GMT 2014  Olly Betts <olly@survex.com>

	* src/gla-gl.cc: Split log_fl_error helper function out of
	  CHECK_GL_ERROR, which will reduce code size and also the number of
	  deprecation warnings about gluErrorString on Mac OS X 10.9.

Sat Jan 18 22:49:02 GMT 2014  Olly Betts <olly@survex.com>

	* lib/en_US.po: Translate "elevation" to "profile" in a couple of
	  places where we weren't.

Sat Jan 18 22:48:01 GMT 2014  Olly Betts <olly@survex.com>

	* src/message.c: Hook up Indonesian translation to be used when
	  Windows is set to Indonesian.

Sat Jan 18 22:47:20 GMT 2014  Olly Betts <olly@survex.com>

	* lib/checkshortcut.pl: Fix shortcut checking to allow for non-ASCII
	  shortcuts.

Sat Jan 18 22:45:50 GMT 2014  Olly Betts <olly@survex.com>

	* lib/Makefile.am,lib/bg.po,src/message.c: Add start of bulgarian
	  translation, with messages take from therion.

Fri Jan 17 07:39:48 GMT 2014  Olly Betts <olly@survex.com>

	* src/printwx.cc: Include wx headers before ISO C/C++ ones, to try to
	  fix build failure on OS X 10.9 with wx 3.0.0.

Fri Jan 17 07:27:34 GMT 2014  Olly Betts <olly@survex.com>

	* src/moviemaker.h: If we don't have libav or ffmpeg, omit all the
	  member variables from class MovieMaker, to avoid "unused private
	  field" warnings from clang.

Fri Jan 17 07:22:32 GMT 2014  Olly Betts <olly@survex.com>

	* src/: Use cast to void rather than assignment to self to suppress
	  unused parameter warnings, as clang warns about the latter.

Fri Jan 17 07:12:47 GMT 2014  Olly Betts <olly@survex.com>

	* src/aboutdlg.cc: Use string::erase() rather than assigning the
	  result of string::substr().

Thu Jan 16 03:58:18 GMT 2014  Olly Betts <olly@survex.com>

	* lib/: Update pot and po files with current linenumber references.

Thu Jan 16 03:57:55 GMT 2014  Olly Betts <olly@survex.com>

	* src/printwx.cc: Fix incorrect message in comment.

Thu Jan 16 03:46:23 GMT 2014  Olly Betts <olly@survex.com>

	* lib/extract-msgs.pl: Fix to handle there being a comment before the
	  comment with the message in.

Thu Jan 16 03:17:24 GMT 2014  Olly Betts <olly@survex.com>

	* lib/: Various translation updates.

Thu Jan 16 03:15:10 GMT 2014  Olly Betts <olly@survex.com>

	* lib/de.po,lib/de_CH.po: Move menu accelerator on "Farbschlssel"
	  from "" to "F", since the latter isn't used in that menu.

Wed Jan 15 21:00:14 GMT 2014  Olly Betts <olly@survex.com>

	* lib/: Fill in some missing translations from existing similar
	  translations.

Wed Jan 15 10:55:44 GMT 2014  Olly Betts <olly@survex.com>

	* src/mainfrm.cc,src/mainfrm.h: Fix wxWidgets assertion when double
	  clicking on an anonymous station.  Reported by Kevin Dixon.

Wed Jan 15 07:11:30 GMT 2014  Olly Betts <olly@survex.com>

	* NEWS,configure.ac: Update for 1.2.10.

Wed Jan 15 07:07:25 GMT 2014  Olly Betts <olly@survex.com>

	* lib/ca.po,lib/de.po: Mark altered message as fuzzy in languages I
	  failed to before.

Wed Jan 15 06:25:10 GMT 2014  Olly Betts <olly@survex.com>

	* NEWS: Update.

Wed Jan 15 06:13:44 GMT 2014  Olly Betts <olly@survex.com>

	* src/img.c: Simplify reading of labels in 3d v1 and v2 files.

Wed Jan 15 06:11:12 GMT 2014  Olly Betts <olly@survex.com>

	* lib/,src/cavernlog.cc: If we fail to start the external editor,
	  throw up an error box.

Wed Jan 15 05:58:31 GMT 2014  Olly Betts <olly@survex.com>

	* src/img.c: Pass pimg->buf_len rather than literal 257.

Wed Jan 15 00:23:34 GMT 2014  Olly Betts <olly@survex.com>

	* src/img.c: Remove pointless "future expansion" comment from
	  img_read_item_ancient().

Wed Jan 15 00:22:22 GMT 2014  Olly Betts <olly@survex.com>

	* src/img.c: Tweak recursive calls in img_read_item_ancient() and
	  img_write_item_ancient() to directly call the same function.

Wed Jan 15 00:15:30 GMT 2014  Olly Betts <olly@survex.com>

	* src/img.c,src/useful.h: Fix some glibc fortify source warnings.

Wed Jan 15 00:13:27 GMT 2014  Olly Betts <olly@survex.com>

	* src/img.c: Make 4 internal functions static.

Tue Jan 14 21:57:03 GMT 2014  Olly Betts <olly@survex.com>

	* src/printwx.cc: Minor code refactor.

Tue Jan 14 21:51:58 GMT 2014  Olly Betts <olly@survex.com>

	* NEWS: Update.

Tue Jan 14 21:39:34 GMT 2014  Olly Betts <olly@survex.com>

	* lib/en_US.po: Add missing translation.

Tue Jan 14 21:25:01 GMT 2014  Olly Betts <olly@survex.com>

	* src/printwx.cc: Fix crash on "File->Print" or "File->Export" under
	  Windows XP, reported by Brian Clipstone.

Tue Jan 14 21:23:10 GMT 2014  Olly Betts <olly@survex.com>

	* src/aven.cc: Simplify handling of command line under __WXMSW__,
	  fixing error if run with no parameters.

Tue Jan 14 21:17:38 GMT 2014  Olly Betts <olly@survex.com>

	* configure.ac,src/img.c: Only use _putenv_s() under MSVC - mingw
	  doesn't provide it.

Tue Jan 14 21:14:51 GMT 2014  Olly Betts <olly@survex.com>

	* make_release: Turn on optimisation when building aven for Microsoft
	  Windows.

Tue Jan 14 04:17:10 GMT 2014  Olly Betts <olly@survex.com>

	* src/guicontrol.cc: If dragging with more than one mouse button held
	  down, releasing one causes another which is still held down to take
	  effect.

Tue Jan 14 03:33:38 GMT 2014  Olly Betts <olly@survex.com>

	* src/guicontrol.cc: Fix assertion if two mouse buttons are held down
	  at the same time.  Reported by Brian Clipstone.

Tue Jan 14 03:22:54 GMT 2014  Olly Betts <olly@survex.com>

	* src/img.c,src/mainfrm.cc: Although these are often referred to as
	  "CMAP .XYZ files", it seems that actually, the extension .XYZ isn't
	  used, rather .SHT (shot variant, produced by CMAP v16 and later),
	  .UNA (unadjusted) and .ADJ (adjusted) extensions are.  Since we've
	  long checked for .XYZ, we continue to do so in case anyone is
	  relying on it, but also check for the other extensions.

Tue Jan 14 03:20:03 GMT 2014  Olly Betts <olly@survex.com>

	* buildmacosx.sh,configure.ac,doc/manual.sgml: Update references to
	  Survex 1.1 which should be to 1.2.

Tue Jan 14 03:14:31 GMT 2014  Olly Betts <olly@survex.com>

	* doc/manual.sgml: Note the station length limit Smaps used.

Tue Jan 14 02:55:02 GMT 2014  Olly Betts <olly@survex.com>

	* tests/expobug.svx: Fix comment typo.

Tue Jan 14 02:52:52 GMT 2014  Olly Betts <olly@survex.com>

	* src/imgtest.c: Fix printf format to actually match types of
	  parameters.

Tue Jan 14 02:52:31 GMT 2014  Olly Betts <olly@survex.com>

	* src/gpx.cc: Fix comment typo.

Tue Jan 14 02:48:59 GMT 2014  Olly Betts <olly@survex.com>

	* src/: Pass the numeric datestamp to ExportFilter::header(), and use
	  it to set a timestamp in exported GPX files.

Tue Jan 14 01:18:42 GMT 2014  Olly Betts <olly@survex.com>

	* src/datain.c: Fix NULL pointer dereference when processing Compass
	  DAT file without 'SURVEY DATE:'.

Tue Jan 14 00:40:06 GMT 2014  Olly Betts <olly@survex.com>

	* src/: Add new "datestamp_numeric" field to struct img giving the
	  datestamp as a time_t in UTC (or (time_t)-1 if there's no datestamp
	  or we failed to convert it).  For .3d >= v8, this field is reliable.
	  We attempt to convert date strings in .3d <= v7 and CMAP XYZ
	  files, but may get the timezone wrong.

Tue Jan 14 00:29:35 GMT 2014  Olly Betts <olly@survex.com>

	* src/img.c: Fix my_strcasecmp() to handle top-bit set characters
	  better.

Mon Jan 13 04:20:11 GMT 2014  Olly Betts <olly@survex.com>

	* src/gpx.cc: Don't try to write the title if it isn't set or is
	  empty.

Mon Jan 13 04:09:27 GMT 2014  Olly Betts <olly@survex.com>

	* src/export.cc: If the survey has a title, add it as a top-level
	  <title> element to exported SVG files.

Mon Jan 13 04:08:11 GMT 2014  Olly Betts <olly@survex.com>

	* src/export.cc: Escape '<', '>', and '&' in labels in exported SVG
	  files.

Mon Jan 13 04:02:26 GMT 2014  Olly Betts <olly@survex.com>

	* src/: Pass the datestamp from the 3d file to the export code.

Mon Jan 13 04:00:54 GMT 2014  Olly Betts <olly@survex.com>

	* src/avenprcore.cc,src/printwx.cc: Don't bother looking up the
	  printer page setup info when exporting.

Wed Jan 08 04:50:10 GMT 2014  Olly Betts <olly@survex.com>

	* doc/HACKING.htm: Document how to configure wxWidgets 3.0.0 for mingw
	  cross-build.

Wed Jan 08 04:11:32 GMT 2014  Olly Betts <olly@survex.com>

	* NEWS,configure.ac: Update for 1.2.9.

Wed Jan 08 03:57:39 GMT 2014  Olly Betts <olly@survex.com>

	* lib/: Add "Language:" headers to .po files.

Wed Jan 08 02:17:44 GMT 2014  Olly Betts <olly@survex.com>

	* src/img.c: In non-hosted mode, don't define GETC and PUTC if they're
	  already defined, to allow easy overriding with getc_unlocked() and
	  putc_unlocked().

Wed Jan 08 02:13:27 GMT 2014  Olly Betts <olly@survex.com>

	* src/Makefile.am,src/imgtest.c: Add compile test that img.c and img.h
	  work in non-hosted mode.

Wed Jan 08 01:14:42 GMT 2014  Olly Betts <olly@survex.com>

	* doc/cavern.sgml: Document --3d-version in cavern man page.

Wed Jan 08 01:05:34 GMT 2014  Olly Betts <olly@survex.com>

	* src/moviemaker.cc: Set rc_buffer_size to avoid warning from libav
	  when exporting MPEG.

Tue Jan 07 23:09:53 GMT 2014  Olly Betts <olly@survex.com>

	* src/moviemaker.cc: Fix GCC warnings.

Tue Jan 07 23:08:21 GMT 2014  Olly Betts <olly@survex.com>

	* src/img.c: In non-hosted mode, check that int is at least 32 bits,
	  and if not, use long.  In practice, platforms with 16 bit int are
	  mostly obsolete, but it's not hard to be portable here.

Tue Jan 07 22:05:58 GMT 2014  Olly Betts <olly@survex.com>

	* src/msvc/config.h.in: Update to INT16_T to int16_t and INT32_T to
	  int32_t.  AFAIK, building with MSVC hasn't been tested for a long
	  time, so it's likely more fixes will be needed.

Tue Jan 07 21:55:27 GMT 2014  Olly Betts <olly@survex.com>

	* configure.ac: Don't call AC_C_CONST - C compilers without 'const'
	  support haven't been relevant for years.

Thu Oct 31 12:08:07 GMT 2013  Olly Betts <olly@survex.com>

	* lib/: Update translations from launchpad and from existing similar
	  messages.

Tue Oct 29 23:47:57 GMT 2013  Olly Betts <olly@survex.com>

	* src/moviemaker.cc: Fix to call avcodec_free_frame() correctly.

Tue Oct 29 08:58:56 GMT 2013  Olly Betts <olly@survex.com>

	* NEWS,configure.ac: Update for 1.2.8.

Tue Oct 29 08:10:45 GMT 2013  Olly Betts <olly@survex.com>

	* src/: Hook up to pass "input_projection" from .aven config file
	  through to GPX export code.

Sat Oct 26 06:35:52 GMT 2013  Olly Betts <olly@survex.com>

	* src/gfxcore.cc: Another tweak to use RefreshRect() rather than
	  Refresh() for slightly simpler code.

Fri Oct 25 21:08:53 GMT 2013  Olly Betts <olly@survex.com>

	* src/gpx.cc: Use fputs rather than fprintf for constant strings.

Fri Oct 25 21:07:57 GMT 2013  Olly Betts <olly@survex.com>

	* src/gpx.cc,src/gpx.h,src/printwx.cc: Add support for exporting legs
	  as tracks in GPX.

Fri Oct 25 06:14:38 GMT 2013  Olly Betts <olly@survex.com>

	* src/printwx.cc: Swap the "Elements" and "View" boxes in the print
	  and export dialogs, as that works much better when the "View" box
	  is hidden.

Fri Oct 25 06:11:59 GMT 2013  Olly Betts <olly@survex.com>

	* lib/survex.pot,src/export.cc,src/export.h,src/printwx.cc: Add
	  "Origin in centre" and "Full coordinates" options to export
	  - the latter fixes #10.  GPX and PLT output force "full
	  coordinates".

Wed Oct 23 21:47:07 GMT 2013  Olly Betts <olly@survex.com>

	* src/gfxcore.cc: Tweak to use RefreshRect() rather than Refresh() for
	  slightly simpler code.

Wed Oct 23 21:46:13 GMT 2013  Olly Betts <olly@survex.com>

	* src/dump3d.c: Show dates for XSECT.

Wed Oct 23 06:46:39 GMT 2013  Olly Betts <olly@survex.com>

	* src/printwx.cc: Fix export and (the built-in) print preview to
	  actually use the options selected in the dialog rather than those
	  set when the dialog was created.

Wed Oct 23 06:30:05 GMT 2013  Olly Betts <olly@survex.com>

	* src/: Hook up GPX export options to export entrances, fixed points,
	  and/or exported points, and specify coloured pin symbols for these
	  types of stations.  These options now default to what's being shown
	  in the survey view, like other export options.   GPX export
	  "creator" how includes the Survex version and website URL, and the
	  survey title is includes as a <name> tag inside the <gpx> tag.

Wed Oct 23 04:38:31 GMT 2013  Olly Betts <olly@survex.com>

	* src/guicontrol.cc: Fix assertion failure when double-clicking on the
	  survey with wx2.9.

Tue Oct 22 06:01:05 GMT 2013  Olly Betts <olly@survex.com>

	* src/: Rename internal references to "show splays" to just "splays"
	  to reflect the change in the menu item name.

Tue Oct 22 05:55:55 GMT 2013  Olly Betts <olly@survex.com>

	* lib/survex.pot,src/: Hide the "View" box for GPX export.  Add
	  checkboxes for "Entrances", "Fixed Points" and "Exported Stations"
	  for GPX export (currently non-functional).  Prepare for allowing
	  text height, marker size, and grid spacing to be set from aven (as
	  cad3d allows).

Mon Oct 21 01:10:04 GMT 2013  Olly Betts <olly@survex.com>

	* src/mainfrm.cc: Update to call img_error2msg() on the error code
	  returned by img_error().

Sat Oct 19 18:28:49 GMT 2013  Olly Betts <olly@survex.com>

	* src/printwx.cc: Fix segfault in "File->Export" if an export format
	  isn't stored in ".aven".

Sat Oct 19 17:39:49 GMT 2013  Olly Betts <olly@survex.com>

	* configure.ac,src/img.c: Use lround() instead of round(), and make
	  the tests around whether we use the library function or the our
	  fallback implementation saner.

Wed Sep 18 00:26:33 GMT 2013  Olly Betts <olly@survex.com>

	* src/aven.cc: Fix to build with wx 2.9.5 with wx2.8 compatibility
	  disabled.

Tue Sep 17 23:57:02 GMT 2013  Olly Betts <olly@survex.com>

	* src/mainfrm.cc: Make the Presentation->Play menu item a checkbox,
	  to avoid a warning with wxMSW 2.9.5.  Reported by Brian Clipstone.

Tue Sep 17 23:56:06 GMT 2013  Olly Betts <olly@survex.com>

	* src/guicontrol.cc,src/guicontrol.h: Rename scale/rotate lock
	  constants to have a "lock_" prefix.

Tue Sep 17 23:38:10 GMT 2013  Olly Betts <olly@survex.com>

	* src/mainfrm.cc: Make right click in an empty presentation mark the
	  current position and open it to edit, instead of crashing.

Tue Sep 17 23:37:00 GMT 2013  Olly Betts <olly@survex.com>

	* src/gfxcore.cc: Don't try to close the movie if we aren't producing
	  one.

Tue Sep 10 00:21:53 GMT 2013  Olly Betts <olly@survex.com>

	* configure.ac,src/moviemaker.cc: Use avcodec_free_frame() if it's
	  available.

Mon Sep 09 11:36:00 GMT 2013  Olly Betts <olly@survex.com>

	* src/cad3d.c: Correct long option names in code comment.

Mon Sep 09 11:33:20 GMT 2013  Olly Betts <olly@survex.com>

	* src/cad3d.c: Make --marker-size work for Skencil and SVG output.

Mon Sep 09 07:01:57 GMT 2013  Olly Betts <olly@survex.com>

	* src/gfxcore.cc,src/moviemaker.cc,src/moviemaker.h: Improve reporting
	  of errors during the process of exporting a movie.

Mon Sep 09 06:38:33 GMT 2013  Olly Betts <olly@survex.com>

	* configure.ac,src/moviemaker.cc,src/moviemaker.h: Update movie export
	  code to work with latest libav API.

Mon Sep 09 05:14:24 GMT 2013  Olly Betts <olly@survex.com>

	* Makefile.am,doc/HACKING.htm,lib/,survex.iss.in: Upgrade to newer
	  innosetup version.  Upgrade details of how to do a Microsoft Windows
	  build.

Mon Sep 09 04:19:36 GMT 2013  Olly Betts <olly@survex.com>

	* make_release: Prefer a hand-installed 2.9 mingw build of wx to a
	  packaged 2.8 build.

Mon Sep 09 04:18:18 GMT 2013  Olly Betts <olly@survex.com>

	* src/img.c,src/netbits.c: Fix // comments in C code for portability
	  to pre-C99 compilers which don't support these as an extension.

Mon Sep 09 04:12:57 GMT 2013  Olly Betts <olly@survex.com>

	* src/aven.cc: Fix to build with wxMSW 2.9.5.

Mon Sep 09 04:10:48 GMT 2013  Olly Betts <olly@survex.com>

	* configure.ac,src/Makefile.am: Probe for libproj.

Fri Sep 06 04:18:23 GMT 2013  Olly Betts <olly@survex.com>

	* NEWS,doc/cad3d.sgml,lib/,src/: The "Sketch" vector drawing program
	  got renamed to "Skencil" some time ago, so update all references in
	  code and documentation.  cad3d has a new --skencil option to specify
	  this output format, but --sketch is still recognised for
	  compatibility.

Fri Sep 06 03:39:16 GMT 2013  Olly Betts <olly@survex.com>

	* src/printwx.cc: Default to exporting in the export format used last
	  time.

Fri Sep 06 03:27:21 GMT 2013  Olly Betts <olly@survex.com>

	* lib/de_CH.po,lib/it.po,lib/sk.po: Minor translation updates.

Thu Sep 05 09:50:23 GMT 2013  Olly Betts <olly@survex.com>

	* lib/,src/: Add a format drop down to the export dialog, and only
	  show fields which are meaningful and supported for a particular
	  export format.

Thu Sep 05 04:21:40 GMT 2013  Olly Betts <olly@survex.com>

	* survex.iss.in: Newer innosetup no longer supports MinVersion.

Thu Sep 05 04:20:36 GMT 2013  Olly Betts <olly@survex.com>

	* lib/,survex.iss.in: Add translations for the Windows installer for
	  all the languages we have any translations of Survex itself for.

Mon Sep 02 21:03:50 GMT 2013  Olly Betts <olly@survex.com>

	* lib/,src/: Rework findentrances into GPX export for aven.

Mon Sep 02 02:17:49 GMT 2013  Olly Betts <olly@survex.com>

	* src/img.c: Improve fputsnl() for non-HOSTED mode to return a value.

Mon Sep 02 02:17:18 GMT 2013  Olly Betts <olly@survex.com>

	* src/img.c: Use osnew() to simplify code a little.

Mon Sep 02 01:45:52 GMT 2013  Olly Betts <olly@survex.com>

	* src/img.c: Don't segfault on img_close() in non-hosted mode.

Mon Sep 02 00:27:29 GMT 2013  Olly Betts <olly@survex.com>

	* NEWS,src/img.c: img.c can now be compiled as C++ as well as as C.

Mon Sep 02 00:17:36 GMT 2013  Olly Betts <olly@survex.com>

	* NEWS,src/img.c: Add missing definition of max() macro when built for
	  use outside of Survex.

Mon Sep 02 00:11:36 GMT 2013  Olly Betts <olly@survex.com>

	* src/img.c: Don't duplicate the IMG_API_VERSION defaulting logic from
	  img.h as we get it just by including img.h first.

Mon Sep 02 00:10:34 GMT 2013  Olly Betts <olly@survex.com>

	* src/: IMG_HOSTED no longer affects the img API at all.

Fri Aug 23 08:06:18 GMT 2013  Olly Betts <olly@survex.com>

	* NEWS,lib/,src/netskel.c: Tweak cavern .err file output to not lose
	  the space in front of certain statistics when the value gets large.

Wed Aug 21 21:14:03 GMT 2013  Olly Betts <olly@survex.com>

	* NEWS,lib/,src/matrix.c,src/out.h,tests/calibrate_clino.out: Don't
	  report "Solving to find x coordinates" as we actually find y and z
	  in the same operation, and as a progress message it is redundant with
	  "Solving %d simultaneous equations" anyway.

Fri Aug 09 10:23:24 GMT 2013  Olly Betts <olly@survex.com>

	* NEWS,src/printwx.cc: Need to call TransferDataFromWindow() for the
	  validators to get called and update the boolean flag settings mask.

Fri Aug 02 13:04:39 GMT 2013  Olly Betts <olly@survex.com>

	* NEWS,src/readval.c,tests/cmd_alias.out: Fix handling of anonymous
	  wall stations ('..' by default) to implicitly set the SPLAY leg flag,
	  as was intended.

Sat Jul 27 10:08:46 GMT 2013  Olly Betts <olly@survex.com>

	* tests/Makefile.am: Distribute files for normal_bad testcase.

Sat Jul 27 09:41:34 GMT 2013  Olly Betts <olly@survex.com>

	* NEWS,configure.ac: Update for 1.2.7.

Sun Jul 21 18:03:58 GMT 2013  Olly Betts <olly@survex.com>

	* src/mainfrm.cc: Speed up loading a .3d file with cross-sections by
	  using a map to convert station names to positions.

Sun Jul 21 16:12:25 GMT 2013  Olly Betts <olly@survex.com>

	* doc/TODO.htm: Note that dump3d needs documenting.

Sun Jul 21 16:09:24 GMT 2013  Olly Betts <olly@survex.com>

	* configure.ac,debian/survex.install,src/Makefile.am: Build and
	  package dump3d as standard - it's useful for grabbing info from
	  3d files in scripts.

Thu Jul 18 03:54:45 GMT 2013  Olly Betts <olly@survex.com>

	* lib/de.po: Merge German translation updates from launchpad.

Wed Jul 17 12:38:39 GMT 2013  Olly Betts <olly@survex.com>

	* doc/3dformat.htm,src/img.c: Move the DATE and ERROR codes in 3d v8 to
	  leave a large contiguous block of codes available.

Wed Jul 17 12:29:33 GMT 2013  Olly Betts <olly@survex.com>

	* src/img.c: Mask out the bit used to indicate no label change from
	  the returned leg flags.

Wed Jul 17 11:13:37 GMT 2013  Olly Betts <olly@survex.com>

	* doc/3dformat.htm,src/img.c: The prefix is often unchanged from one
	  leg to the next, so use a spare flag to compactly indicate that
	  there's no label change.

Tue Jul 16 12:04:55 GMT 2013  Olly Betts <olly@survex.com>

	* doc/3dformat.htm,src/img.c: More work toward v8 of 3d format.

Tue Jul 16 11:33:34 GMT 2013  Olly Betts <olly@survex.com>

	* doc/TODO.htm: The data style of legs is now stored in the 3d file,
	  so remove "flag nosurvey legs in .3d file" from todo list.

Tue Jul 16 11:33:04 GMT 2013  Olly Betts <olly@survex.com>

	* src/dump3d.c: Report the data style of legs.

Tue Jul 16 11:32:13 GMT 2013  Olly Betts <olly@survex.com>

	* src/cad3d.c: Check for errors from img_rewind() and report them.

Tue Jul 16 07:54:52 GMT 2013  Olly Betts <olly@survex.com>

	* tests/cavern.tst: Run diffpos <expected> <actual> so the reports of
	  'Added' and 'Deleted' stations are the more natural way round.

Tue Jul 09 22:59:48 GMT 2013  Olly Betts <olly@survex.com>

	* doc/3dformat.htm: Formatting tweaks.

Tue Jul 09 13:36:35 GMT 2013  Olly Betts <olly@survex.com>

	* doc/3dformat.htm,doc/TODO.htm,src/img.c: Add an explicit flag for
	  'this is an extended elevation' to 3d v8.

Tue Jul 09 13:24:29 GMT 2013  Olly Betts <olly@survex.com>

	* doc/3dformat.htm,doc/TODO.htm,src/img.h: Start on v8 of the 3d format
	  - the timestamp is stored as seconds since 1970.

Tue Jul 09 12:41:51 GMT 2013  Olly Betts <olly@survex.com>

	* src/commands.c: Fix ordering of the style masks to reflect swapping
	  of STYLE_NOSURVEY and STYLE_PASSAGE.

Tue Jul 09 11:14:28 GMT 2013  Olly Betts <olly@survex.com>

	* doc/TODO.htm: Update.

Tue Jul 09 10:31:50 GMT 2013  Olly Betts <olly@survex.com>

	* src/img.h: Remove unnecessary include of "useful.h" in IMG_HOSTED
	  mode.

Tue Jul 09 08:48:35 GMT 2013  Olly Betts <olly@survex.com>

	* src/cavern.h,src/img.h: Renumber STYLE_PASSAGE and STYLE_NOSURVEY so
	  that the style constants we want to pass to img are contiguously
	  numbered.

Sun Jul 07 13:03:56 GMT 2013  Olly Betts <olly@survex.com>

	* src/img.h: Just make fRead always int, eliminating IMG_HOSTED
	  conditional.

Sun Jul 07 12:45:11 GMT 2013  Olly Betts <olly@survex.com>

	* src/extend.c,src/img.c,src/img.h: Repurpose the long unused fBinary
	  parameter to img_open_write() as a flags parameter, and add
	  img_FFLAG_EXTENDED to specify that this is an extended elevation,
	  in place of appending " (extended)" to the title.  Internally we
	  still append this to the title (and remove it upon reading), but in
	  the 3d v8 format, the flags will be stored explicitly in the file.

Sun Jul 07 12:22:32 GMT 2013  Olly Betts <olly@survex.com>

	* src/img.h: Add comments for the lists of "Leg flags" and "Station
	  flags".

Sun Jul 07 12:20:29 GMT 2013  Olly Betts <olly@survex.com>

	* NEWS,src/dump3d.c,src/img.h: Drop img_FLAG_NOSURVEY - it's redundant
	  now we're going to store the style of each leg, and it hasn't yet
	  been in a release.

Sun Jul 07 12:14:23 GMT 2013  Olly Betts <olly@survex.com>

	* src/dump3d.c: Report if the file is an extended elevation.

Sun Jul 07 12:12:24 GMT 2013  Olly Betts <olly@survex.com>

	* src/: Track the data style of each leg, and pass it in to img - it's
	  not yet stored in the .3d file, but now it is easily available so it
	  can be.

Fri Jul 05 13:17:24 GMT 2013  Olly Betts <olly@survex.com>

	* configure.ac,doc/3dformat-old.htm: Split off a copy of the current
	  3dformat document - v8 will feature significant changes, so it will
	  be clearer to document it separately.

Fri Jul 05 13:11:25 GMT 2013  Olly Betts <olly@survex.com>

	* src/dump3d.c,src/netskel.c: The fBinary parameter of img_open_write()
	  has been unused for years, so stop passing fTrue.

Tue Jul 02 12:04:09 GMT 2013  Olly Betts <olly@survex.com>

	* src/img.c: Revert to putting a human readable timestamp string in
	  v7 and older files.

Tue Jul 02 11:01:41 GMT 2013  Olly Betts <olly@survex.com>

	* src/dump3d.c: Show only 2 decimal places on coordinates and passage
	  dimensions.

Wed Jun 12 13:35:21 GMT 2013  Olly Betts <olly@survex.com>

	* src/printwx.cc: Implement a copy ctor for BitValidator in the same
	  way that wxGenericValidator does.  Older GCC seems to need such a
	  copy ctor to exist to compile the uses of BitValidator in
	  printwx.cc.

Wed Jun 12 13:34:52 GMT 2013  Olly Betts <olly@survex.com>

	* src/Makefile.am: Ship gdtconvert and gen_img2aven.

Wed Jun 12 13:33:38 GMT 2013  Olly Betts <olly@survex.com>

	* make_release: Tweak 'mingw' building to look for a suitable
	  wx-config and get the C and C++ compilers to use using its
	  --cc and --cxx flags.

Tue Jun 11 12:06:08 GMT 2013  Olly Betts <olly@survex.com>

	* src/printwx.cc: wxValidator subclasses shouldn't have a copy ctor,
	  so give BitValidator an unimplemented private copy ctor, and use
	  the normal ctor instead to implement the Clone() method.

Tue Jun 11 11:51:13 GMT 2013  Olly Betts <olly@survex.com>

	* NEWS: Update from ChangeLog.

Mon Jun 10 11:50:18 GMT 2013  Olly Betts <olly@survex.com>

	* lib/launchpad-merge-po: New script to eliminate unwanted differences
	  introduced by launchpad.
	* lib/Makefile.am: Make launchpad-diff target use launchpad-merge-po
	  and skip files missing in the launchpad export.

Mon Jun 10 11:47:37 GMT 2013  Olly Betts <olly@survex.com>

	* lib/unlaunchpad-po: Normalise dates in PO headers.

Mon Jun 10 07:23:07 GMT 2013  Olly Betts <olly@survex.com>

	* lib/Makefile.am,lib/unlaunchpad-po: Add "launchpad-diff" make target
	  to assist with merging in translation changes from launchpad.

Sun Jun 09 00:04:37 GMT 2013  Olly Betts <olly@survex.com>

	* src/img.c: Handle .pos files containing unnamed stations - don't suck
	  the next line in as the station name, and set img_SFLAG_ANON for
	  them.

Sat Jun 08 15:12:25 GMT 2013  Olly Betts <olly@survex.com>

	* src/mainfrm.cc: Fix mapping of flags when loading a .3d file.

Sat Jun 08 15:07:05 GMT 2013  Olly Betts <olly@survex.com>

	* .gitignore,src/gen_img2aven: Commit script to generate img2aven.h.

Sat Jun 08 14:20:45 GMT 2013  Olly Betts <olly@survex.com>

	* lib/: Update line number references and merge message changes from
	  survex.pot to the .po files.

Sat Jun 08 14:17:52 GMT 2013  Olly Betts <olly@survex.com>

	* lib/Makefile.am,lib/merge-po: Add "merge-pos" target to merge in new
	  messages and updates to comments from survex.pot to the .po files.

Sat Jun 08 14:10:16 GMT 2013  Olly Betts <olly@survex.com>

	* tests/: Commit files for new tests.

Sat Jun 08 13:40:38 GMT 2013  Olly Betts <olly@survex.com>

	* src/img.c,src/img.h,src/mainfrm.cc: Store the 'processed at'
	  timestamp in the .3d file as seconds since 1970 rather than as
	  a human readable string.

Sat Jun 08 06:19:17 GMT 2013  Olly Betts <olly@survex.com>

	* src/commands.c: Correct comment about *alias.

Sat Jun 08 06:01:38 GMT 2013  Olly Betts <olly@survex.com>

	* lib/de.po,lib/de_CH.po,lib/en_US.po: Update translations.

Thu Jun 06 10:56:22 GMT 2013  Olly Betts <olly@survex.com>

	* lib/,src/: Show splay legs faded by default, with menu options to
	  hide them or show them like other legs.

Tue Jun 04 12:37:03 GMT 2013  Olly Betts <olly@survex.com>

	* doc/manual.sgml,lib/survex.pot,src/,tests/Makefile.am,
	  tests/cavern.tst: Add more anonymous station types - a double
	  separator ('..' by default) is an anoymous wall point at the end
	  of an implicit splay (c.f. '.' being a non-wall point), and
	  a triple separator ('...' by default) is an anoymous point (with
	  nothing special about the leg).  New *alias command allows '-' to be
	  mapped to '..' to match pocket topo conventions.  3d file format now
	  support a 'WALL' station flag.

Tue Jun 04 12:19:31 GMT 2013  Olly Betts <olly@survex.com>

	* src/Makefile.am: Regenerate gradient.pov is gdtconvert changes.

Sun Jun 02 12:51:46 GMT 2013  Olly Betts <olly@survex.com>

	* src/readval.c,tests/: Report column numbers as well as line numbers
	  for more cavern errors and warnings.  Add more testcases.  If the
	  argument to *include has an opening double quote but the closing
	  double quote is missing, then skip trying to open the file.

Sun Jun 02 10:52:26 GMT 2013  Olly Betts <olly@survex.com>

	* src/cavernlog.cc: Remove useless extra quoting when invoking vim.

Fri May 31 13:51:16 GMT 2013  Olly Betts <olly@survex.com>

	* src/netskel.c: Use fputs not printf to write literal string to avoid
	  GCC format security warning (the string can never contain a '%' but
	  the compiler can't see that).

Fri May 31 13:08:01 GMT 2013  Olly Betts <olly@survex.com>

	* src/datain.c: Variable 'len' in compile_error_token was static for no
	  good reason.

Fri May 31 12:32:22 GMT 2013  Olly Betts <olly@survex.com>

	* src/mainfrm.cc,src/mainfrm.h: Skip anonymous stations.

Fri May 31 12:17:56 GMT 2013  Olly Betts <olly@survex.com>

	* src/,tests/: Anonymous stations no longer have a made up unique name,
	  and are marked with a new ANON flag in .3d files.

Mon May 27 11:24:18 GMT 2013  Olly Betts <olly@survex.com>

	* configure.ac: Update copyright date.

Sun May 26 13:05:34 GMT 2013  Olly Betts <olly@survex.com>

	* src/: New station flag SFLAGS_USED to mark a station as "used" so we
	  don't issue "unused fixed point" warnings about it - previously we
	  set 'shape' to be negative to indicate this, but that required us to
	  handle that whenever we looked at or updated shape.

Sun May 26 11:47:06 GMT 2013  Olly Betts <olly@survex.com>

	* configure.ac: Fix sizeof(wxChar) test to work for wx2.9.

Fri May 10 05:55:54 GMT 2013  Olly Betts <olly@survex.com>

	* configure.ac,src/gla-gl.cc,src/glbitmapfont.h: It seems we need to
	  include GL/gl.h before we can safely include GL/glext.h (at least on
	  Debian wheezy).

Fri May 10 05:43:09 GMT 2013  Olly Betts <olly@survex.com>

	* configure.ac: Fix wxChar test to work in a non-cross-compiled build.

Wed May 08 22:38:56 GMT 2013  Olly Betts <olly@survex.com>

	* configure.ac,src/glbitmapfont.cc: Check sizeof(wxChar) at configure
	  time, so we can avoid a warning when sizeof(wxChar)==2 (which is the
	  case under mingw).

Wed May 08 05:54:23 GMT 2013  Olly Betts <olly@survex.com>

	* lib/en_US.po,lib/survex.pot: Update.

Tue May 07 23:30:26 GMT 2013  Olly Betts <olly@survex.com>

	* src/aven.cc: Don't crash trying to report an error after the app
	  object has been created but before the frame window has.

Sun Jan 06 19:31:30 GMT 2013  Olly Betts <olly@survex.com>

	* doc/manual.sgml: "surface topology" -> "surface topography".

Sun Jan 06 08:07:22 GMT 2013  Olly Betts <olly@survex.com>

	* lib/Makefile.am: Remove launchpad-tarball target - changes now
	  get picked up by launchpad automatically via a bzr mirror of the
	  git repo.

Sun Jan 06 05:45:10 GMT 2013  Olly Betts <olly@survex.com>

	* lib/survex.pot,src/dump3d.c: Add --show-dates/-d to --help output.

Sun Jan 06 05:42:07 GMT 2013  Olly Betts <olly@survex.com>

	* lib/po-to-msg.pl: Fix matching quote check to really allow
	  for using  and  in a translation.

Sun Jan 06 05:23:48 GMT 2013  Olly Betts <olly@survex.com>

	* src/dump3d.c: Report img_STOP as STOP rather than CODE_0xffffffff.

Thu Jan 03 01:08:28 GMT 2013  Olly Betts <olly@survex.com>

	* src/: Use wxValidator to simplify keeping svxPrintDlg member
	  variables and fields in the dialog in sync.

Wed Jan 02 20:49:20 GMT 2013  Olly Betts <olly@survex.com>

	* src/gla-gl.cc,src/glbitmapfont.cc: Add checks for errors when reading
	  the font file.

Wed Jan 02 20:48:22 GMT 2013  Olly Betts <olly@survex.com>

	* configure.ac,src/img.c: Avoid warning about redeclaration of round().

Wed Jan 02 09:11:41 GMT 2013  Olly Betts <olly@survex.com>

	* src/readval.c: Whitespace tweak.

Wed Jan 02 09:10:57 GMT 2013  Olly Betts <olly@survex.com>

	* src/netartic.c: Use TSTBIT(w, x) instead of w & BIT(x).

Wed Jan 02 09:10:30 GMT 2013  Olly Betts <olly@survex.com>

	* src/listpos.c: Fix compiler warning.

Wed Jan 02 09:04:58 GMT 2013  Olly Betts <olly@survex.com>

	* lib/survex.pot,src/,tests/: Add support for anonymous stations,
	  which are indicated by a station name of '.'.

Sat Dec 29 18:50:07 GMT 2012  Olly Betts <olly@survex.com>

	* src/export.cc: Implement export of passage info for DXF (untested).

Sat Dec 29 05:29:31 GMT 2012  Olly Betts <olly@survex.com>

	* src/gfxcore.cc,src/printwx.cc,src/printwx.h: Default the export/print
	  settings for passage related things to the "tubes" setting in the
	  OpenGL view.

Sat Dec 29 05:11:20 GMT 2012  Olly Betts <olly@survex.com>

	* src/gfxcore.cc,src/gfxcore.h: Export of passage detail now works
	  before we have displayed tubes in the OpenGL view.

Sat Dec 29 05:09:54 GMT 2012  Olly Betts <olly@survex.com>

	* src/avenprcore.cc,src/avenprcore.h,src/printwx.cc: Do away with the
	  separate bool flags for each thing we can show in printing and export
	  and just use the "show_mask" flags.

Fri Dec 28 23:30:55 GMT 2012  Olly Betts <olly@survex.com>

	* lib/: Fill in new messages from existing translations where possible.

Fri Dec 28 21:03:33 GMT 2012  Olly Betts <olly@survex.com>

	* lib/: Merge from survex.pot to .po files.

Fri Dec 28 22:21:50 GMT 2012  Olly Betts <olly@survex.com>

	* lib/survex.pot: Update locations.

Fri Dec 28 22:19:14 GMT 2012  Olly Betts <olly@survex.com>

	* src/printwx.cc: Disable passage-related export options when in a
	  tilted view.  Hook up "Cross-sections" to printing on left and
	  right markers.

Fri Dec 28 06:30:17 GMT 2012  Olly Betts <olly@survex.com>

	* lib/survex.pot,src/: Add options to export dialog to control showing
	  cross-sections, walls and passages.

Fri Dec 28 05:53:56 GMT 2012  Olly Betts <olly@survex.com>

	* src/: Implement exporting of passages (ticket#4) for SVG.  Currently
	  it is always on (I'll update the Export dialog shortly).

Wed Dec 26 22:21:10 GMT 2012  Olly Betts <olly@survex.com>

	* lib/survex.pot,src/commands.c,src/readval.c,src/readval.h,tests/: Add
	  new warning if *begin SURVEY has a separator character in SUVERY.

Wed Dec 26 07:29:42 GMT 2012  Olly Betts <olly@survex.com>

	* lib/en_US.po: Fix clashing menu accelerator.

Wed Dec 26 01:46:06 GMT 2012  Olly Betts <olly@survex.com>

	* src/readval.c: Fix typo in previous change.

Tue Dec 25 23:04:06 GMT 2012  Olly Betts <olly@survex.com>

	* src/readval.c,tests/: Demote errors about invalid dates to warnings,
	  since we've accepted *date for ages without any checks on the value,
	  and so existing datasets probably contain invalid dates and dates in
	  other formats.  (ticket#19)

Tue Dec 25 22:03:20 GMT 2012  Olly Betts <olly@survex.com>

	* src/listpos.c: But always leave space for at least 4 digits, so we
	  give exactly the same output as before unless we need the extra
	  width.

Mon Dec 24 08:44:04 GMT 2012  Olly Betts <olly@survex.com>

	* src/listpos.c: Adjust width of node stats table to fit longest count.

Sun Dec 23 07:20:53 GMT 2012  Olly Betts <olly@survex.com>

	* lib/survex.pot: Wrap TRANSLATORS comment.

Sun Dec 23 07:20:19 GMT 2012  Olly Betts <olly@survex.com>

	* lib/survex.pot: Add missing "c-format" annotation.

Sun Dec 23 07:19:22 GMT 2012  Olly Betts <olly@survex.com>

	* lib/sk.po: Resolve a couple of inconsistencies in translation of
	  similar messages by asking Martin Sluka.

Sun Dec 23 05:36:38 GMT 2012  Olly Betts <olly@survex.com>

	* NEWS: Update from ChangeLog.

Thu Dec 20 04:31:22 GMT 2012  Olly Betts <olly@survex.com>

	* lib/zh_CN.po: Translate another message.

Thu Dec 20 03:28:02 GMT 2012  Olly Betts <olly@survex.com>

	* lib/zh_CN.po: Add space after colon.

Thu Dec 20 03:26:15 GMT 2012  Olly Betts <olly@survex.com>

	* lib/survex.pot: Add more TRANSLATORS comments about terminology.

Thu Dec 20 03:25:45 GMT 2012  Olly Betts <olly@survex.com>

	* lib/it.po: Merge two new translations from launchpad.

Thu Dec 20 03:24:52 GMT 2012  Olly Betts <olly@survex.com>

	* lib/en_US.po: Correct "leg" to "shot" in a few places, and translate
	  "Anticlockwise" to "Counterclockwise".

Wed Dec 19 10:41:55 GMT 2012  Olly Betts <olly@survex.com>

	* lib/po-to-msg.pl: Remove commented out code to find uses, which is
	  now handled by a separate script.

Wed Dec 19 10:36:59 GMT 2012  Olly Betts <olly@survex.com>

	* lib/po-to-msg.pl: Update to read message numbers from references.

Tue Dec 18 12:00:40 GMT 2012  Olly Betts <olly@survex.com>

	* src/gla-gl.cc,src/gla.h: Update to use wxGLContext to avoid
	  deprecation warnings from wx 2.9.

Tue Dec 18 11:40:34 GMT 2012  Olly Betts <olly@survex.com>

	* src/moviemaker.cc: Fix unused parameter warnings when we don't have
	  libavformat available.

Tue Dec 18 11:39:40 GMT 2012  Olly Betts <olly@survex.com>

	* src/glbitmapfont.cc: Fix warning about ambiguous else from wxLogError
	  macro.

Tue Dec 18 11:32:32 GMT 2012  Olly Betts <olly@survex.com>

	* INSTALL,lib/INSTALL.OSX,src/,survex.spec.in: Require at least
	  wxWidgets 2.8.0 - it was released just over 6 years ago now,
	  and the wx developers consider even 2.8 to be rather long in
	  the tooth.  I haven't test build with wx 2.6 for more than a year
	  and it's no longer packaged for Debian.  Dropping support for
	  older wx allows a number of workarounds to be removed.

Tue Dec 18 11:05:24 GMT 2012  Olly Betts <olly@survex.com>

	* src/: Fix uses of some wx features which are deprecated in wx2.9.

Tue Dec 18 10:50:28 GMT 2012  Olly Betts <olly@survex.com>

	* src/gfxcore.cc,src/gla-gl.cc,src/gla.h: Fix OnSize handling
	  so we can just call event.Skip() (which is the intended approach)
	  rather than explicitly calling the parent class OnSize() method
	  from the subclass OnSize() method.

Tue Dec 18 08:23:14 GMT 2012  Olly Betts <olly@survex.com>

	* src/aven.cc: Fix MSW build to not rely on a GCC extension.

Tue Dec 18 07:20:16 GMT 2012  Olly Betts <olly@survex.com>

	* lib/: Merge changes from template.

Tue Dec 18 07:06:41 GMT 2012  Olly Betts <olly@survex.com>

	* lib/,src/Makefile.am,src/gettexttomsg.pl: Eliminate po_codes and just
	  store the message numbers as the line number in a fake source
	  reference to file 'n'.

Tue Dec 18 04:13:18 GMT 2012  Olly Betts <olly@survex.com>

	* lib/po_codes,lib/survex.pot: Merge in updated source line numbers.

Tue Dec 18 04:11:09 GMT 2012  Olly Betts <olly@survex.com>

	* lib/extract-msgs.pl,src/Makefile.am: Don't include version in
	  'Project-Id-Version'.

Tue Dec 18 03:13:16 GMT 2012  Olly Betts <olly@survex.com>

	* lib/: Set Project-Id-Version to just "survex" - the version part just
	  complicates things unnecessarily for our usage.

Tue Dec 18 03:00:04 GMT 2012  Olly Betts <olly@survex.com>

	* tests/Makefile.am,tests/aven.tst: Add new testsuite script (aven.tst)
	  which currently has regression tests for the recently fixed segfault
	  when aven didn't have messages for the requested language.

Tue Dec 18 02:19:08 GMT 2012  Olly Betts <olly@survex.com>

	* src/message.c: Only use ASCII for the handful of hardcoded messages
	  we need for errors loading message files, as it's probably more
	  likely the wrong encoding will be set in such cases.

Tue Dec 18 02:02:57 GMT 2012  Olly Betts <olly@survex.com>

	* src/,tests/: Report column numbers as well as line numbers for some
	  cavern errors and warnings, and update aven's cavern log parser to
	  handle these.  Simplify handling of quantity lists to only recognise
	  'DEFAULT' as the first item.  Add more testcases, expand some
	  existing testcases, and expected output for more.

Mon Dec 17 22:19:21 GMT 2012  Olly Betts <olly@survex.com>

	* src/message.c: If we don't find the message file, only give an error
	  if it was specified with SURVEX_LANG, since that is an explicit
	  instruction to Survex, whereas LANG, LC_ALL and LC_MESSAGES are
	  essentially system "preferred locale" settings.
	* src/aven.cc: Fix reporting of errors from message.c not to crash if
	  the wxApp object hasn't yet been intitialised, and to convert the
	  character encoding correctly.

Mon Dec 17 22:17:00 GMT 2012  Olly Betts <olly@survex.com>

	* lib/Makefile.am: Install zh_CN (Chinese) messages.

Mon Dec 17 22:02:43 GMT 2012  Olly Betts <olly@survex.com>

	* lib/zh_CN.po: Reuse existing translation of "Presentation" for the
	  top level menu name - now all the whole menu bar is translated!

Mon Dec 17 11:07:00 GMT 2012  Olly Betts <olly@survex.com>

	* src/cavernlog.cc: Don't highlight a file:linenumber if there's no
	  message after it, which avoids highlighting the "Included from"
	  lines wrongly.

Mon Dec 17 11:04:36 GMT 2012  Olly Betts <olly@survex.com>

	* tests/: Rename testcase badinc3 to badinc4 and actually run it, and
	  add new badinc3 which tests multiple levels of *include.  Add expect
	  output for all the badinc testcases.

Mon Dec 17 11:01:02 GMT 2012  Olly Betts <olly@survex.com>

	* src/datain.c: Report the parent include files starting from the
	  outermost, as that's more logical when there are multiple levels
	  involved.

Mon Dec 17 10:39:14 GMT 2012  Olly Betts <olly@survex.com>

	* lib/fr.po: Add translation for new message, adapted from two similar
	  existing messages.

Mon Dec 17 10:37:12 GMT 2012  Olly Betts <olly@survex.com>

	* lib/it.po: Merge a translation from launchpad.

Mon Dec 17 09:11:09 GMT 2012  Olly Betts <olly@survex.com>

	* lib/: Merge changes from .pot to .po files.

Mon Dec 17 06:37:10 GMT 2012  Olly Betts <olly@survex.com>

	* lib/,src/datain.c: Move the <filename>:<line> into the message when
	  reporting the include route to the file with the error in it, which
	  allows a more natural translation into German.

Mon Dec 17 03:26:40 GMT 2012  Olly Betts <olly@survex.com>

	* .gitignore: Add src/dump3d.

Mon Dec 17 03:24:22 GMT 2012  Olly Betts <olly@survex.com>

	* lib/po_codes,lib/po_codes_dead: Prune strings we aren't using and are
	  probably unlikely to use again into a new file po_codes_dead, so that
	  translators don't get presented with them to translate.
	* lib/survex.pot: Regenerate.

Tue Dec 11 23:07:31 GMT 2012  Olly Betts <olly@survex.com>

	* src/datain.c,tests/: We want to warn if there's a clino reading which
	  it would be impossible to have read from the instrument (e.g. on a
	  -90 to 90 degree scale you can't read "96" (it's probably a typo for
	  "69").  However, the gradient reading from a topofil is typically in
	  the range 0 to 180, with 90 being horizontal.  Really we should allow
	  the valid range to be specified, but for now we infer it from the
	  zero error - if this is within 45 degrees of 90 then we assume the
	  range is 0 to 180.

Tue Dec 11 22:29:35 GMT 2012  Olly Betts <olly@survex.com>

	* lib/po-to-msg.pl: Report unused message numbers.

Tue Dec 11 22:22:20 GMT 2012  Olly Betts <olly@survex.com>

	* lib/po_codes,lib/survex.pot,src/commands.c,tests/: If the scale
	  factor in *calibrate is zero, flag that as an error - it doesn't
	  make sense and probably means someone reversed the arguments to
	  *calibrate.

Mon Dec 03 06:52:22 GMT 2012  Olly Betts <olly@survex.com>

	* src/readval.c: If we were expecting a numeric field and instead get
	  something which starts with '+', '-', or '.' but which isn't a
	  number, then fix the error to include that character in the token
	  reported.
	* tests/: Add regression test badreadingdotplus.

Mon Dec 03 06:50:51 GMT 2012  Olly Betts <olly@survex.com>

	* tests/cavern.tst,tests/equatenosuchstn.out,tests/surveytypo.out: Stop
	  trimming output header when we get to copyright line, as there may be
	  an error before the first blank line.

Mon Dec 03 06:34:20 GMT 2012  Olly Betts <olly@survex.com>

	* tests/badinc3.svx: Add new test file, missed in earlier commit.

Mon Dec 03 04:18:34 GMT 2012  Olly Betts <olly@survex.com>

	* src/cavern.c: Use /* */ comments, not //.

Mon Dec 03 04:16:40 GMT 2012  Olly Betts <olly@survex.com>

	* tests/Makefile.am: Add new test suite files.

Mon Dec 03 04:13:32 GMT 2012  Olly Betts <olly@survex.com>

	* src/datain.c,tests/cavern.tst: Fix handling after reporting an error
	  for a bad reading in passage data to not then complain "End of line
	  not blank" but instead check other readings on the same line.
	* tests/passagebad.svx: Add regression testcase.

Mon Dec 03 02:55:33 GMT 2012  Olly Betts <olly@survex.com>

	* tests/cavern.tst,tests/extend.tst,tests/smoke.tst: Add valgrind hooks
	  to the rest of the tests scripts.

Mon Dec 03 02:53:56 GMT 2012  Olly Betts <olly@survex.com>

	* configure.ac: Fix package name, broken during modernisation of
	  autotools use.

Mon Dec 03 02:32:01 GMT 2012  Olly Betts <olly@survex.com>

	* tests/: Run tools under valgrind in most test scripts if VALGRIND is
	  set.

Mon Dec 03 02:29:56 GMT 2012  Olly Betts <olly@survex.com>

	* tests/smoke.tst: Remove variables which aren't ever used.

Mon Dec 03 02:28:45 GMT 2012  Olly Betts <olly@survex.com>

	* tests/: Make all test scripts report "Test passed" at the end if
	  VERBOSE is set and all testcases in the script passed.

Mon Dec 03 01:59:04 GMT 2012  Olly Betts <olly@survex.com>

	* tests/cavern.tst: If VALGRIND is set, run cavern under valgrind and
	  fail the test if there's an error.

Mon Dec 03 01:29:39 GMT 2012  Olly Betts <olly@survex.com>

	* src/datain.c: Refactor to avoid duplicating code for handling clino
	  and backclino.

Mon Dec 03 01:29:05 GMT 2012  Olly Betts <olly@survex.com>

	* src/datain.c: Check r is valid before using it at all.

Sun Dec 02 23:48:05 GMT 2012  Olly Betts <olly@survex.com>

	* src/str.c,src/str.h: Inline s_zero() and s_free() since they should
	  optimise down to similar or less code than a function call would.

Sun Dec 02 23:47:21 GMT 2012  Olly Betts <olly@survex.com>

	* src/datain.c: s_zero() on a NULL pointer is a no-op, so remove.

Sun Dec 02 22:53:34 GMT 2012  Olly Betts <olly@survex.com>

	* lib/de_CH.po: Consistently use Swiss quoting style.

Sun Dec 02 22:51:53 GMT 2012  Olly Betts <olly@survex.com>

	* src/readval.c: If we're about to longjmp to jbSkipLine, then we can
	  just call compile_error() instead of compile_error_skip().

Sun Dec 02 22:40:07 GMT 2012  Olly Betts <olly@survex.com>

	* src/datain.c: Always skip the current line if we longjmp to
	  jbSkipLine.
	* tests/cavern.tst,tests/skipafterbadomit.svx: We weren't skipping
	  after complaining about OMIT for a required reading, which the
	  change to always skip fixes, so add a regression test for that.

Sat Dec 01 23:42:22 GMT 2012  Olly Betts <olly@survex.com>

	* src/readval.c: Add a "const".

Fri Nov 30 00:31:16 GMT 2012  Olly Betts <olly@survex.com>

	* lib/it.po,lib/sk.po: Merge more updates from launchpad.

Wed Nov 28 06:11:11 GMT 2012  Olly Betts <olly@survex.com>

	* NEWS: Update from ChangeLog.

Wed Nov 28 05:02:26 GMT 2012  Olly Betts <olly@survex.com>

	* lib/de.po: A few more translations from launchpad.

Wed Nov 28 01:56:49 GMT 2012  Olly Betts <olly@survex.com>

	* lib/,src/sorterr.c: Change "HOW MANY" to "HOW_MANY" to make it
	  clearer this is a placeholder for one argument.

Wed Nov 28 01:52:16 GMT 2012  Olly Betts <olly@survex.com>

	* src/message.c: Don't force Latin 1 if setlocale(LC_MESSAGES, ...)
	  fails.

Wed Nov 28 01:51:11 GMT 2012  Olly Betts <olly@survex.com>

	* src/message.c: Transliterate  and  to " if we don't have them in
	  the current character set (previously we mapped them to << and >>).

Wed Nov 28 01:00:53 GMT 2012  Olly Betts <olly@survex.com>

	* lib/: Merge translations from launchpad.

Wed Nov 28 00:44:36 GMT 2012  Olly Betts <olly@survex.com>

	* lib/de_CH.po: Fill gaps from de.po.

Wed Nov 28 00:44:05 GMT 2012  Olly Betts <olly@survex.com>

	* lib/de.po: Merge in new "TRANSLATORS" comments.

Wed Nov 28 00:43:39 GMT 2012  Olly Betts <olly@survex.com>

	* lib/es.po,lib/fr.po,lib/it.po: Merge translations from launchpad.

Wed Nov 28 00:11:07 GMT 2012  Olly Betts <olly@survex.com>

	* lib/pt_BR.po: Merge translations from launchpad.

Wed Nov 28 00:00:18 GMT 2012  Olly Betts <olly@survex.com>

	* lib/po-to-msg.pl: Add FIXME to only check % formats for messages
	  which have the "c-format" flag set.

Tue Nov 27 23:57:25 GMT 2012  Olly Betts <olly@survex.com>

	* lib/po-to-msg.pl: Fix quote check to handle  vs .

Tue Nov 27 23:40:06 GMT 2012  Olly Betts <olly@survex.com>

	* lib/de.po,lib/po_codes,lib/survex.pot: Reorder messages so the ones
	  in the "View" menu are together in order.  Adjust menu accelerators
	  for the German translation to avoid clashes in the View menu.

Tue Nov 27 23:14:05 GMT 2012  Olly Betts <olly@survex.com>

	* lib/de.po: Merge more updates from launchpad.

Tue Nov 27 22:30:36 GMT 2012  Olly Betts <olly@survex.com>

	* lib/de.po: Merge updates from launchpad.

Wed Nov 14 05:50:47 GMT 2012  Olly Betts <olly@survex.com>

	* lib/fr.po: Merge in new translator comments.

Sun Nov 04 21:26:29 GMT 2012  Olly Betts <olly@survex.com>

	* lib/sk.po: Merge changes from Martin Sluka.

Sun Nov 04 21:26:01 GMT 2012  Olly Betts <olly@survex.com>

	* lib/ca.po: Merge in TRANSLATOR comments.

Sun Nov 04 21:25:40 GMT 2012  Olly Betts <olly@survex.com>

	* lib/fr.po: Fix clashing menu accelerator.

Fri Nov 02 04:02:16 GMT 2012  Olly Betts <olly@survex.com>

	* NEWS: Update from ChangeLog.

Fri Nov 02 03:58:12 GMT 2012  Olly Betts <olly@survex.com>

	* lib/mailmsgs.pl: Remove obsolete script.
	* lib/Makefile.am,lib/po-to-msg.pl: Remove references to *.todo, which
	  we no longer generate.

Fri Nov 02 03:46:59 GMT 2012  Olly Betts <olly@survex.com>

	* lib/survex.pot: Add another TRANSLATORS comment.

Fri Nov 02 03:25:52 GMT 2012  Olly Betts <olly@survex.com>

	* lib/survex.pot: Add TRANSLATORS comments to clarify messages which
	  Eric asked about.

Fri Nov 02 03:06:00 GMT 2012  Olly Betts <olly@survex.com>

	* lib/: Merge translation updates.

Fri Nov 02 00:32:35 GMT 2012  Olly Betts <olly@survex.com>

	* src/guicontrol.cc,src/mainfrm.cc: On OS X, F11 is used by the desktop
	  so change the menu shortcut for "Full Screen Mode" to be the OS X
	  standard shortcut Shift-Command-F.

Sun Oct 28 04:21:27 GMT 2012  Olly Betts <olly@survex.com>

	* lib/sk.po: Merge updates from Martin Sluka.

Mon Oct 15 04:19:57 GMT 2012  Olly Betts <olly@survex.com>

	* Makefile.am,configure.ac: Modern automake seems to cope with files
	  required by GNU being generated during the build, so we no longer
	  need to use the "foreign" automake mode.  Also use -Werror with
	  automake.

Mon Oct 15 02:28:46 GMT 2012  Olly Betts <olly@survex.com>

	* src/Makefile.am: Remove workaround for GCC 2.95 failing to compile
	  gfxcore.cc - GCC 2.95 is obsolete now.

Mon Oct 15 02:27:04 GMT 2012  Olly Betts <olly@survex.com>

	* src/Makefile.am: Use AM_CPPFLAGS instead of obsolete INCLUDES.

Mon Oct 15 02:21:53 GMT 2012  Olly Betts <olly@survex.com>

	* Makefile.am,buildmacosx.sh,configure.ac,lib/mailmsgs.pl: Update
	  configure.ac from passing version to AM_INIT_AUTOMAKE to passing it
	  to AC_INIT, and fix places which grep out the version.

Mon Oct 15 02:08:23 GMT 2012  Olly Betts <olly@survex.com>

	* buildmacosx.sh,configure.ac,configure.in,doc/Makefile.am,
	  lib/mailmsgs.pl: Rename configure.in to configure.ac to make modern
	  autotools usage.

Thu Sep 27 10:41:56 GMT 2012  Olly Betts <olly@survex.com>

	* src/: Switch read_prefix_*() family of functions to be a single
	  read_prefix() function which tags a bitmask of flags.

Thu Sep 27 09:23:41 GMT 2012  Olly Betts <olly@survex.com>

	* lib/id.po: Resolve clashing menu accelerators.

Thu Sep 27 05:37:18 GMT 2012  Olly Betts <olly@survex.com>

	* src/namecompare.cc: Fix to build with wx2.8.

Thu Sep 27 05:25:49 GMT 2012  Olly Betts <olly@survex.com>

	* NEWS: Update from ChangeLog.

Thu Sep 27 05:12:22 GMT 2012  Olly Betts <olly@survex.com>

	* src/message.c: For determining character set on Unix, check LANG
	  after LC_ALL and LC_CTYPE.  For determining language, check LC_ALL
	  before LC_MESSAGES and LANG.

Thu Sep 27 04:48:34 GMT 2012  Olly Betts <olly@survex.com>

	* lib/id.po: Add more translations and fix marking of unused messages.

Thu Sep 27 04:07:24 GMT 2012  Olly Betts <olly@survex.com>

	* lib/Indonesian-5.1.11.isl,lib/Makefile.am,lib/id.po: Add start of
	  Indonesian translation from launchpad.

Thu Sep 27 03:56:22 GMT 2012  Olly Betts <olly@survex.com>

	* lib/: Merge translation updates from launchpad.

Thu Sep 27 00:31:24 GMT 2012  Olly Betts <olly@survex.com>

	* lib/: Remove scripts and data files which are no longer used.

Sat Sep 22 05:06:23 GMT 2012  Olly Betts <olly@survex.com>

	* src/mainfrm.cc,src/mainfrm.h: Don't run incremental search on every
	  key-press, as on a slow machine the short initial search(es) will
	  take a while but not be useful.  Instead set a flag, and actually
	  run the search when MainFrm next receives an idle event.

Fri Sep 21 06:24:32 GMT 2012  Olly Betts <olly@survex.com>

	* src/img.h: New leg flag img_FLAG_NOSURVEY.
	* src/netskel.c: Set img_FLAG_NOSURVEY for nosurvey legs.
	* src/dump3d.c: Report NOSURVEY leg flag.

Fri Sep 21 06:22:29 GMT 2012  Olly Betts <olly@survex.com>

	* src/Makefile.am: dump3d now needs date.c.

Wed Sep 19 22:12:35 GMT 2012  Olly Betts <olly@survex.com>

	* src/dump3d.c: Add --show-dates option.

Fri Sep 07 11:39:06 GMT 2012  Olly Betts <olly@survex.com>

	* src/namecompare.cc,src/namecompare.h: Add two new files which were
	  in the last release but I failed to commit.

Tue Aug 14 09:42:43 GMT 2012  Olly Betts <olly@survex.com>

	* lib/Makefile.am: Create de_DE.po as a symlink if it doesn't exist.

Mon May 28 16:56:27 GMT 2012  Olly Betts <olly@survex.com>

	* configure.in: -W no longer seems to cause problems with wxWidgets.

Mon May 28 16:49:37 GMT 2012  Olly Betts <olly@survex.com>

	* src/: Remove unused parameter names.

Sun May 27 12:24:17 GMT 2012  Olly Betts <olly@survex.com>

	* src/export.cc: Include "export.h".

Fri May 25 14:20:24 GMT 2012  Olly Betts <olly@survex.com>

	* tests/cavern.tst,test/equatenosuchstn.out: Drop line reporting time
	  taken when comparing output, as that can vary.
	* src/listpos.c,tests/equatenosuchstn.out: Move "Station X referred to
	  just once" warning after non-existent survey check.
	* src/,tests/: If survey isn't all connected, still run survey tree
	  checks and report errors and/or warnings which might suggest typo
	  locations.

Tue Feb 28 00:41:15 GMT 2012  Olly Betts <olly@survex.com>

	* tests/diffpos.tst: Force English messages for diffpos tests too.

Tue Feb 28 00:39:45 GMT 2012  Olly Betts <olly@survex.com>

	* tests/cavern.tst: Force English messages so comparing expected output
	  works whatever the current language setting.

Fri Feb 24 00:43:04 GMT 2012  Olly Betts <olly@survex.com>

	* tests/cavern.tst,tests/equatenosuchstn.out: Fix test failure due to
	  Survex version number appearing in expected output.

Thu Feb 23 22:34:52 GMT 2012  Olly Betts <olly@survex.com>

	* make_release: Link mingw build statically to avoid needing libgcc
	  DLL.

Wed Feb 22 23:39:25 GMT 2012  Olly Betts <olly@survex.com>

	* configure.in,src/gla-gl.cc: The Debian mingw-w64 packages lack
	  GL/glext.h so test for it in configure.

Wed Feb 22 23:29:29 GMT 2012  Olly Betts <olly@survex.com>

	* src/cavernlog.cc: Remove variable which is only assigned to and
	  never read.

Wed Feb 22 22:09:02 GMT 2012  Olly Betts <olly@survex.com>

	* NEWS,src/Makefile.am: Disable building findentrances by default
	  so I can get 1.2.6 out without further delays as it fixes processing
	  .svx files from aven under Mac OS X.

Wed Feb 22 11:35:40 GMT 2012  Olly Betts <olly@survex.com>

	* src/datain.c: Remove return type from data_normal() etc as we never
	  use it.

Wed Feb 22 05:11:53 GMT 2012  Olly Betts <olly@survex.com>

	* make_release: Update to work with Debian mingw-w64 packages.

Mon Feb 20 05:08:26 GMT 2012  Olly Betts <olly@survex.com>

	* NEWS,configure.in: Update for 1.2.6.

Sun Feb 19 10:48:37 GMT 2012  Olly Betts <olly@survex.com>

	* doc/3dformat.htm: Merge in some improvements from Mike McCombe.

Fri Feb 17 03:49:59 GMT 2012  Olly Betts <olly@survex.com>

	* src/message.c: Fix so that cavern run by aven finds its messages.

Thu Feb 16 01:36:54 GMT 2012  Olly Betts <olly@survex.com>

	* Makefile.am,survex.iss.in: Include JPG images in Innosetup installer.
	  (ticket#35)

Fri Jan 27 13:30:54 GMT 2012  Olly Betts <olly@survex.com>

	* lib/po_codes,lib/survex.pot,src/Makefile.am,src/findentrances.cc:
	  Make all messages in findentrances translatable.

Fri Jan 27 11:03:28 GMT 2012  Olly Betts <olly@survex.com>

	* lib/po_codes,lib/survex.pot,src/listpos.c,tests/: If we have a
	  reference to a station in a non-existent survey, give a helpful error
	  rather than saying the station hasn't been exported from the survey.

Tue Jan 24 23:03:10 GMT 2012  Olly Betts <olly@survex.com>

	* src/cavern.c: Remove TRANSLATE comment which has already been
	  addressed.

Tue Jan 24 10:56:14 GMT 2012  Olly Betts <olly@survex.com>

	* src/findentrances.cc: Add commenting noting precision of lat and lon.

Tue Jan 24 10:55:19 GMT 2012  Olly Betts <olly@survex.com>

	* src/findentrances.cc: Don't include carriage returns in .gpx output.

Tue Jan 24 10:42:41 GMT 2012  Olly Betts <olly@survex.com>

	* src/findentrances.cc: Add GPL licence boilerplate (Olaf OKed this in
	  <20120111115239.1b162450@ghost>).

Tue Jan 24 04:53:30 GMT 2012  Olly Betts <olly@survex.com>

	* src/Makefile.am,src/findentrances.cc: Build findentrances in the
	  buildsystem.

Tue Jan 24 04:41:03 GMT 2012  Olly Betts <olly@survex.com>

	* src/findentrances.cc: Update examples of usage to reflect "-s"
	  change.

Tue Jan 24 04:38:11 GMT 2012  Olly Betts <olly@survex.com>

	* src/findentrances.cc: Use string::assign() rather than constructing
	  a temporary string object and assigning that.

Tue Jan 24 04:35:25 GMT 2012  Olly Betts <olly@survex.com>

	* src/cmdline.c: Allow help argument to cmdline_init() to be NULL.

Tue Jan 24 04:35:04 GMT 2012  Olly Betts <olly@survex.com>

	* src/findentrances.cc: Support --help and --version options.

Tue Jan 24 04:27:15 GMT 2012  Olly Betts <olly@survex.com>

	* src/findentrances.cc: "using namespace std;"

Tue Jan 24 04:25:09 GMT 2012  Olly Betts <olly@survex.com>

	* src/findentrances.cc: Give error if required -d option is not
	  specified.

Tue Jan 24 04:19:29 GMT 2012  Olly Betts <olly@survex.com>

	* src/findentrances.cc: Other survex tools use -s for "limit operation
	  to this survey prefix" and just take the .3d file to operate on as
	  a command line argument, so for consistency just take the .3d file
	  as a command line argument here too.

Tue Jan 24 04:18:41 GMT 2012  Olly Betts <olly@survex.com>

	* src/findentrances.cc: Reindent with 4 space indent, tab width 8.

Tue Jan 24 04:12:19 GMT 2012  Olly Betts <olly@survex.com>

	* src/findentrances.cc: Add findentrances utility from Olaf.

Tue Jan 10 12:57:08 GMT 2012  Olly Betts <olly@survex.com>

	* lib/survex.pot,lib/zh_CN.po: Update.

Tue Jan 10 12:56:33 GMT 2012  Olly Betts <olly@survex.com>

	* lib/po_codes: Update locations.

Tue Jan 10 12:55:25 GMT 2012  Olly Betts <olly@survex.com>

	* lib/Makefile.am: When generating survex.pot from po_codes, drop the
	  codes from commented out messages too.

Mon Jan 09 12:21:28 GMT 2012  Olly Betts <olly@survex.com>

	* src/aven.cc: Fix to build with a non-Unicode wxWidgets library.
	  Patch from Olaf Kahler.

Fri Jan 06 11:47:59 GMT 2012  Olly Betts <olly@survex.com>

	* lib/: Touch all the .po files.

Fri Jan 06 11:47:10 GMT 2012  Olly Betts <olly@survex.com>

	* lib/touch-po.pl: New script to "touch" a .po file by updating
	  "PO-Revision-Date:".

Fri Jan 06 11:34:16 GMT 2012  Olly Betts <olly@survex.com>

	* lib/,src/Makefile.am,src/gettexttomsg.pl: Rename codes.po to po_codes
	  so it doesn't get picked up by tools looking for .po files.  Add
	  survex.pot to the repo so launchpad's auto translation syncing can
	  work.

Fri Jan 06 11:25:23 GMT 2012  Olly Betts <olly@survex.com>

	* make_release: Update to use git rather than SVN.

Fri Jan 06 11:19:37 GMT 2012  Olly Betts <olly@survex.com>

	* doc/HACKING.htm: Update mention of "SVN tree" to "source tree" as the
	  files mentioned are shipped in releases too.

Wed Jan 04 05:22:32 GMT 2012  Olly Betts <olly@survex.com>

	* lib/Makefile.am: Make the containing directory in the launchpad
	  tarball survex-trans.

Wed Jan 04 03:41:40 GMT 2012  Olly Betts <olly@survex.com>

	* src/dump3d.c: Add support for showing img_ERROR_INFO items.

Tue Jan 03 23:54:26 GMT 2012  Olly Betts <olly@survex.com>

	* lib/fr.po: Incorporate a translation from launchpad I'd previously
	  copied the English version of by mistake.  Attempt to correct
	  mistranslation of "survey file".

Tue Jan 03 13:21:09 GMT 2012  Olly Betts <olly@survex.com>

	* make_release: Need to set VERSION before we first use it!

Tue Jan 03 12:39:38 GMT 2012  Olly Betts <olly@survex.com>

	* NEWS,configure.in: Update for 1.2.5.

Tue Jan 03 12:11:14 GMT 2012  Olly Betts <olly@survex.com>

	* doc/survex.7.in: Make a few minor improvements to the text.

Tue Jan 03 12:07:31 GMT 2012  Olly Betts <olly@survex.com>

	* doc/survex.7.in: Update section in .TH macro to 7 too.

Tue Jan 03 12:04:54 GMT 2012  Olly Betts <olly@survex.com>

	* src/moviemaker.cc: Further fix.

Tue Jan 03 11:05:11 GMT 2012  Olly Betts <olly@survex.com>

	* configure.in,src/moviemaker.cc: Fix to work with newer ffmpeg.

Mon Jan 02 13:10:42 GMT 2012  Olly Betts <olly@survex.com>

	* src/gfxcore.cc: Draw measuring line above indicators rather than
	  underneath them.

Mon Jan 02 12:52:47 GMT 2012  Olly Betts <olly@survex.com>

	* src/message.c: Improve handling of messages before the message
	  subsystem is fully initialised.

Mon Jan 02 12:37:18 GMT 2012  Olly Betts <olly@survex.com>

	* src/Makefile.am,src/mainfrm.cc,src/namecmp.h: Add a version of the
	  station name comparing algorithm which works with the Unicode strings
	  directly, which fixes the issue with random ordering of the prefix
	  tree control in aven due to the converted strings we were comparing 
	  getting invalidated before we actually compared them.

Mon Jan 02 12:12:35 GMT 2012  Olly Betts <olly@survex.com>

	* src/gla-gl.cc: If glGenLists() fails, flag the list as NEVER_CACHE
	  as there's unlikely to be much point calling glGenLists() again.
	* src/gla-gl.cc,src/gla.h: Replace GLAList methods test_flag() and
	  InvalidateList() with an invalidate_if() method.

Mon Jan 02 11:54:38 GMT 2012  Olly Betts <olly@survex.com>

	* src/gfxcore.cc,src/gla-gl.cc: No need to invalidate the display lists
	  for the compass and clino when a new survey is loaded as they don't
	  depend on the survey data.

Mon Jan 02 11:17:51 GMT 2012  Olly Betts <olly@survex.com>

	* src/gla-gl.cc,src/gla.h: Rework list caching code to not call
	  glDeleteLists() and glGenLists() when a list is invalidated, as that
	  results in a fresh list number being allocated (at least with the
	  OpenGL implementation I'm using) which would eventually result in
	  aven hitting an assertion which is there to catch if we leak lists.

Sun Jan 01 13:29:03 GMT 2012  Olly Betts <olly@survex.com>

	* lib/Makefile.am: Put translation files in a sub-directory in the
	  tarball, and print the path to it so it can be cut-and-pasted to
	  upload to launchpad.

Sun Jan 01 10:48:01 GMT 2012  Olly Betts <olly@survex.com>

	* lib/it.po: Add "translation" for degree symbol.

Sun Jan 01 10:33:55 GMT 2012  Olly Betts <olly@survex.com>

	* lib/en_US.po: Merge template changes into en_US.po (no user-visible
	  changes).

Sun Jan 01 04:45:03 GMT 2012  Olly Betts <olly@survex.com>

	* make_release: Fix typo in filename to copy to webserver.  Show the
	  SHA1 checksums for the uploaded files.

Sun Jan 01 02:56:04 GMT 2012  Olly Betts <olly@survex.com>

	* NEWS,configure.in: Update for 1.2.4.

Sun Jan 01 02:53:03 GMT 2012  Olly Betts <olly@survex.com>

	* src/gfxcore.cc,src/gfxcore.h: Update copyright years.

Sun Jan 01 02:32:59 GMT 2012  Olly Betts <olly@survex.com>

	* src/gfxcore.cc,src/gfxcore.h: Improve labelling of depth colour key
	  to avoid sub-picometre precision on near-zero values (ticket#30).
	  We now always use metres or feet for the depth with a consistent
	  precision chosen from the depth range, and show the units below
	  the colour bar rather than after every value.
	* src/gfxcore.cc,src/gfxcore.h: When zooming way in, stay in metres
	  rather than switching to cm.  Say 1 mile rather than 1 miles.

Sat Dec 31 22:40:07 GMT 2011  Olly Betts <olly@survex.com>

	* src/gla-gl.cc: Fix not to make OpenGL calls before we've initialised
	  OpenGL, as this can cause segmentation faults (e.g. on Fedora 16).
	  Extend CHECK_GL_ERROR() to check that we don't make such calls in
	  future.

Sat Dec 31 22:37:47 GMT 2011  Olly Betts <olly@survex.com>

	* lib/es.po: Fix "Last-Translator:" header and merge in translation
	  of a message which is not currently used.

Sat Dec 31 15:04:23 GMT 2011  Olly Betts <olly@survex.com>

	* lib/: Merge remaining .po files.

Sat Dec 31 14:46:20 GMT 2011  Olly Betts <olly@survex.com>

	* lib/: Merge more .po files.

Sat Dec 31 14:24:25 GMT 2011  Olly Betts <olly@survex.com>

	* lib/ca.po,lib/de_CH.po,lib/en_US.po: Merge template changes into .po
	  files.

Sat Dec 31 13:13:55 GMT 2011  Olly Betts <olly@survex.com>

	* lib/fr.po: More translation updates from launchpad.

Sat Dec 31 12:51:53 GMT 2011  Olly Betts <olly@survex.com>

	* lib/ca.po,lib/sk.po: Fix unattached acute accents.

Sat Dec 31 12:45:36 GMT 2011  Olly Betts <olly@survex.com>

	* lib/: Update Project-Id-Version in .po files to match that in
	  survex.pot.

Sat Dec 31 12:43:52 GMT 2011  Olly Betts <olly@survex.com>

	* lib/Makefile.am: Add launchpad-tarball target to make a tarball
	  of the translations suitable for uploading to launchpad.

Sat Dec 31 12:23:39 GMT 2011  Olly Betts <olly@survex.com>

	* make_release: Echo the commands to copy the new release to the web
	  server at the end.
	* copy-prerelease,copy-release: Remove old scripts which are no longer
	  useful.

Sat Dec 31 11:13:11 GMT 2011  Olly Betts <olly@survex.com>

	* NEWS,configure.in: Update for 1.2.3.

Sat Dec 31 10:58:34 GMT 2011  Olly Betts <olly@survex.com>

	* src/mainfrm.cc: As we build the data structure, eliminate tubes
	  consisting of zero XSECTs as well as those consisting of just one.

Sat Dec 31 10:36:24 GMT 2011  Olly Betts <olly@survex.com>

	* src/img.h: Fix incorrect comment which claimed that img_XFLAG_END
	  was no longer used.
	* src/img.c: Use img_XFLAG_END constant rather than assuming it is
	  1.

Sat Dec 31 10:32:44 GMT 2011  Olly Betts <olly@survex.com>

	* src/extend.c: Copy the end markers for passage tubes, and preserve
	  left and right data for tubes (previously they were set to -1.0
	  which means "no info").

Sat Dec 31 08:17:08 GMT 2011  Olly Betts <olly@survex.com>

	* lib/extract-msgs.pl: New script to allow developers to update
	  codes.po from source code.
	* lib/Makefile.am: Ship it.
	* src/Makefile.am: Add rule to run it on all used sources and generate
	  newcodes.po which can then be compared with current version.

Sat Dec 31 08:14:06 GMT 2011  Olly Betts <olly@survex.com>

	* lib/codes.po: Update source locations, add a missing c-format marker.

Sat Dec 31 08:13:26 GMT 2011  Olly Betts <olly@survex.com>

	* src/mainfrm.cc: Fix a message in the source code which I missed in
	  the previous batch.

Sat Dec 31 08:12:23 GMT 2011  Olly Betts <olly@survex.com>

	* lib/po-to-msg.pl: Removed unused remains of check that messages are
	  in numerically ascending order, which we no longer want to enforce.

Sat Dec 31 07:48:20 GMT 2011  Olly Betts <olly@survex.com>

	* src/sorterr.c: Fix a message in the source code which I missed in
	  the previous batch.

Sat Dec 31 05:54:45 GMT 2011  Olly Betts <olly@survex.com>

	* src/message.c: Transliterate curly right single quote to ASCII
	  apostrophe if we can't represent it in the current character set.

Sat Dec 31 05:44:47 GMT 2011  Olly Betts <olly@survex.com>

	* lib/,src/: Use curly apostrophe instead of "'" in messages.  Correct
	  messages in source code which didn't match those in the message file
	  (no visible effects to end-users).
	* lib/codes.po: Update file:lineno locations where messages are used.
	* lib/po-to-msg.pl: Warn about different numbers of opening or
	  closing curly double quotes in message vs translation.
	* lib/ca.po,lib/es.po: Fix minor typo in one message caught by this
	  new warning.

Sat Dec 31 05:23:46 GMT 2011  Olly Betts <olly@survex.com>

	* NEWS: Update from ChangeLog.

Thu Dec 29 03:37:04 GMT 2011  Olly Betts <olly@survex.com>

	* lib/,src/: Use curly double quotes instead of "`" and "'" to
	  quote literals and filenames in messages.

Thu Dec 29 03:21:49 GMT 2011  Olly Betts <olly@survex.com>

	* src/message.c: Transliterate curly double quotes to ASCII straight
	  double quotes if we can't represent them in the current character
	  set.

Thu Dec 29 03:14:52 GMT 2011  Olly Betts <olly@survex.com>

	* src/message.c: Convert source code to UTF-8.

Thu Dec 29 00:52:44 GMT 2011  Olly Betts <olly@survex.com>

	* src/gla-gl.cc: Fix typo in CHECK_GL_ERROR() change in previous
	  commit.

Thu Dec 29 00:49:31 GMT 2011  Olly Betts <olly@survex.com>

	* src/gla-gl.cc: We already keep track of the GL canvas size in x_size
	  and y_size so use those rather than re-requesting them.

Wed Dec 28 11:45:40 GMT 2011  Olly Betts <olly@survex.com>

	* lib/fr.po: Merge in updated translations from launchpad.

Sun Nov 27 12:30:31 GMT 2011  Olly Betts <olly@survex.com>

	* src/tr.c,src/tr.h: Committing original versions of tr tiled
	  rendering code.

Thu Nov 24 12:59:24 GMT 2011  Olly Betts <olly@survex.com>

	* src/gfxcore.cc,src/gla-gl.cc,src/gla.h: Remove
	  GLACanvas::SetBackgroundColour() since we only ever set it to black
	  and opaque.

Thu Nov 24 12:28:07 GMT 2011  Olly Betts <olly@survex.com>

	* doc/TODO.htm: Add note to pick the fastest method for crosses/blobs
	  if multiple ones pass the visual fidelity check.

Thu Nov 24 12:27:33 GMT 2011  Olly Betts <olly@survex.com>

	* src/gla-gl.cc: Add disabled code to show the visual fidelity check on
	  stdout.

Thu Nov 24 12:24:49 GMT 2011  Olly Betts <olly@survex.com>

	* src/gla-gl.cc: Fix screenshot and movie generation to read from the
	  front buffer in the usual case of being double buffered.

Thu Nov 24 12:02:22 GMT 2011  Olly Betts <olly@survex.com>

	* src/gla-gl.cc: Add CHECK_GL_ERROR for glReadPixels calls.

Thu Nov 24 11:59:23 GMT 2011  Olly Betts <olly@survex.com>

	* src/gla-gl.cc: Undefine o and I after we're done with them.

Thu Nov 24 11:56:57 GMT 2011  Olly Betts <olly@survex.com>

	* src/gla-gl.cc: Fix expected cross shape so don't always reject using 
	  texture mapping to draw crosses.

Wed Nov 02 15:40:45 GMT 2011  Olly Betts <olly@survex.com>

	* src/mainfrm.cc: Don't create the help menu at all on OS X.

Wed Nov 02 15:38:54 GMT 2011  Olly Betts <olly@survex.com>

	* lib/INSTALL.OSX: Update to reflect current status.

Wed Nov 02 15:37:58 GMT 2011  Olly Betts <olly@survex.com>

	* src/gfxcore.cc: Remove duplicate call to PopupMenu().

Tue Nov 01 23:24:23 GMT 2011  Olly Betts <olly@survex.com>

	* src/namecmp.h: Fix to build with wx 2.9.2.

Tue Nov 01 23:17:52 GMT 2011  Olly Betts <olly@survex.com>

	* src/gfxcore.cc: Remove assertion which uses deprecated wx method.

Tue Nov 01 23:14:09 GMT 2011  Olly Betts <olly@survex.com>

	* src/mainfrm.cc,src/mainfrm.h: Make separator wxChar not int.

Tue Nov 01 18:54:32 GMT 2011  Olly Betts <olly@survex.com>

	* lib/sk.po: Update a translation from launchpad.

Tue Nov 01 18:32:24 GMT 2011  Olly Betts <olly@survex.com>

	* src/log.cc,src/log.h: Fix to build with wx 2.9.2.

Tue Nov 01 18:15:20 GMT 2011  Olly Betts <olly@survex.com>

	* src/export.cc: Fix to build with wx 2.9.2.

Tue Nov 01 18:14:13 GMT 2011  Olly Betts <olly@survex.com>

	* src/aboutdlg.cc: Fix code conditionally used on 2.9.2 and later to
	  actually compile.

Tue Nov 01 18:12:42 GMT 2011  Olly Betts <olly@survex.com>

	* src/gfxcore.cc: Fix how we pass on events from right-click menus of
	  indicators.  The previous code seemed to work, but wasn't correct
	  as highlighted by trying to build it with 2.9.2 which now refuses
	  to build to avoid people getting this wrong.

Tue Nov 01 18:11:55 GMT 2011  Olly Betts <olly@survex.com>

	* src/aven.h: Need to forward declare class wxPageSetupDialogData for
	  wx 2.9.2.

Tue Nov 01 18:11:22 GMT 2011  Olly Betts <olly@survex.com>

	* src/glbitmapfont.h: Fix to build with wx 2.9.2.

Tue Nov 01 18:10:51 GMT 2011  Olly Betts <olly@survex.com>

	* src/cavernlog.cc: Fix to build with wx 2.9.2.

Tue Nov 01 18:06:12 GMT 2011  Olly Betts <olly@survex.com>

	* lib/INSTALL.OSX,src/mainfrm.cc: Make the green colour used for
	  entrances in the survey tree the same (slightly darker than
	  before) green used for the entrance blobs.

Tue Nov 01 18:04:47 GMT 2011  Olly Betts <olly@survex.com>

	* src/gla-gl.cc: Fix warning when building with wx2.9.2.

Tue Nov 01 12:32:30 GMT 2011  Olly Betts <olly@survex.com>

	* src/printwx.cc: Fix Y coordinates of surface surveys on printouts.
	  (Closes #32)

Sun Oct 23 06:20:14 GMT 2011  Olly Betts <olly@survex.com>

	* lib/Info.plist.in: Remove spurious blank lines from licence text
	  in OS X "Get Info".

Sat Oct 22 17:39:07 GMT 2011  Olly Betts <olly@survex.com>

	* doc/TODO.htm: Opening dialogs while in full screen mode now works
	  better in wxGTK.

Sat Oct 22 17:36:01 GMT 2011  Olly Betts <olly@survex.com>

	* lib/INSTALL.OSX: Processing .svx files from aven now works.

Sat Oct 22 07:27:43 GMT 2011  Olly Betts <olly@survex.com>

	* src/printwx.h: Update comment - Mac OS X does indeed provide its own
	  preview menu.

Fri Oct 21 23:47:16 GMT 2011  Olly Betts <olly@survex.com>

	* src/cavernlog.cc: Fix openiof .svx file when user clicks on cavern
	  warning or error.

Fri Oct 21 23:43:21 GMT 2011  Olly Betts <olly@survex.com>

	* buildmacosx.sh: Include a hardlinked cavern alongside aven in
	  the app so that processing .svx files in aven works.

Wed Oct 19 22:51:18 GMT 2011  Olly Betts <olly@survex.com>

	* tests/diving.pos,tests/diving.svx: Add test coverage for interleaved
	  diving data.

Wed Oct 19 13:04:25 GMT 2011  Olly Betts <olly@survex.com>

	* tests/diving.pos,tests/diving.svx: Add testcase for diving data
	  with topofil-style distance.

Wed Oct 12 03:45:13 GMT 2011  Olly Betts <olly@survex.com>

	* src/aboutdlg.cc: Report the version of the library we're actually
	  running with if built against wx >= 2.9.2.  Make it clear that the
	  the version reported is the version built with for wx < 2.9.2.

Wed Oct 12 03:06:05 GMT 2011  Olly Betts <olly@survex.com>

	* lib/make-pixel-font,src/glbitmapfont.cc,src/glbitmapfont.h: Space the
	  glyphs to leave a one pixel gap either side of each one (so two
	  between adjacent glyphs).  Mostly this reduces the horizontal width,
	  but it adds a pixel for characters like "m" and two in a few cases.

Fri Oct 07 07:20:55 GMT 2011  Olly Betts <olly@survex.com>

	* src/glbitmapfont.cc,src/glbitmapfont.h: Support plotting Unicode
	  character points > 256 on the survey pane by lazily loading the
	  data for them from the font file and plotting them with a direct
	  call to glBitmap() rather than using a display list.

Fri Oct 07 04:09:58 GMT 2011  Olly Betts <olly@survex.com>

	* lib/make-pixel-font: Fix .pixelfont file to correctly handle
	  characters wider than 8 pixels when run on a little-endian platform.

Thu Oct 06 13:23:05 GMT 2011  Olly Betts <olly@survex.com>

	* NEWS: Another update for 1.2.2.

Thu Oct 06 13:21:20 GMT 2011  Olly Betts <olly@survex.com>

	* src/gfxcore.cc: Fix grid not to disappear when blobs are turned on
	  if blobs are drawn using lines.

Thu Oct 06 13:17:19 GMT 2011  Olly Betts <olly@survex.com>

	* NEWS,configure.in: Update for 1.2.2.

Thu Oct 06 12:11:20 GMT 2011  Olly Betts <olly@survex.com>

	* src/printwx.cc: Fix to calculate the scale required for "One page"
	  right before we calculate how many pages are required, so we don't
	  end up something other than 1x1 being shown when the user changes
	  settings.

Thu Oct 06 12:07:10 GMT 2011  Olly Betts <olly@survex.com>

	* src/avenprcore.cc: The info box is now always 30mm high (if present)
	  so update the code which picks a scale and which decides how many
	  pages are required to use this height.

Thu Oct 06 11:34:51 GMT 2011  Olly Betts <olly@survex.com>

	* src/printwx.h: SomethingChanged() method doesn't need to be public,
	  so make it private.

Thu Oct 06 04:13:24 GMT 2011  Olly Betts <olly@survex.com>

	* src/gettexttomsg.pl: Update for the message.txt -> codes.po change.

Thu Oct 06 03:01:45 GMT 2011  Olly Betts <olly@survex.com>

	* src/gfxcore.cc: Passage tubes can stick out above the highest survey
	  station or below the lowest, so clamp the value used to calculate
	  the colour in these cases, like we already do elsewhere.

Thu Oct 06 02:52:13 GMT 2011  Olly Betts <olly@survex.com>

	* src/gfxcore.cc: Avoid a different assertion failure due to rounding
	  differences.

Thu Oct 06 02:49:03 GMT 2011  Olly Betts <olly@survex.com>

	* src/glbitmapfont.cc,src/glbitmapfont.h: Actually add the new
	  glBitmap-based font code.

Thu Oct 06 02:36:47 GMT 2011  Olly Betts <olly@survex.com>

	* survex.iss.in: Update for font changes.

Thu Oct 06 02:35:41 GMT 2011  Olly Betts <olly@survex.com>

	* Makefile.am,buildmacosx.sh,lib/Makefile.am,lib/afm2txf.pl,
	  lib/make-pixel-font,src/: Replace the textured-mapped font drawing
	  with an approach based on glBitmap.  This doesn't suffer from the
	  character alignment issues which the textured-mapped fonts had,
	  and is actually significantly faster on some machines.  The current
	  font used is (mostly) fixed-width, but this isn't an inherent
	  limitation - it was just the easiest font data to convert to a
	  usable format.

Wed Oct 05 13:49:15 GMT 2011  Olly Betts <olly@survex.com>

	* src/gfxcore.cc: Avoid assertion failure due to rounding differences.

Wed Oct 05 08:19:46 GMT 2011  Olly Betts <olly@survex.com>

	* src/printwx.cc: Fix not to pass wxString through varargs (issue
	  introduced in the previous commit).

Tue Oct 04 04:49:19 GMT 2011  Olly Betts <olly@survex.com>

	* src/printwx.cc: Use degree sign from message file rather than a
	  literal one.

Tue Oct 04 04:08:57 GMT 2011  Olly Betts <olly@survex.com>

	* src/message.c: If degree sign isn't available, transliterate it to
	  'dg' rather than skipping it.

Tue Oct 04 03:59:29 GMT 2011  Olly Betts <olly@survex.com>

	* lib/codes.po,src/gfxcore.cc,src/mainfrm.cc: Fix message code 344
	  which should have been a degree sign but got lost in the format
	  change for 1.2.0 and then got reassigned in 1.2.1.  Externally, this
	  means that bearing in the status bar now have a degree sign after
	  them if they are in degrees rather than nothing (1.2.0) or "&Hide
	  Compass" (1.2.1).

Tue Oct 04 02:55:11 GMT 2011  Olly Betts <olly@survex.com>

	* NEWS,configure.in: Update for 1.2.1.

Tue Oct 04 02:45:47 GMT 2011  Olly Betts <olly@survex.com>

	* src/Makefile.am: Don't ship the removed hand_mask.xpm.

Tue Oct 04 02:44:37 GMT 2011  Olly Betts <olly@survex.com>

	* src/gfxcore.cc: Sort out inverted cursor mask on __WXMSW__.
	* src/hand.xbm: Invert the dragging hand cursor black vs white so it
	  better matches the other cursors.

Mon Oct 03 23:42:00 GMT 2011  Olly Betts <olly@survex.com>

	* src/printwx.cc: Add back svxPrintout methods GetPageInfo() and
	  HasPage() which are actually virtual methods called by the parent
	  class.

Mon Oct 03 02:40:56 GMT 2011  Olly Betts <olly@survex.com>

	* lib/Makefile.am: Fix check of .po files not to create messages.mo.

Mon Oct 03 02:22:55 GMT 2011  Olly Betts <olly@survex.com>

	* lib/Makefile.am: Fix new translation checking rules to work in a
	  VPATH build.

Mon Oct 03 02:12:23 GMT 2011  Olly Betts <olly@survex.com>

	* lib/de.po,lib/de_CH.po,lib/sk.po: Fix classes menu accelerators.

Mon Oct 03 02:00:38 GMT 2011  Olly Betts <olly@survex.com>

	* lib/en_US.po: Fix problem with translation of new message.

Mon Oct 03 00:50:52 GMT 2011  Olly Betts <olly@survex.com>

	* NEWS: Update from ChangeLog.

Sun Oct 02 20:25:01 GMT 2011  Olly Betts <olly@survex.com>

	* lib/,src/printwx.cc: Add mnemonics to the "Plan" and "Elevation"
	  buttons in the print dialog.

Sun Oct 02 12:17:34 GMT 2011  Olly Betts <olly@survex.com>

	* src/guicontrol.cc: Try processing F11 explicitly for __WXMAC__ to
	  avoiding getting stuck in full screen mode forever.

Sun Oct 02 12:01:25 GMT 2011  Olly Betts <olly@survex.com>

	* src/: Make the sign of the tilt angle for printouts consistent with
	  the sign in the UI.

Sun Oct 02 10:00:08 GMT 2011  Olly Betts <olly@survex.com>

	* lib/codes.po,lib/en_US.po,src/printwx.cc: On printouts, combine the
	  "Plan View"/"Elevation" info box field with the field which gives
	  the bearing and reduce the height on the info box by the removed
	  field, so it's now 3cm for plans and elevations, as for extended
	  elevations.  Report the tilt angle for tilted elevations which it
	  seems has been missing for ages (it's not in recent 1.0.x either).

Sat Oct 01 12:28:35 GMT 2011  Olly Betts <olly@survex.com>

	* src/printwx.cc: Fix commented message in source.

Sat Oct 01 12:11:37 GMT 2011  Olly Betts <olly@survex.com>

	* src/printwx.h: svxPrintDlg members don't need to be protected, so
	  make the private.

Sat Oct 01 11:28:34 GMT 2011  Olly Betts <olly@survex.com>

	* src/printwx.cc,src/printwx.h: When in plan view disable the "Plan"
	  button, and similarly for the "Elevation" button.

Sat Oct 01 11:20:03 GMT 2011  Olly Betts <olly@survex.com>

	* src/printwx.cc: Remove more unused methods and members.

Sat Oct 01 10:48:24 GMT 2011  Olly Betts <olly@survex.com>

	* src/avenprcore.cc,src/printwx.cc,src/printwx.h: Eliminate some unused
	  methods and member variables.

Sat Oct 01 00:33:24 GMT 2011  Olly Betts <olly@survex.com>

	* src/printwx.cc: Move the footer to start at the left side of the
	  page.

Fri Sep 30 23:49:24 GMT 2011  Olly Betts <olly@survex.com>

	* src/printwx.cc:svxPrintout::ShowPage() is an empty method, so just
	  remove it and all the code to calculate values to pass to it and
	  then call it.  This is just a left-over from the 1.0 printing code.

Fri Sep 30 13:40:29 GMT 2011  Olly Betts <olly@survex.com>

	* src/aven.cc,src/gfxcore.cc,src/mainfrm.cc: Use standard C++ true and
	  false instead of wx aliases TRUE and FALSE (which even wx seems to
	  have shifted away from using now).

Fri Sep 30 13:33:37 GMT 2011  Olly Betts <olly@survex.com>

	* src/printwx.cc: Tweak exact positioning of text to look nicer.

Fri Sep 30 03:49:16 GMT 2011  Olly Betts <olly@survex.com>

	* INSTALL: Mention building wxWidgets with --enable-unicode.  Mention
	  using sudo for the install.  Capitalise Survex when talking about
	  the package.
	+ doc/manual.sgml: Replace building from source instructions with a
	  pointer to the clearer instructions in INSTALL.  Make it clear that
	  installing with administrator rights applies to NT, 2000, XP *or
	  newer*.

Fri Sep 30 03:31:00 GMT 2011  Olly Betts <olly@survex.com>

	* src/guicontrol.cc: Don't disable a colour by option unless there's
	  no survey loaded.  It feels inconsistent now we are showing a key
	  even when there's no "interesting" data.

Fri Sep 30 03:28:59 GMT 2011  Olly Betts <olly@survex.com>

	* src/gfxcore.cc,src/gfxcore.h: The different colour keys get cached
	  so switching back to one that's already been shown for the current
	  survey doesn't redraw it and key_lowerleft wasn't getting updated.
	  We now track key_lowerleft for each key type separately.

Fri Sep 30 02:48:00 GMT 2011  Olly Betts <olly@survex.com>

	* src/gfxcore.cc: If "Colour by X" is selected, always show the colour
	  key, even if it only contains one colour, or just the entry for
	  white.

Thu Sep 29 22:33:06 GMT 2011  Olly Betts <olly@survex.com>

	* src/gfxcore.cc: Don't segfault on a flat survey.  Fix incorrect
	  addition and corresponding subtraction of GetDepthExtent() when
	  calculating splits over depth band boundaries.

Thu Sep 29 21:56:19 GMT 2011  Olly Betts <olly@survex.com>

	* src/gfxcore.cc,src/gla.h: Fix zoom in limit to be the same distance
	  regardless of the extent of the survey.

Thu Sep 29 20:57:41 GMT 2011  Olly Betts <olly@survex.com>

	* src/gfxcore.cc: Now that we don't have the key background, just
	  remove KEY_MARGIN entirely.

Thu Sep 29 20:37:09 GMT 2011  Olly Betts <olly@survex.com>

	* src/gfxcore.cc: Remove the dark grey background from the colour key
	  and just put a single pixel black border around the colours.  This
	  is more in keeping with the other controls, and means the colours
	  are now on a black background so more visually similar to the survey
	  legs.

Thu Sep 29 13:02:22 GMT 2011  Olly Betts <olly@survex.com>

	* src/mainfrm.cc: Fall back to ISO8859-1 if CP1252 fails to convert the
	  string.

Thu Sep 29 12:22:34 GMT 2011  Olly Betts <olly@survex.com>

	* src/gfxcore.cc: Upon loading a survey which lacks the information for
	  the current "Colour by" mode, don't change to "Colour by none" - we
	  already do no colouring and hide the key when there's nothing to
	  colour by, and it's annoying to have the actual mode changed if you
	  then load a survey which does have the information to colour by.

Thu Sep 29 12:20:07 GMT 2011  Olly Betts <olly@survex.com>

	* src/gfxcore.cc: Rename COLOUR_KEY_* constants to KEY_*.

Thu Sep 29 10:16:30 GMT 2011  Olly Betts <olly@survex.com>

	* src/gfxcore.cc: Make COLOUR_KEY_OFFSET_X and COLOUR_KEY_OFFSET_Y the
	  actual offsets, rather than taking COLOUR_KEY_MARGIN off them.

Thu Sep 29 05:08:20 GMT 2011  Olly Betts <olly@survex.com>

	* src/mainfrm.cc: Fix tooltip for open to say "survey file" not "3D
	  file".

Thu Sep 29 05:03:37 GMT 2011  Olly Betts <olly@survex.com>

	* src/gfxcore.cc,src/gfxcore.h,src/mainfrm.cc: Add right click menu to
	  the colour key too.

Wed Sep 28 14:47:15 GMT 2011  Olly Betts <olly@survex.com>

	* lib/afm2txf.pl: Add a kludge to prefer to round values up when
	  generating the .txf file which empirically results in better
	  horizontal spacing (this should be fixed properly, but this is
	  at least an easy improvement for now).

Wed Sep 28 14:00:14 GMT 2011  Olly Betts <olly@survex.com>

	* lib/afm2txf.pl: Rather than special-casing the character with
	  PostScript name 'space', just omit characters with zero width and
	  height from the texture.

Wed Sep 28 12:41:42 GMT 2011  Olly Betts <olly@survex.com>

	* lib/afm2txf.pl: Put the digits first in the font texture to help
	  ensure they are all on the same line and will exactly align
	  vertically when rendered - a slight discrepancy here is particularly
	  visible in the colour key legends and compass bearing.

Wed Sep 28 12:30:03 GMT 2011  Olly Betts <olly@survex.com>

	* lib/Makefile.am: Regenerate aven.txf if the script which generates it
	  has been modified.

Wed Sep 28 11:15:08 GMT 2011  Olly Betts <olly@survex.com>

	* lib/afm2txf.pl: Fix handling of PostScript character names which are
	  used by more than one Unicode value ("space" and "hyphen" are the
	  current examples).  This fixes the colour key for date to have dashes
	  in the dates.  Fix not to bother writing empty space into the texture
	  map for spaces - just set width and height to 0 and skip to the
	  width.
	* src/fnt.cc: Remove special case kludge for if space isn't defined,
	  which is no longer needed thanks to the above fix.

Wed Sep 28 10:19:07 GMT 2011  Olly Betts <olly@survex.com>

	* lib/,src/printwx.cc: Fix mixed up messages - the print dialog now
	  says "View" on the left subgroup of controls. Improve the display of
	  the bearing on printouts.  Add message for "Colour &Key" to
	  translations.

Wed Sep 28 02:02:09 GMT 2011  Olly Betts <olly@survex.com>

	* src/aven.cc: Fix #ifdef to #if in previous change.

Wed Sep 28 01:09:09 GMT 2011  Olly Betts <olly@survex.com>

	* src/aven.cc: Fix for non-Unicode build.

Mon Sep 26 12:25:59 GMT 2011  Olly Betts <olly@survex.com>

	* src/export.cc: PLT file output now handles spaces and control
	  characters in station names by escaping them with '%' as in URLs.

Mon Sep 26 11:58:05 GMT 2011  Olly Betts <olly@survex.com>

	* src/aventreectrl.cc: Improve comment about WXK_PRIOR and WXK_NEXT.

Mon Sep 26 11:51:01 GMT 2011  Olly Betts <olly@survex.com>

	* src/aventreectrl.cc: Pressing "Enter" on a station in the tree
	  control now centres the view on that station.

Mon Sep 26 11:42:17 GMT 2011  Olly Betts <olly@survex.com>

	* src/gfxcore.h,src/guicontrol.cc: Pressing "F5" forces all GLAList
	  objects to be invalidated and then forces a refresh of the display.
	  This is intended as a debugging aid - if pressing F5 changes the
	  display at all then there's a missing case where a list should
	  have been invalidated.

Mon Sep 26 11:35:29 GMT 2011  Olly Betts <olly@survex.com>

	* src/: Push survey pane size tracking down into GLACanvas, and
	  automatically track which lists should be invalidated on a
	  changes in the width or the height of the pane.

Mon Sep 26 10:44:22 GMT 2011  Olly Betts <olly@survex.com>

	* src/gla-gl.cc,src/gla.h: Move GLAList flags out of the header as they
	  are internal details.

Mon Sep 26 10:42:50 GMT 2011  Olly Betts <olly@survex.com>

	* src/gfxcore.cc,src/gfxcore.h: Cache the scale bar in a GLAList since
	  it often gets redrawn exactly the same - for example, when rotating,
	  panning, etc.

Mon Sep 26 09:40:32 GMT 2011  Olly Betts <olly@survex.com>

	* src/gfxcore.cc,src/gfxcore.h: More "colour key" related internal
	  nomenclature changes.

Mon Sep 26 09:34:01 GMT 2011  Olly Betts <olly@survex.com>

	* src/gfxcore.cc,src/gfxcore.h: Factor out the code to draw the colour
	  key into DrawColourKey().

Mon Sep 26 04:23:10 GMT 2011  Olly Betts <olly@survex.com>

	* src/gfxcore.cc: Apply COLOUR_KEY_OFFSET_Y by moving the point where
	  we plot the key rather than including it in the calculations of the
	  key's coordinates.

Mon Sep 26 04:17:16 GMT 2011  Olly Betts <olly@survex.com>

	* src/gfxcore.cc: Apply COLOUR_KEY_OFFSET_X by moving the point where
	  we plot the key rather than including it in the calculations of the
	  key's coordinates.

Sat Sep 24 13:15:22 GMT 2011  Olly Betts <olly@survex.com>

	* src/gfxcore.cc: Increase scale bar maximum width from 65% of the
	  window width to 75% as it was in 1.0.x, but if that would overlap
	  the clino then reduce it down until it reaches 50%.  Allow zooming
	  in a little further to match what was possible in 1.0.x.  (ticket#23)

Sat Sep 24 12:45:04 GMT 2011  Olly Betts <olly@survex.com>

	* doc/TODO.htm: Update (--help messages can now be translated).

Sat Sep 24 12:21:45 GMT 2011  Olly Betts <olly@survex.com>

	* doc/TODO.htm: Note oddity with FullScreen and side panel.

Sat Sep 24 12:14:52 GMT 2011  Olly Betts <olly@survex.com>

	* src/mainfrm.h: We don't need the "un-fullscreen to show dialog" hack
	  with recent wxGTK.  Also, there's no reason to think we need it for
	  other platforms (it was enabled everywhere except Microsoft Windows
	  before).

Sat Sep 24 10:42:29 GMT 2011  Olly Betts <olly@survex.com>

	* src/printwx.cc: "delete foo;" not "delete(foo);"

Sat Sep 24 10:41:00 GMT 2011  Olly Betts <olly@survex.com>

	* src/aven.cc,src/gfxcore.cc: No point checking for NULL before calling
	  delete.

Sat Sep 24 10:18:22 GMT 2011  Olly Betts <olly@survex.com>

	* src/: Remove empty destructors.

Sat Sep 24 06:43:33 GMT 2011  Olly Betts <olly@survex.com>

	* doc/TODO.htm,src/gfxcore.cc,src/gla-gl.cc,src/gla.h: Eliminate the
	  last few OpenGL calls from gfxcore.cc.

Sat Sep 24 06:32:02 GMT 2011  Olly Betts <olly@survex.com>

	* src/gfxcore.cc,src/gla-gl.cc,src/gla.h: New type GLATexCoord to avoid
	  using GLint outside of the OpenGL-specific code.

Sat Sep 24 06:08:13 GMT 2011  Olly Betts <olly@survex.com>

	* src/: Move glTexCoord2i() calls out of gfxcore.cc and into gla-gl.cc.
	  Use BeginQuadrilaterals() rather than BeginPolygon() when the shape
	  will definitely have 4 sides.
	  
Sat Sep 24 02:09:48 GMT 2011  Olly Betts <olly@survex.com>

	* src/gfxcore.h,src/guicontrol.cc: Disable "View North" when we're
	  already viewing North, and similarly for other compass points.

Sat Sep 24 01:57:06 GMT 2011  Olly Betts <olly@survex.com>

	* doc/TODO.htm: Update.

Fri Sep 23 15:38:36 GMT 2011  Olly Betts <olly@survex.com>

	* doc/aven.sgml,lib/codes.po,src/: Rename the "depth bar" to "colour
	  key", which better describes it now that it might show dates or
	  errors.

Fri Sep 23 15:19:33 GMT 2011  Olly Betts <olly@survex.com>

	* src/gfxcore.cc,src/gfxcore.h,src/guicontrol.cc: Fix the conditions
	  under which colour by date can be enabled to fully match what we
	  now intend.

Fri Sep 23 15:04:35 GMT 2011  Olly Betts <olly@survex.com>

	* src/gfxcore.cc,src/mainfrm.cc: Enable "colour by date" if there are
	  any surveys with date information.  Move the "Undated" / "Not in
	  loop" entry down a little to improve the appearance.  Make each
	  entry in the colour keys a pixel taller so it's an even number of
	  pixels and will divide by two exactly.

Fri Sep 23 14:59:33 GMT 2011  Olly Betts <olly@survex.com>

	* src/fnt.cc: Remove "*1.25" fudge factor from font size for texture
	  mapped fonts.

Fri Sep 23 12:44:18 GMT 2011  Olly Betts <olly@survex.com>

	* lib/en_US.po: Update for new messages.

Fri Sep 23 12:41:16 GMT 2011  Olly Betts <olly@survex.com>

	* src/gfxcore.cc: Expand context menu for compass to include "View
	  North", etc;  Similarly add "Plan" and "Elevation" to clino context
	  menu.

Fri Sep 23 12:25:10 GMT 2011  Olly Betts <olly@survex.com>

	* src/gla-gl.cc: Use += to make code clearer.

Fri Sep 23 12:16:36 GMT 2011  Olly Betts <olly@survex.com>

	* lib/codes.po,src/gfxcore.cc,src/gfxcore.h,src/guicontrol.cc: Add
	  pop-up menus for right clicks on scale bar, compass, and clino.

Fri Sep 23 11:17:31 GMT 2011  Olly Betts <olly@survex.com>

	* src/gfxcore.cc: Use HasRangeOfDates() consistently.

Thu Sep 22 23:56:06 GMT 2011  Olly Betts <olly@survex.com>

	* src/gla-gl.cc: Add missing newline to OpenGL info when GLX info isn't
	  reported.

Thu Sep 22 13:51:55 GMT 2011  Olly Betts <olly@survex.com>

	* survex.spec.in: Man pages are no longer installed in /usr/man so
	  no need to move them from there.  Package aven.svg.  Package
	  files for vim support.  (Fixes from James Begley)

Thu Sep 22 12:45:58 GMT 2011  Olly Betts <olly@survex.com>

	* lib/: Updates from launchpad.

Thu Sep 22 07:12:22 GMT 2011  Olly Betts <olly@survex.com>

	* lib/: Update .po files from template.

Thu Sep 22 07:12:01 GMT 2011  Olly Betts <olly@survex.com>

	* lib/codes.po: Improvements to "TRANSLATORS" comments.

Thu Sep 22 02:47:33 GMT 2011  Olly Betts <olly@survex.com>

	* lib/Makefile.am: Add check that numeric codes haven't escaped into
	  the translated .po files.

Wed Sep 21 14:38:16 GMT 2011  Olly Betts <olly@survex.com>

	* lib/es.po: Update with new msgids.

Wed Sep 21 14:37:53 GMT 2011  Olly Betts <olly@survex.com>

	* lib/en_US.po: Fix typo (doubled ").

Wed Sep 21 14:37:14 GMT 2011  Olly Betts <olly@survex.com>

	* lib/Makefile.am: Check format of .po files with msgfmt -c
	  --check-accelerators.

Wed Sep 21 13:49:05 GMT 2011  Olly Betts <olly@survex.com>

	* lib/en_US.po: Update en_US translation.

Wed Sep 21 13:47:36 GMT 2011  Olly Betts <olly@survex.com>

	* lib/codes.po,src/cad3d.c: Tweak wording of a message.  Remove
	  "unused" messages which have actually just been adapted slightly,
	  add back a removed unused message, and mark an unused message as
	  unused.
`
Wed Sep 21 13:20:58 GMT 2011  Olly Betts <olly@survex.com>

	* lib/codes.po,src/mainfrm.cc: Make more messages translatable.

Wed Sep 21 12:53:02 GMT 2011  Olly Betts <olly@survex.com>

	* lib/codes.po,src/: cmdline_set_syntax_message() now takes message
	  numbers, plus an optional string argument.

Wed Sep 21 12:17:19 GMT 2011  Olly Betts <olly@survex.com>

	* src/mainfrm.cc: Fix to set the correct filename on the root of the
	  survey tree.

Wed Sep 21 11:25:53 GMT 2011  Olly Betts <olly@survex.com>

	* lib/codes.po,src/log.cc,src/mainfrm.cc,src/printwx.cc: Make more
	  messages translatable.

Wed Sep 21 07:30:28 GMT 2011  Olly Betts <olly@survex.com>

	* lib/codes.po,src/dump3d.c,src/gfxcore.cc,src/mainfrm.cc: Make more
	  messages translatable.  In the colour key for "colour by date",
	  change "No info" to "Undated".

Wed Sep 21 04:20:52 GMT 2011  Olly Betts <olly@survex.com>

	* lib/codes.po,src/cavernlog.cc: Allow the "Reprocess" button label in
	  aven's cavern log window to be translated.

Wed Sep 21 04:07:29 GMT 2011  Olly Betts <olly@survex.com>

	* lib/,src/: Extract all the help strings in --help output and make
	  them available for translation.

Wed Sep 21 04:04:31 GMT 2011  Olly Betts <olly@survex.com>

	* lib/Makefile.am: Check there are no duplicate message codes in
	  codes.po as part of "make check".

Wed Sep 21 02:29:21 GMT 2011  Olly Betts <olly@survex.com>

	* src/gfxcore.cc,src/gla-gl.cc,src/gla.h: Eliminate glReadPixels() call
	  from src/gfxcore.cc.

Wed Sep 21 02:28:21 GMT 2011  Olly Betts <olly@survex.com>

	* lib/codes.po,lib/en_US.po,src/aboutdlg.cc: Make all strings in
	  src/aboutdlg.cc translatable.

Wed Sep 21 01:56:15 GMT 2011  Olly Betts <olly@survex.com>

	* doc/manual.sgml: Tweak text about Debian packages.

Tue Sep 20 11:31:03 GMT 2011  Olly Betts <olly@survex.com>

	* tests/: Update FSF address.

Tue Sep 20 11:28:50 GMT 2011  Olly Betts <olly@survex.com>

	* lib/print.ini: Update reference to Survex 1.1; update FSF address.

Tue Sep 20 06:43:56 GMT 2011  Olly Betts <olly@survex.com>

	* src/img.c: Only define INT32_T if it isn't already defined (it will
	  be for 1.0.x).

Tue Sep 20 06:43:23 GMT 2011  Olly Betts <olly@survex.com>

	* src/cavern.c: Remove unused function left over from recent change to
	  how coordinate ranges get reported.

Tue Sep 20 06:42:31 GMT 2011  Olly Betts <olly@survex.com>

	* make_release: Use the URL field from svn info in the command we give
	  to take this release rather than hard-coding the URL for trunk.

Tue Sep 20 05:43:11 GMT 2011  Olly Betts <olly@survex.com>

	* buildmacosx.sh: Building on 10.6 should work on 10.7, so update
	  comment to more clearly reflect that.

Tue Sep 20 05:39:50 GMT 2011  Olly Betts <olly@survex.com>

	* lib/,src/cavern.c: Fix reporting of ranges of survey coordinates,
	  which was broken by the message handling changes in 1.2.0.

Tue Sep 20 04:30:14 GMT 2011  Olly Betts <olly@survex.com>

	* configure.in,src/moviemaker.cc: Fix to build with FFmpeg library
	  versions in Debian unstable, as well as those in Debian stable.

Tue Sep 20 03:51:40 GMT 2011  Olly Betts <olly@survex.com>

	* src/moviemaker.cc: Updates towards compatibility with newer FFmpeg
	  libraries without breaking build with those in Debian stable.

Tue Sep 20 03:41:58 GMT 2011  Olly Betts <olly@survex.com>

	* src/avenprcore.h: Declare border as "struct border" rather than as a
	  typedef to avoid a -Wshadow warning.

Tue Sep 20 00:15:07 GMT 2011  Olly Betts <olly@survex.com>

	* NEWS: Perhaps the final update for 1.2.0.

Tue Sep 20 00:09:42 GMT 2011  Olly Betts <olly@survex.com>

	* lib/afm2txf.pl: Fix to correctly handle non-ASCII glyphs by using
	  glyphshow in the generated PostScript code rather than relying on the
	  numeric encoding order of the font to match Unicode (which doesn't
	  generally seem to be the case).  Tweak to process files without
	  slurping them all into memory where that's easy to do.

Mon Sep 19 23:15:46 GMT 2011  Olly Betts <olly@survex.com>

	* src/fnt.cc: Use FNT_MAXCHAR instead of literal 256.

Mon Sep 19 21:58:50 GMT 2011  Olly Betts <olly@survex.com>

	* buildmacosx.sh: Revert CPP=cpp change - it's not required.  Revert to
	  using wx 2.8.11 and 2.8.12 seems to fail to build.  Output of hdid
	  can contain spaces as well as tabs (man page only documents tabs) so
	  update regexps to take this into account.

Mon Sep 19 11:52:50 GMT 2011  Olly Betts <olly@survex.com>

	* buildmacosx.sh: Add comment noting that Xcode is probably required.
	  Since wxWidgets only supports building for a single arch at a time,
	  build for i386 by default, which should also work on x86_64.  Pass
	  CPP=cpp to wxWidgets configure (not certain if this is actually
	  needed, or was something tried on the way to discovering that only
	  one -arch option can be passed).

Sun Sep 18 12:24:41 GMT 2011  Olly Betts <olly@survex.com>

	* make_release: No need to force disabling of libavcodec for mingw - it
	  gets automatically disable if not present.

Sun Sep 18 12:23:39 GMT 2011  Olly Betts <olly@survex.com>

	* src/moviemaker.cc: Fix disabling of libavcodec-using code when
	  libavcodec isn't present.

Sun Sep 18 11:50:06 GMT 2011  Olly Betts <olly@survex.com>

	* NEWS: Update 1.2.0 release date.

Sun Sep 18 11:49:46 GMT 2011  Olly Betts <olly@survex.com>

	* make_release: Disable use of libavcodec for mingw for now.

Sun Sep 18 02:51:52 GMT 2011  Olly Betts <olly@survex.com>

	* make_release: Fix comment typo.

Sun Sep 18 02:50:30 GMT 2011  Olly Betts <olly@survex.com>

	* doc/TODO.htm: Update in preparation for releasing 1.2.

Sun Sep 18 02:49:53 GMT 2011  Olly Betts <olly@survex.com>

	* src/gla-gl.cc: Only try to read the GLX version on platforms which
	  use GLX.

Sun Sep 18 02:03:13 GMT 2011  Olly Betts <olly@survex.com>

	* Makefile.am,doc/Makefile.am: Don't list other .in files explicitly in
	  EXTRA_DIST.

Sun Sep 18 01:59:49 GMT 2011  Olly Betts <olly@survex.com>

	* lib/Makefile.am: survex.keys.in will get shipped because it is
	  used by AC_CONFIG_FILES so there's no need to list it explicitly
	  in EXTRA_DIST.

Sun Sep 18 01:56:18 GMT 2011  Olly Betts <olly@survex.com>

	* configure.in,lib/Makefile.am,lib/po-to-msg.pl: Fix .msg file
	  generation to work when srcdir != builddir.  Drop the "dontextract"
	  mechanism which automatically generates headers to allows building a
	  version with translations for the messages for errors in loading the
	  messages file, as it doesn't seem worth the effort to get it working
	  again.  It's easy to write such a header by hand if you really want
	  to do this.

Fri Sep 16 14:26:43 GMT 2011  Olly Betts <olly@survex.com>

	* NEWS,configure.in: Update for 1.2.0.

Fri Sep 16 14:22:20 GMT 2011  Olly Betts <olly@survex.com>

	* lib/icons/Makefile.am,lib/icons/aven.png,lib/icons/aven.svg: Add
	  new version of aven icon, redrawn in SVG so it displays nicely at
	  larger sizes.

Fri Sep 16 12:55:05 GMT 2011  Olly Betts <olly@survex.com>

	* lib/codes.po,src/cavern.c: Add --3d-version option to allow the user
	  to specify the version of the 3d format to output.  (ticket#21)

Fri Sep 16 12:52:55 GMT 2011  Olly Betts <olly@survex.com>

	* src/img.c,src/img.h: Make the highest and lowest valid values for
	  img_output_version available in img.h as IMG_VERSION_MIN and
	  IMG_VERSION_MAX.

Fri Sep 16 05:49:12 GMT 2011  Olly Betts <olly@survex.com>

	* src/aventreectrl.cc,src/guicontrol.cc,src/mainfrm.cc: Don't use
	  deprecated members or methods of wxKeyEvent.

Fri Sep 16 03:36:54 GMT 2011  Olly Betts <olly@survex.com>

	* lib/map.png: Remove scan of map which isn't used and we probably
	  don't have rights to redistribute.

Fri Sep 16 03:16:01 GMT 2011  Olly Betts <olly@survex.com>

	* src/mainfrm.cc: If a label isn't valid UTF-8, treat it as CP1252 (the
	  Microsoft superset of ISO8859-1).

Fri Sep 16 03:00:51 GMT 2011  Olly Betts <olly@survex.com>

	* src/mainfrm.cc: Remove special handling for toggling "full screen"
	  on wxGTK as it's no longer required with modern versions.

Fri Sep 16 02:05:12 GMT 2011  Olly Betts <olly@survex.com>

	* src/gfxcore.cc,src/gfxcore.h,src/mainfrm.cc: Don't redraw the survey
	  on every mouse movement in the survey pane unless the measuring line
	  is (or just was) active.  (ticket #17)

Thu Sep 15 03:58:59 GMT 2011  Olly Betts <olly@survex.com>

	* src/aven.cc: Comment improvements.

Thu Sep 15 03:51:27 GMT 2011  Olly Betts <olly@survex.com>

	* tests/smoke.tst: aven no longer requires an X display for --help or
	  --version, so replace skip of this check with a check that this
	  remains the case.

Thu Sep 15 02:27:57 GMT 2011  Olly Betts <olly@survex.com>

	* NEWS: Update from ChangeLog.

Thu Sep 15 02:11:28 GMT 2011  Olly Betts <olly@survex.com>

	* lib/Makefile.am: Distribute codes.po.

Thu Sep 15 02:08:35 GMT 2011  Olly Betts <olly@survex.com>

	* configure.in,survex.spec.in: Default to installing docs into
	  /usr/share/doc/survex rather than /usr/doc/survex.

Wed Sep 14 01:57:45 GMT 2011  Olly Betts <olly@survex.com>

	* src/mainfrm.cc: Fix another potential read beyond the end of a
	  string.

Wed Sep 14 01:35:20 GMT 2011  Olly Betts <olly@survex.com>

	* src/mainfrm.cc: Fix potential reading off end of string - fix from
	  Stuart Bennett.

Wed Sep 14 00:33:16 GMT 2011  Olly Betts <olly@survex.com>

	* lib/es.po: Update from launchpad.

Tue Sep 13 22:05:59 GMT 2011  Olly Betts <olly@survex.com>

	* buildmacosx.sh: Use wx 2.8.12.

Tue Sep 13 11:32:18 GMT 2011  Olly Betts <olly@survex.com>

	* src/aven.cc,src/aven.h,src/gla-gl.cc: Explicitly request
	  double-buffering, which seems to be needed for systems with GLX >=
	  1.3.  Report GLX version and whether double-buffering is in use in
	  the about dialog.

Sun Jun 19 11:19:51 GMT 2011  Olly Betts <olly@survex.com>

	* src/: Try to report errors from generating movie more helpfully.

Fri Jun 17 06:33:38 GMT 2011  Olly Betts <olly@survex.com>

	* src/moviemaker.cc: Eliminate use of deprecated function
	  av_alloc_format_context().

Fri Jun 17 06:32:50 GMT 2011  Olly Betts <olly@survex.com>

	* src/moviemaker.cc: Simplify the loop to flip the image vertically.

Fri Jun 17 06:17:20 GMT 2011  Olly Betts <olly@survex.com>

	* configure.in,src/moviemaker.cc,src/moviemaker.h: Use libswscale to
	  convert images to add to the video.  Movie export now working
	  again!

Fri Jun 17 06:16:46 GMT 2011  Olly Betts <olly@survex.com>

	* src/gfxcore.cc: No need to specify true to PlayPres - that's the
	  default.

Fri Jun 17 06:15:34 GMT 2011  Olly Betts <olly@survex.com>

	* src/gfxcore.cc: Set the play speed to "x1" during video recording.

Fri Jun 17 05:43:12 GMT 2011  Olly Betts <olly@survex.com>

	* src/gfxcore.cc,src/gfxcore.h: Rename 'mpeg' member to 'movie'.

Fri Jun 17 04:30:12 GMT 2011  Olly Betts <olly@survex.com>

	* configure.in,src/moviemaker.cc,src/moviemaker.h: Mostly update movie
	  making code to work with current FFmpeg.  Still TODO: convert call
	  to img_convert() to use sws_scale() - currently you just get an all
	  green movie!

Mon May 30 07:40:12 GMT 2011  Olly Betts <olly@survex.com>

	* buildmacosx.sh: Fix URL for downloading wxWidgets tarball.

Sat May 28 12:39:11 GMT 2011  Olly Betts <olly@survex.com>

	* buildmacosx.sh: Build for x86_64 as well as i386.

Sat May 28 06:14:09 GMT 2011  Olly Betts <olly@survex.com>

	* buildmacosx.sh: Fix comment typo.

Sat May 28 06:08:10 GMT 2011  Olly Betts <olly@survex.com>

	* buildmacosx.sh: Don't assume the volume gets mounted on
	  /Volumes/Survex as it won't be if that mount point is already in use.

Thu May 26 16:09:05 GMT 2011  Olly Betts <olly@survex.com>

	* lib/codes.po,src/aven.cc,src/mainfrm.cc,src/mainfrm.h: Use more stock
	  IDs.

Thu May 26 14:52:00 GMT 2011  Olly Betts <olly@survex.com>

	* lib/,src/printwx.cc: Use stock wx button IDs wxID_PRINT and
	  wxID_PREVIEW where appropriate.

Thu May 26 14:47:52 GMT 2011  Olly Betts <olly@survex.com>

	* lib/codes.po: Mark unused messages by commenting out with '#~'.

Thu May 26 14:34:29 GMT 2011  Olly Betts <olly@survex.com>

	* src/printwx.h: Fix comment typo.

Thu May 26 12:47:44 GMT 2011  Olly Betts <olly@survex.com>

	* src/mainfrm.cc,src/printwx.cc: When using a standard wxID_xxx id with
	  wxButton, use the implicit default label, as the wx documentation
	  recommends.

Thu May 26 12:28:11 GMT 2011  Olly Betts <olly@survex.com>

	* src/: Remove the unused preferences dialog code - we can easily
	  fish it back out of SVN should we want it later, so no point
	  having it sitting there making every checkout bigger.

Tue May 24 05:21:52 GMT 2011  Olly Betts <olly@survex.com>

	* configure.in,doc/Makefile.am,doc/survex.1.in: Move survex man page to
	  section 7 (since it isn't documenting an actual command).

Tue May 24 05:17:53 GMT 2011  Olly Betts <olly@survex.com>

	* doc/Makefile.am: Write generated man page to a temporary file, then
	  atomically rename, to avoid leaving an empty or partial man page
	  behind if docbook-to-man dies (I managed to ship an empty cad3d.1 in
	  1.1.16).

Sat May 21 22:05:04 GMT 2011  Olly Betts <olly@survex.com>

	* lib/fr.po: Fold in addition of accent from launchpad.

Sat May 21 22:04:31 GMT 2011  Olly Betts <olly@survex.com>

	* lib/: Remove comments which are only relevant for other languages
	  from .po files.  Add more clarifying comments.

Thu May 19 05:23:03 GMT 2011  Olly Betts <olly@survex.com>

	* lib/messages.txt: Remove as no longer used.

Wed May 18 09:06:19 GMT 2011  Olly Betts <olly@survex.com>

	* lib/,src/mainfrm.cc,src/mainfrm.h: We now use .po and .pot files as
	  the master format for storing translations in (rather than
	  messages.txt), and then translate these into Survex's .msg format.

Wed May 18 08:37:01 GMT 2011  Olly Betts <olly@survex.com>

	* lib/messages.txt: Fix variant en-us message which ought not be
	  different.

Wed May 18 05:50:07 GMT 2011  Olly Betts <olly@survex.com>

	* make_release: Print out the commands needed to tag the release.

Tue May 17 01:24:59 GMT 2011  Olly Betts <olly@survex.com>

	* lib/messages.txt,src/cavern.c: Drop "non-fatal" from the report of
	  how many errors there were at the end of the run - it just confuses
	  users - we won't even get here if there's a fatal error!
	* lib/messages.txt: Add missing translations of two "Export" variants
	  for ca, sk, and ro.

Tue May 17 01:03:06 GMT 2011  Olly Betts <olly@survex.com>

	* NEWS: Fix typo.

Mon May 16 22:18:53 GMT 2011  Olly Betts <olly@survex.com>

	* buildmacosx.sh: Extract tarball quietly, and just say we're doing
	  it.  Add missing quoting to variable expansions.

Mon May 16 05:59:32 GMT 2011  Olly Betts <olly@survex.com>

	* NEWS: Another pre-1.1.16 update.

Mon May 16 05:54:30 GMT 2011  Olly Betts <olly@survex.com>

	* Makefile.am: Include all the available wxstd.mo files into the
	  Microsoft Windows installer, rather than trying to just include those
	  which we have translations for.  This avoids having to maintain a
	  list of which to include, and gives users translations of wxWidgets
	  messages even if they don't get Survex messages translated.

Mon May 16 05:53:49 GMT 2011  Olly Betts <olly@survex.com>

	* doc/HACKING.htm: Update version of InnoSetup used.  Note the packages
	  needed on Debian to build the Microsoft Windows installer.

Mon May 16 05:22:03 GMT 2011  Olly Betts <olly@survex.com>

	* doc/HACKING.htm: Note Debian packages to install for docs.

Mon May 16 05:21:27 GMT 2011  Olly Betts <olly@survex.com>

	* survex.iss.in: Add comment noting that AppVerName isn't required by
	  newer InnoSetup.

Sun May 15 04:11:34 GMT 2011  Olly Betts <olly@survex.com>

	* NEWS,configure.in: Update for 1.1.16.

Sun May 15 03:44:17 GMT 2011  Olly Betts <olly@survex.com>

	* lib/fixmsgs.pl: Update to fix UTF-8 rather than ISO8859-1.

Sun May 15 03:43:46 GMT 2011  Olly Betts <olly@survex.com>

	* lib/named-entities.txt: Add hellip and rarr.

Sun May 15 03:39:02 GMT 2011  Olly Betts <olly@survex.com>

	* lib/messages.txt: Fix clashing menu shortcuts from recent translation
	  updates.

Sun May 15 03:20:50 GMT 2011  Olly Betts <olly@survex.com>

	* src/message.c: 0x2026 (&hellip;): Handle for WINCP1252, and
	  transliterate to '...' for charsets which don't have it.  0x2192
	  (&rarr;): Transliterate to '->' for charsets which don't have it.
	  Handle &Scaron;, &scaron;, &Zcaron;, &zcaron; for WINCP1252.
	* lib/messages.txt: Use '&rarr;' instead of '->' and '&hellip;' instead
	  of '...'.

Sun May 15 02:59:42 GMT 2011  Olly Betts <olly@survex.com>

	* lib/messages.txt: Fix literal accented characters.

Sun May 15 02:55:50 GMT 2011  Olly Betts <olly@survex.com>

	* lib/messages.txt: Fold in de updates from launchpad.

Sun May 15 02:36:02 GMT 2011  Olly Betts <olly@survex.com>

	* lib/messages.txt: Fold in es updates from launchpad.

Sun May 15 02:19:45 GMT 2011  Olly Betts <olly@survex.com>

	* lib/messages.txt: Fold in it updates from launchpad.

Sun May 15 02:00:45 GMT 2011  Olly Betts <olly@survex.com>

	* lib/messages.txt: Fold in pt-br updates from launchpad.

Sun May 15 01:53:22 GMT 2011  Olly Betts <olly@survex.com>

	* lib/messages.txt: Fold in pt updates from launchpad.

Mon Mar 14 01:58:10 GMT 2011  Olly Betts <olly@survex.com>

	* configure.in: Link with -lGL, if it exists to support linking with
	  gold or GNU ld --as-needed (Debian bug #615781).

Thu Mar 03 13:16:19 GMT 2011  Olly Betts <olly@survex.com>

	* src/img.c: Fix code typo for IMG_API_VERSION == 0 case.

Thu Mar 03 12:32:57 GMT 2011  Olly Betts <olly@survex.com>

	* src/img.c: Fix typo in code used when IMG_HOSTED isn't defined.

Wed Oct 20 09:53:56 GMT 2010  Olly Betts <olly@survex.com>

	* lib/messages.txt: "Colour" -> "Color" in en-us.

Sun Oct 17 14:10:21 GMT 2010  Olly Betts <olly@survex.com>

	* lib/messages.txt: Assorted comment improvements and tweaks.

Sat Oct 16 11:12:42 GMT 2010  Olly Betts <olly@survex.com>

	* src/moviemaker.h: Remove unused <stdio.h>.  Shouldn't include
	  <config.h> in headers, only sources.

Sat Oct 16 10:13:10 GMT 2010  Olly Betts <olly@survex.com>

	* doc/TODO.htm: Remove entries which have now been done.

Fri Oct 15 06:57:46 GMT 2010  Olly Betts <olly@survex.com>

	* tests/extend.tst: Fix to file .espec files when srcdir != builddir.

Fri Oct 15 05:48:09 GMT 2010  Olly Betts <olly@survex.com>

	* NEWS: Final update fro 1.1.15.

Fri Oct 15 05:20:40 GMT 2010  Olly Betts <olly@survex.com>

	* src/editwrap.c: Convert to use wide-character Unicode.

Fri Oct 15 05:20:04 GMT 2010  Olly Betts <olly@survex.com>

	* src/cavernlog.cc: Fix to work on Microsoft Windows.

Thu Oct 14 22:50:09 GMT 2010  Olly Betts <olly@survex.com>

	* tests/extend.tst: Enable eswap-break testcase now that diffpos is
	  fixed.

Thu Oct 14 22:48:06 GMT 2010  Olly Betts <olly@survex.com>

	* src/diffpos.c: Handle files with duplicate labels in better - extend
	  generates duplicate labels when it breaks a loop.

Wed Oct 13 15:39:04 GMT 2010  Olly Betts <olly@survex.com>

	* make_release: -Dunix when running make distcheck with the
	  preprocessor in C89 mode.

Wed Oct 13 15:33:23 GMT 2010  Olly Betts <olly@survex.com>

	* src/cavern.c: Fix C++ comment.

Wed Oct 13 15:07:31 GMT 2010  Olly Betts <olly@survex.com>

	* NEWS,configure.in: 1.1.15.

Wed Oct 13 15:00:51 GMT 2010  Olly Betts <olly@survex.com>

	* configure.in,src/: Define GETC() in config.h and use it everywhere.
	  Similarly define PUTC() to use putc_unlocked() where available and
	  use that everywhere too.

Wed Oct 13 13:41:17 GMT 2010  Olly Betts <olly@survex.com>

	* src/cavernlog.cc: Remove superfluous nested declaration.

Wed Oct 13 11:19:29 GMT 2010  Olly Betts <olly@survex.com>

	* src/cavernlog.cc: mingw doesn't have _get_wpgmptr() so use the
	  deprecated _wpgmptr instead.  mingw doesn't have errno_t so use int
	  instead.

Wed Oct 13 10:49:18 GMT 2010  Olly Betts <olly@survex.com>

	* src/cavernlog.cc: (Microsoft Windows) Quote for any meta characters,
	  not just space.

Wed Oct 13 10:27:38 GMT 2010  Olly Betts <olly@survex.com>

	* src/cavernlog.cc: (Microsoft Windows) Use _get_wpgmptr() to get wide
	  path to aven rather for running cavern.

Thu Oct 07 22:38:43 GMT 2010  Olly Betts <olly@survex.com>

	* src/datain.h,src/useful.c: Use getc_unlocked() if available.

Thu Oct 07 14:25:13 GMT 2010  Olly Betts <olly@survex.com>

	* src/mainfrm.cc: Use _wfopen() on Microsoft Windows when loading and
	  saving presentations so that paths with non-Latin1 characters in can
	  be processed.

Thu Oct 07 12:52:22 GMT 2010  Olly Betts <olly@survex.com>

	* configure.in,src/cavernlog.cc: Use getc_unlocked() if available.

Thu Oct 07 12:42:21 GMT 2010  Olly Betts <olly@survex.com>

	* src/cavernlog.cc: Don't call Update() after every line, but only
	  when we don't have data from cavern pending.  Hopefully addresses
	  ticket#12.

Wed Oct 06 02:25:31 GMT 2010  Olly Betts <olly@survex.com>

	* make_release: Never set CFLAGS or CXXFLAGS in the environment.
	  Build mingw version in an unpacked source tree from the release
	  tarball.

Wed Oct 06 02:09:33 GMT 2010  Olly Betts <olly@survex.com>

	* src/cavernlog.cc: Fix code indentation.

Wed Oct 06 02:08:38 GMT 2010  Olly Betts <olly@survex.com>

	* src/cavernlog.cc: Revert to using mb_str() for popen() and system()
	  on Unix.

Wed Oct 06 02:02:54 GMT 2010  Olly Betts <olly@survex.com>

	* src/cavernlog.cc: Use _wpopen() and _wsystem() on Microsoft Windows
	  so that paths with non-Latin1 characters in can be processed.

Wed Oct 06 01:16:03 GMT 2010  Olly Betts <olly@survex.com>

	* src/cavernlog.cc: Need to quote filenames with spaces in for
	  Microsoft Windows.

Wed Oct 06 00:54:44 GMT 2010  Olly Betts <olly@survex.com>

	* lib/Makefile.am: Ship the extra .isl translation files for Innosetup.

Wed Oct 06 00:49:18 GMT 2010  Olly Betts <olly@survex.com>

	* src/datain.c: Add missing include of date.h.

Wed Oct 06 00:48:28 GMT 2010  Olly Betts <olly@survex.com>

	* src/date.c,src/date.h: Add files for date handling.

Tue Oct 05 12:48:19 GMT 2010  Olly Betts <olly@survex.com>

	* src/gla-gl.cc,src/gla.h: Check whether blobs and crosses actually
	  render correctly as points/point sprites, and if they don't, fall
	  back to drawing them with lines.

Tue Oct 05 10:53:56 GMT 2010  Olly Betts <olly@survex.com>

	* src/gla-gl.cc,src/gla.h: Cache the best method for drawing blobs
	  and crosses, and recheck automatically if the graphics hardware
	  or drivers are changed or upgraded.

Mon Oct 04 11:18:22 GMT 2010  Olly Betts <olly@survex.com>

	* src/gla-gl.cc: Add \n to commented out debug message.

Mon Oct 04 09:58:17 GMT 2010  Olly Betts <olly@survex.com>

	* doc/index.htm.in,doc/manual.sgml,doc/survex.ent,lib/print.ini,
	  src/printwx.cc,survex.iss.in: Use http://survex.com/ rather than
	  http://www.survex.com/ - the former is the canonical name and
	  www.survex.com just redirects.

Mon Oct 04 09:46:24 GMT 2010  Olly Betts <olly@survex.com>

	* src/mainfrm.cc: Don't offer "All files" wildcard in presentation save
	  dialog.

Mon Oct 04 08:19:40 GMT 2010  Olly Betts <olly@survex.com>

	* src/gla-gl.cc: Pass GL_TRUE to OpenGL functions, rather than true.

Sun Oct 03 06:46:03 GMT 2010  Olly Betts <olly@survex.com>

	* src/gfxcore.cc,src/gla-gl.cc,src/gla.h: Use double instead of Double
	  in cases where the value isn't being passed to OpenGL.

Sun Aug 22 13:30:54 GMT 2010  Olly Betts <olly@survex.com>

	* src/gla-gl.cc: If we aren't using GL_POINTS for blobs, draw them
	  using a series of abutting lines rather than with gluDisk which
	  is faster and gives a consistent shape.

Sat Aug 21 14:33:54 GMT 2010  Olly Betts <olly@survex.com>

	* src/gla-gl.cc: Fix another use of GL_POINT_SIZE_RANGE to
	  GL_SMOOTH_POINT_SIZE_RANGE.

Sat Aug 21 14:30:56 GMT 2010  Olly Betts <olly@survex.com>

	* src/gla-gl.cc: Fix non-USE_FNT case to work again (it's limited to
	  ISO-8859-1 characters though).

Sat Aug 21 13:31:17 GMT 2010  Olly Betts <olly@survex.com>

	* src/gla-gl.cc: Use GL_SMOOTH_POINT_SIZE_RANGE and
	  GL_SMOOTH_POINT_SIZE_GRANULARITY instead of GL_POINT_SIZE_RANGE and
	  GL_POINT_SIZE_GRANULARITY (unless they aren't defined) as the latter
	  two are deprecated in OpenGL >= 1.2.  If GL_ALIASED_POINT_SIZE_RANGE
	  is available (OpenGL >= 1.2 again) then report its value in the
	  about box.

Fri Aug 20 12:26:40 GMT 2010  Olly Betts <olly@survex.com>

	* doc/3dformat.htm,lib/messages.txt,src/,tests/: New v7 of .3d format
	  which stores survey dates as number of days since Jan 1st 1900, so
	  we now support dates from 1900-2078 (rather than 1970-2037) with a
	  smaller file size.  The img API is now versioned - you can select
	  the new "version 1" by compiling with -DIMG_API_VERSION=1, which
	  gives the survey dates in days in days1 and days2 instead of as
	  time_t values in date1 and date2.  Fixes ticket#14.

Fri Aug 20 12:12:54 GMT 2010  Olly Betts <olly@survex.com>

	* src/printwx.cc: Remove unused '#include <time.h>'.

Fri Aug 20 12:10:55 GMT 2010  Olly Betts <olly@survex.com>

	* src/avenprcore.cc: Remove unused '#include <time.h>'.

Fri Aug 20 10:10:05 GMT 2010  Olly Betts <olly@survex.com>

	* src/export.cc: Explicit #include <time.h> for strftime().

Wed Aug 18 13:59:30 GMT 2010  Olly Betts <olly@survex.com>

	* src/osdepend.h: Remove workaround for DOS Turbo C compiler.

Wed Aug 18 02:03:39 GMT 2010  Olly Betts <olly@survex.com>

	* buildmacosx.sh,configure.in,lib/Info.plist.in: Make buildmacosx.sh
	  work.

Tue Aug 17 01:43:24 GMT 2010  Olly Betts <olly@survex.com>

	* src/gfxcore.h: "using svx::Point;" gives an error, so use a macro
	  instead.

Wed Aug 04 03:27:22 GMT 2010  Olly Betts <olly@survex.com>

	* src/img.c: Fix cast in get16() to be to short not long.

Wed Aug 04 02:32:16 GMT 2010  Olly Betts <olly@survex.com>

	* src/cavernlog.cc,src/cavernlog.h: "Rerun" -> "Reprocess" to follow
	  terminology in manual, etc.  Fixes ticket#15.

Wed Jul 28 17:06:49 GMT 2010  Olly Betts <olly@survex.com>

	* tests/: Most tests weren't actually running and testcases (looks like
	  a sh portability issue).  Fixed, and fortunately all tests still
	  pass.

Mon Jul 26 12:30:43 GMT 2010  Olly Betts <olly@survex.com>

	* doc/manual.sgml: Fix typo "of" -> "on".

Mon Jul 26 11:59:59 GMT 2010  Olly Betts <olly@survex.com>

	* NEWS,configure.in: Update for 1.1.14.

Mon Jul 26 11:53:01 GMT 2010  Olly Betts <olly@survex.com>

	* lib/messages.txt,src/: Remove things we no longer need now we've
	  dropped support for RISC OS and DOS.

Mon Jul 26 11:19:40 GMT 2010  Olly Betts <olly@survex.com>

	* src/cmdline.c: Remove reference to MSDOS.

Mon Jul 26 10:23:07 GMT 2010  Olly Betts <olly@survex.com>

	* src/: Strip out "Far" and "Huge" which we no longer need now that
	  DOS memory models are no longer relevant.

Mon Jul 26 09:57:37 GMT 2010  Olly Betts <olly@survex.com>

	* configure.in: No need for AC_PROG_MAKE_SET when using automake.

Mon Jul 26 09:48:10 GMT 2010  Olly Betts <olly@survex.com>

	* configure.in,src/useful.h: On little-endian architectures, make
	  get16() and get32() inline functions, rather than macros which use 
	  a global variable.

Mon Jul 26 09:31:14 GMT 2010  Olly Betts <olly@survex.com>

	* src/useful.c: Remove commented out code.

Mon Jul 26 09:19:19 GMT 2010  Olly Betts <olly@survex.com>

	* configure.in,src/img.c,src/useful.c,src/useful.h: Use AC_TYPE_INT16_T
	  and AC_TYPE_INT32_T instead of home-brew equivalents.

Mon Jul 26 08:40:43 GMT 2010  Olly Betts <olly@survex.com>

	* src/listpos.c: In "Station X referred to just once, with an explicit
	  prefix - typo?" warning, give file and linenumber where the *equate
	  occurred.

Mon Jul 26 08:37:46 GMT 2010  Olly Betts <olly@survex.com>

	* src/readval.c: Fix comment typo.

Mon Jul 26 08:29:41 GMT 2010  Olly Betts <olly@survex.com>

	* src/listpos.c: In "Station X referred to by *entrance or *export but
	  never used" warning, give file and linenumber where the *entrance or
	  *export occurred.

Mon Jul 26 07:44:26 GMT 2010  Olly Betts <olly@survex.com>

	* src/aventreectrl.cc: Fix double-click handling for survey tree on
	  wxMSW >= 2.8.11.

Mon Jul 26 07:25:59 GMT 2010  Olly Betts <olly@survex.com>

	* src/mainfrm.cc: Stop passing wxNO_FULL_REPAINT_ON_RESIZE as it is 0
	  on all versions of wxWidgets we support (i.e. 2.6 and later).

Mon Jul 26 07:21:35 GMT 2010  Olly Betts <olly@survex.com>

	* INSTALL,src/: Restore compatibility with wxWidgets 2.6.

Mon Jul 26 06:29:03 GMT 2010  Olly Betts <olly@survex.com>

	* src/netskel.c: In "Unused fixed point" warning, give file and
	  linenumber where the "*fix" occurred.

Mon Jul 26 06:24:35 GMT 2010  Olly Betts <olly@survex.com>

	* src/cavernlog.cc: Fix highlighting of links in CavernLog window to
	  highlight just <file>:<line> (and not the ': ' after), and to make
	  the title for the terminal the warning/error message.  Make the
	  checking stricter by checking that the linenumber is a number, to
	  avoid false positives.

Mon Jul 26 04:48:12 GMT 2010  Olly Betts <olly@survex.com>

	* Revert this change, as it appears wxMotif does support wxGLCanvas:
	* doc/manual.sgml: wxMotif apparently doesn't support wxGLCanvas, which
	  is required by Aven in 1.1.x, so remove mention of Motif from manual.

Mon Jul 26 03:24:38 GMT 2010  Olly Betts <olly@survex.com>

	* src/: Add "Rerun" and "OK" buttons to the CavernLog window (as
	  appropriate).  (Addition of "OK" button fixes ticket#13).  Fix up
	  handling of splitter window to fix poor handling of various cases.

Sun Jul 25 15:32:42 GMT 2010  Olly Betts <olly@survex.com>

	* src/mainfrm.cc,src/mainfrm.h: Clean up code which sorts out loading
	  a file (and processing it first if necessary).

Sun Jul 25 07:20:05 GMT 2010  Olly Betts <olly@survex.com>

	* src/cavernlog.h: Fix filename in comment at top.

Sun Jul 25 07:17:20 GMT 2010  Olly Betts <olly@survex.com>

	* src/cavernlog.cc: Don't double escape the contents of href and target
	  in links in the log.

Sun Jul 25 06:32:24 GMT 2010  Olly Betts <olly@survex.com>

	* src/cavernlog.cc: Remove commented out calls to set the input
	  encoding of the HTML parser - we now always escape non-ASCII
	  characters as HTML entities.

Fri Jul 23 14:15:25 GMT 2010  Olly Betts <olly@survex.com>

	* src/cavernlog.h: Improve doc comment for process() method.

Fri Jul 23 12:38:43 GMT 2010  Olly Betts <olly@survex.com>

	* src/printwx.cc,src/printwx.h: Don't compile in the preview code when
	  we disable the preview feature.

Fri Jul 23 12:15:31 GMT 2010  Olly Betts <olly@survex.com>

	* src/printwx.cc: The Gnome print dialog has its own preview window
	  so suppress ours if using the Gnome one.

Fri Jul 23 11:21:52 GMT 2010  Olly Betts <olly@survex.com>

	* configure.in: Update the wx-config probing code - wxmac-config etc
	  aren't present with newer wxWidgets versions.

Fri Jul 23 05:55:37 GMT 2010  Olly Betts <olly@survex.com>

	* buildmacosx.sh: Update to use WX_CONFIG not WXCONFIG.  Update to
	  use a Unicode build.  If building a private wx, use wx 2.8.11 not
	  2.7.0-1 (and don't replace carbon-glcanvas.cpp with our own version).

Sat Jul 10 12:15:23 GMT 2010  Olly Betts <olly@survex.com>

	* src/cavernlog.cc: Set the select timeout before calling wxYield()
	  when waiting for output from cavern to 0.1s instead of 0.00001s to
	  avoid yielding excessively on slower machines where this is likely
	  to really slow things down.  Call Scroll() only once per line in
	  the case where we are updating the scrollbar position.  Call
	  Update() instead of wxYield() after each line, since that's enough
	  to get the window updated.  Remove unused assignment "ch = left;"
	  at end of loop.

Fri Jul 09 14:42:47 GMT 2010  Olly Betts <olly@survex.com>

	* configure.in: Link aven with -lGLU which SuSE Linux needs.

Fri Jul 09 14:31:39 GMT 2010  Olly Betts <olly@survex.com>

	* src/mainfrm.cc: Highlight stations matching any current search when a
	  file is loaded.  (ticket#9)

Thu Jul 01 12:20:58 GMT 2010  Olly Betts <olly@survex.com>

	* survex.iss.in: Clean up comments from over-enthusiastic search and
	  replace which modified comments as well as code.

Thu Jul 01 10:15:06 GMT 2010  Olly Betts <olly@survex.com>

	* src/gfxcore.h: Work around Mac OS X polluting the global namespace
	  with a "Point" class.

Thu Jul 01 10:10:45 GMT 2010  Olly Betts <olly@survex.com>

	* src/Makefile.am: Remove FIXME which has already been resolved.

Fri Jun 18 11:04:35 GMT 2010  Olly Betts <olly@survex.com>

	* doc/manual.sgml: wxMotif apparently doesn't support wxGLCanvas, which
	  is required by Aven in 1.1.x, so remove mention of Motif from manual.

Fri Jun 18 03:03:55 GMT 2010  Olly Betts <olly@survex.com>

	* doc/manual.sgml,src/aventreectrl.cc,src/gfxcore.cc,src/mainfrm.h:
	  Correctly capitalise "GTK".

Fri Jun 18 02:58:06 GMT 2010  Olly Betts <olly@survex.com>

	* doc/manual.sgml: Note that on Linux we only regularly test builds
	  with the GTK+ version (change taken from 1.0).

Wed Jun 16 04:44:26 GMT 2010  Olly Betts <olly@survex.com>

	* doc/Makefile.am: Use stampfile to stop unwanted rebuilds of the HTML
	  version of the manual.

Wed Jun 16 02:59:48 GMT 2010  Olly Betts <olly@survex.com>

	* configure.in: Only ask for core, gl, and html wx libs to avoid
	  linking to a load of others we don't use.

Tue Jun 15 17:01:41 GMT 2010  Olly Betts <olly@survex.com>

	* INSTALL: Update.

Tue Jun 15 16:53:28 GMT 2010  Olly Betts <olly@survex.com>

	* src/aven.cc: Fix to work with wxWidgets 2.6 too.

Tue Jun 15 15:38:49 GMT 2010  Olly Betts <olly@survex.com>

	* lib/survex-aven.desktop,lib/survex-svxedit.desktop: Merge in .desktop
	  file updates from 1.0.39.1-4 Debian package.

Tue Jun 15 14:40:04 GMT 2010  Olly Betts <olly@survex.com>

	* doc/Makefile.am: Fix lingering references to @DOCS_OTHER@.

Tue Jun 15 14:32:55 GMT 2010  Olly Betts <olly@survex.com>

	* NEWS: Update from ChangeLog.

Tue Jun 15 14:09:29 GMT 2010  Olly Betts <olly@survex.com>

	* Makefile.am,configure.in,doc/Makefile.am,make_release: Scrap the
	  "alternative manual formats" zip file - people will generally just
	  want one of them, so downloading several together isn't very useful.
	  Replace PostScript version of manual with a PDF version (more
	  compact and more people will have software to read PDF).  Don't
	  generate RTF format by default as PDF is more useful if you want
	  a formatted version to print.

Tue Jun 15 13:36:30 GMT 2010  Olly Betts <olly@survex.com>

	* doc/manual.sgml: Merge the "Contributing" section into the "Mailing
	  List" section.

Tue Jun 15 12:57:13 GMT 2010  Olly Betts <olly@survex.com>

	* Makefile.am,make_release: Just produce a zip file with the
	  alternative manual formats - a self-extracting .exe is harder to
	  use on other platforms, and most people have a zip file extractor
	  installed.

Tue Jun 15 12:36:13 GMT 2010  Olly Betts <olly@survex.com>

	* survex.spec.in: Update survex.com URLs to drop "www.".  Update
	  wxGTK dependency to >= 2.6.0.  Reenable "BuildRequires:" as
	  the issue with building the package on Debian is no longer
	  relevant.

Tue Jun 15 12:35:19 GMT 2010  Olly Betts <olly@survex.com>

	* doc/manual.sgml: Update (C) years.  "MacOS X" -> "Mac OS X".

Tue Jun 15 12:13:42 GMT 2010  Olly Betts <olly@survex.com>

	* doc/manual.sgml: Remove out of date postal addresses - we can
	  probably safely assume people have email these days.  Direct
	  people to the mailing list since they are likely to get a
	  quicker response rather than mailing individuals.  Remove
	  mention of a paper mailing list.  Remove mention of sending
	  us a floppy (!) or blank CDR to get a version as I can't recall
	  the last time I gave someone a copy on physical media.

Tue Jun 15 11:22:56 GMT 2010  Olly Betts <olly@survex.com>

	* Makefile.am,make_release: I can't persuade rpmbuild to work sanely,
	  and people can just as easily build binary RPMs from the source
	  tarball as from the srpm, so just remove the rpm target from the
	  makefile and code which uses it from make_release - it's less to
	  have to maintain too.

Tue Jun 15 10:59:12 GMT 2010  Olly Betts <olly@survex.com>

	* make_release: Use "set -e" rather than checking the exit codes of
	  commands.  -t no longer disables targets - set mk to do that.

Tue Jun 15 09:41:11 GMT 2010  Olly Betts <olly@survex.com>

	* make_release: Fix defaulting of list of things to do.

Tue Jun 15 09:12:00 GMT 2010  Olly Betts <olly@survex.com>

	* src/gdtconvert: Add "Generated" comment to output file.

Tue Jun 15 09:10:02 GMT 2010  Olly Betts <olly@survex.com>

	* src/gdtconvert: Add GPL license boilerplate.

Tue Jun 15 08:53:28 GMT 2010  Olly Betts <olly@survex.com>

	* src/gettexttomsg.pl,src/wx.h: Add GPL boilerplate to files which were
	  missing it.

Tue Jun 15 08:46:28 GMT 2010  Olly Betts <olly@survex.com>

	* src/: Update FSF address in licence notices.

Tue Jun 15 08:06:09 GMT 2010  Olly Betts <olly@survex.com>

	* src/guicontrol.cc: Allow "Toggle Fullscreen" to work even if no
	  survey is loaded now that we persist the window size between
	  invocations.

Tue Jun 15 08:03:53 GMT 2010  Olly Betts <olly@survex.com>

	* src/gla-gl.cc: Use GL_BLEND rather than GL_ALPHA to work better with
	  anti-aliased TXF files.

Tue Jun 15 07:59:09 GMT 2010  Olly Betts <olly@survex.com>

	* src/fnt.cc: Use font size from txf file rather than trying to
	  calculate it from the texture fragment sizes.

Tue Jun 15 07:48:13 GMT 2010  Olly Betts <olly@survex.com>

	* lib/Makefile.am,lib/TexFont.h,lib/gentexfont.c: Generate aven.txf with
	  afm2txf.pl instead of gentexfont because gentexfont's licence doesn't
	  allow distribution of modified versions.

Tue Jun 15 07:43:48 GMT 2010  Olly Betts <olly@survex.com>

	* lib/afm2txf.pl: Add support for -o option to specify output .txf
	  file.

Tue Jun 15 07:10:16 GMT 2010  Olly Betts <olly@survex.com>

	* lib/afm2txf.pl: Sanitise $FONT to ensure it doesn't contain a '/'.
	  Remove the temporary .ppm file at the end.

Tue Jun 15 06:13:30 GMT 2010  Olly Betts <olly@survex.com>

	* lib/afm2txf.pl: Fix alignment of characters, backported from PLIB
	  SVN.

Tue Jun 15 05:05:05 GMT 2010  Olly Betts <olly@survex.com>

	* lib/afm2txf.pl: Quote $FONT when passing to external commands.

Tue Jun 15 04:24:33 GMT 2010  Olly Betts <olly@survex.com>

	* lib/afm2txf.pl: Change character 96 from "grave" to "quoteleft".

Tue Jun 15 04:22:59 GMT 2010  Olly Betts <olly@survex.com>

	* lib/afm2txf.pl: Extend to cover ISO-8859-1, not just ASCII.

Tue Jun 15 04:08:34 GMT 2010  Olly Betts <olly@survex.com>

	* lib/afm2txf.pl: Clean up trailing whitespace.

Tue Jun 15 04:02:40 GMT 2010  Olly Betts <olly@survex.com>

	* lib/afm2txf.pl: Add GPL script for creating txf files.

Mon Jun 14 06:33:11 GMT 2010  Olly Betts <olly@survex.com>

	* lib/splash.png: Remove now unused graphical splash screen (it has
	  hardcoded (C) details, which wasn't a good approach).

Mon Jun 14 05:20:44 GMT 2010  Olly Betts <olly@survex.com>

	* src/fnt.cc: Handle the left bearing and character width correctly.

Mon Jun 14 04:44:22 GMT 2010  Olly Betts <olly@survex.com>

	* src/fnt.cc: Change back to not using GL_COLOR_INDEX, but with still
	  being able to set the font texture from a byte array.

Mon Jun 14 04:23:22 GMT 2010  Olly Betts <olly@survex.com>

	* src/fnt.h,src/gla-gl.cc: Pass the length of the string to
	  fntTexFont::puts() rather than recalculating it inside the
	  method.

Sun Jun 13 12:57:08 GMT 2010  Olly Betts <olly@survex.com>

	* src/mainfrm.cc: Fix switching to and from the CavernLogWindow pane
	  to use wxSplitterWindow::ReplaceWindow() which fixes various issues
	  with sizing and resizing of the panes.

Sun Jun 13 12:23:23 GMT 2010  Olly Betts <olly@survex.com>

	* src/: Add wmsg_cfgpth() which caches the result of msg_cfgpth() as
	  a wxString.

Sun Jun 13 06:57:07 GMT 2010  Olly Betts <olly@survex.com>

	* src/cavernlog.cc,src/gla-gl.cc,src/mainfrm.cc: wxString::fn_str() on
	  wxmsw returns a wide string, which doesn't work with fopen(), etc, so
	  call char_str() instead for now.

Sun Jun 13 05:41:30 GMT 2010  Olly Betts <olly@survex.com>

	* src/printwx.cc: Use wxString::FromAscii() for the units on the scale
	  bar which we know to be ASCII.  No need to use msgPerm() for a
	  message we assign to a wxString.

Sun Jun 13 04:44:30 GMT 2010  Olly Betts <olly@survex.com>

	* src/mainfrm.cc,src/printwx.cc: Use wxFileName::SplitPath() instead of
	  baseleaf_from_fnm().

Sun Jun 13 00:57:11 GMT 2010  Olly Betts <olly@survex.com>

	* src/export.cc,src/gfxcore.cc: wxString::fn_str() on wxmsw returns
	  a wide string, which doesn't work with fopen(), etc, so call
	  char_str() instead for now.

Sat Jun 12 15:07:54 GMT 2010  Olly Betts <olly@survex.com>

	* src/aven.cc: We can rely on our message catalog being UTF-8 so use
	  wxString::FromUTF8() instead of wxConvUTF8.

Sat Jun 12 14:26:32 GMT 2010  Olly Betts <olly@survex.com>

	* src/gfxcore.cc: Use wxString::FromAscii() to convert date to
	  wxString.

Sun Jun 06 09:36:06 GMT 2010  Olly Betts <olly@survex.com>

	* src/Makefile.am: Use wx-config's --rescomp option to get the command
	  and options needed to turn .rc files into object files.

Fri Jun 04 15:32:27 GMT 2010  Olly Betts <olly@survex.com>

	* survex.iss.in: Specify "LZMANumFastBytes=273" which shaves a small
	  amount of the installer size.  Specify "DisableWelcomePage=yes"
	  which is apparently in line with what other modern installers do.

Fri Jun 04 14:32:04 GMT 2010  Olly Betts <olly@survex.com>

	* configure.in,make_release,make_release.in: We no longer need VERSION
	  in make_release, so no need to generate it from configure.

Fri Jun 04 14:00:58 GMT 2010  Olly Betts <olly@survex.com>

	* Makefile.am,xvfb-run: We no longer need an X display to run ISCC
	  under Wine, so just run wine directly and removed version of
	  Debian's xvfb-run script.
	* make_release.in: Pass variables to configure on the command line
	  rather than in the enviornment.  Running "make distcheck" no longer
	  fails extend.tst, so remove comment about that.  Use case rather
	  than expr to check what we've been asked to build.  Update to use
	  unicode wx-config script for wxmsw.  The wxmsw build spews warnings
	  about aliasing issues, so turn on -fno-strict-aliasing to avoid any
	  potential bugs from that.  Enable -Werror for the wxmsw build.
	* Makefile.am: Update list of wxstd.mo files we package for wxmsw
	  (add pt and sk) and where we copy them from.  Copy the unofficial
	  InnoSetup i18n files (.isl) from lib.

Fri Jun 04 13:40:35 GMT 2010  Olly Betts <olly@survex.com>

	* doc/HACKING.htm: Update InnoSetup info.

Fri Jun 04 13:07:01 GMT 2010  Olly Betts <olly@survex.com>

	* survex.iss.in: Update for InnoSetup 5.3.9.
	* lib/English_GB.isl,lib/Romanian-7-5.1.11.isl: Check in the unofficial
	  i18n files for InnoSetup which we use.

Fri Jun 04 13:05:18 GMT 2010  Olly Betts <olly@survex.com>

	* src/Makefile.am: Update path to wx RC file.

Fri Jun 04 12:44:39 GMT 2010  Olly Betts <olly@survex.com>

	* src/mainfrm.cc: Explicitly construct temporary wxString() which
	  is needed to avoid overload ambiguity under __WXMSW__.

Fri Jun 04 12:41:59 GMT 2010  Olly Betts <olly@survex.com>

	* src/cavernlog.cc: Add missing wxT() to string and character
	  constants only used in __WXMSW__ build.

Fri Jun 04 12:19:18 GMT 2010  Olly Betts <olly@survex.com>

	* src/aven.cc: wxWidgets now has a Slovak translation, so remove the
	  kludge to substitute Czech if Slovak isn't found.

Fri Jun 04 05:08:14 GMT 2010  Olly Betts <olly@survex.com>

	* src/aboutdlg.cc: Fix character constant to be a string constant when
	  building under WXMSW.

Thu Jun 03 13:53:57 GMT 2010  Olly Betts <olly@survex.com>

	* NEWS: Update from ChangeLog for 1.1.13.

Thu Jun 03 12:25:14 GMT 2010  Olly Betts <olly@survex.com>

	* Makefile.am,configure.in,debian/Makefile.am,debian/changelog: Remove
	  .deb building machinery from upstream Makefile.

Thu Jun 03 12:14:16 GMT 2010  Olly Betts <olly@survex.com>

	* make_release.in: Remove ancient workaround for getting wine to work.
	  Remove .deb building machinery.  Reenable distcheck to see if the
	  problem with extend.tst has gone away.  Update mingw cross-building
	  machinery.

Wed Jun 02 13:30:28 GMT 2010  Olly Betts <olly@survex.com>

	* configure.in,doc/GPL.htm,doc/index.htm.in: Remove HTML version of GPL
	  - just link to the FSF's page.

Wed Jun 02 13:26:55 GMT 2010  Olly Betts <olly@survex.com>

	* configure.in,make_release,make_release.in,update-debcl.pl: Use dch to
	  update debian/changelog.

Wed Jun 02 12:59:33 GMT 2010  Olly Betts <olly@survex.com>

	* configure.in,doc/Makefile.am,doc/cl2html.pl,doc/index.htm.in: Stop
	  generating an HTML version of the ChangeLog - it's too low level to
	  be of interest to non-developers, and developers can look at the
	  source code.

Wed Jun 02 09:38:25 GMT 2010  Olly Betts <olly@survex.com>

	* src/cavernlog.cc: Whitespace tweaks.

Wed Jun 02 09:28:37 GMT 2010  Olly Betts <olly@survex.com>

	* src/aboutdlg.cc,src/aboutdlg.h: Use standard button for "Copy" in
	  About dialog.  Change "OK" button to "Close" since nothing is being
	  confirmed by clicking it.  Call "Flush()" in wxTheClipboard to try
	  to make the copied text persist after aven is closed, though this
	  seems to currently do nothing on wxGTK at least.

Tue May 18 12:59:00 GMT 2010  Olly Betts <olly@survex.com>

	* doc/HACKING.htm: Note jadetex needed.
	  Note autoconf 2.64 works well.

Tue May 18 02:06:00 GMT 2010  Olly Betts <olly@survex.com>

	* src/fnt.cc: Remove now superfluous ().

Mon May 17 14:33:00 GMT 2010  Olly Betts <olly@survex.com>

	* debian/Makefile.am: Update EXTRA_DIST

Mon May 17 05:38:00 GMT 2010  Olly Betts <olly@survex.com>

	* src/cavernlog.cc: Fix small memory leak

Mon May 17 05:33:00 GMT 2010  Olly Betts <olly@survex.com>

	* src/img.c: Don't leak filename_opened member.

Mon May 17 05:13:00 GMT 2010  Olly Betts <olly@survex.com>

	* src/gfxcore.cc: Initialise all GfxCore's member variables so we
	  don't use them uninitialised.

Mon May 17 05:11:00 GMT 2010  Olly Betts <olly@survex.com>

	* src/gfxcore.h: Declare constants with enum rather than #define so
	  they automatically get allocated unique values, and so they show up
	  in the debugger.

Mon May 17 02:39:00 GMT 2010  Olly Betts <olly@survex.com>

	* src/fnt.cc: Make the map array static const

Mon May 17 02:30:00 GMT 2010  Olly Betts <olly@survex.com>

	* src/fnt.cc: Set the font texture with GL_COLOR_INDEX so we can
	  use a "byte format" font file without any translation, while a
	  "bitmap format" font file needs a temporary array half the size.

Mon May 17 00:56:00 GMT 2010  Olly Betts <olly@survex.com>

	* src/gfxcore.cc: Initialise 3 flags when we load a survey to avoid
	  using them potentially uninitialised.

Sun May 16 14:39:00 GMT 2010  Olly Betts <olly@survex.com>

	* src/mainfrm.cc: Fix cavern log window to behave if passed a .svx
	  file on the command line.

Sun May 16 14:27:00 GMT 2010  Olly Betts <olly@survex.com>

	* configure.in: Update copyright years.

Sun May 16 14:23:00 GMT 2010  Olly Betts <olly@survex.com>

	* configure.in, src/aboutdlg.cc, src/aboutdlg.h, src/aven.cc,
	  src/aven.h, src/avenprcore.cc, src/avenprcore.h,
	  src/cavernlog.cc, src/cavernlog.h, src/export.cc, src/fnt.h,
	  src/gfxcore.cc, src/gla-gl.cc, src/gla.h, src/guicontrol.cc,
	  src/log.cc, src/mainfrm.cc, src/mainfrm.h, src/namecmp.h,
	  src/printwx.cc, src/printwx.h:
	  + Fix to build with a "unicode" build of wx.
	  + Add "Copy" button to the About dialog to copy the system info
	    to the clipboard.
	  + List OpenGL extensions last, since there are usually lots of
	    them with a modern gfx card.
	  + When processing survey data, auto-scroll the log window until
	    we've reported a warning or error.
	  + Put the survey data log window in a splitter in the standard
	    frame rather than having a separate frame for it.

Sat Apr 17 12:13:00 GMT 2010  Olly Betts <olly@survex.com>

	* src/aboutdlg.cc: Add case for "GTK+ >= 2.6".

Sat Apr 17 12:12:00 GMT 2010  Olly Betts <olly@survex.com>

	* src/aboutdlg.cc: Build string using preprocessor string
	  concatenation rather than runtime appending, where possible.

Sat Apr 17 12:00:00 GMT 2010  Olly Betts <olly@survex.com>

	* src/aboutdlg.cc: Update (C) date.

Sat Apr 17 11:59:00 GMT 2010  Olly Betts <olly@survex.com>

	* src/aboutdlg.cc, src/aboutdlg.h: Use a wxTimer instead of idle
	  events to avoid spinning on the CPU.

Sat Apr 17 11:41:00 GMT 2010  Olly Betts <olly@survex.com>

	* configure.in: New preferred env var for wx-config script is
	  WX_CONFIG.  WXCONFIG still supported for compatibility.

Tue Jul 28 08:16:00 GMT 2009  Olly Betts <olly@survex.com>

	* src/mainfrm.cc: The presentation filename now defaults to using
	  the basename of the currently loaded dataset, but we always prompt
	  before we first save with such a name.

Tue Jul 28 04:37:00 GMT 2009  Olly Betts <olly@survex.com>

	* configure.in: Add comment to explain why we call wx-config twice.

Tue Jul 28 04:36:00 GMT 2009  Olly Betts <olly@survex.com>

	* src/datain.c: Use fputs(m, f) instead of fprintf(f, m) in case m
	  contains '%' (m comes from the messages file, so this isn't
	  exploitable by sending someone a "bad" .svx or .3d file).

Mon Jul 27 03:29:00 GMT 2009  Olly Betts <olly@survex.com>

	* src/mainfrm.cc: Fix to open rather than save when doing "open
	  presentation" with wxmotif.

Thu Mar 05 01:45:00 GMT 2009  Olly Betts <olly@survex.com>

	* doc/3dformat.htm: Document that this is version 6 and when we
	  started to use it.

Mon Dec 15 10:34:00 GMT 2008  Olly Betts <olly@survex.com>

	* src/gla-gl.cc: When saving a screenshot, perform the vertical
	  flip of the image data in-place rather than using wxImage::Mirror()
	  which creates a whole new wxImage object.

Fri Dec 12 11:12:00 GMT 2008  Olly Betts <olly@survex.com>

	* src/cad3d.c, src/export.cc: Fix export to SVG when a label
	  contains a '%' character.

Fri Dec 12 06:30:00 GMT 2008  Olly Betts <olly@survex.com>

	* configure.in: Add AM_PROG_CC_C_O which newer autoreconf warns is
	  needed.

Fri Dec 12 06:28:00 GMT 2008  Olly Betts <olly@survex.com>

	* configure.in: Remove AC_SUBST of CRLIB and CROBJX which are no
	  longer set or used.

Fri Dec 12 06:03:00 GMT 2008  Olly Betts <olly@survex.com>

	* NEWS, buildmacosx.sh, configure.in, desc-aven.txt, doc/TODO.htm,
	  doc/manual.sgml, doc/survex.ent, lib/messages.txt,
	  src/aboutdlg.cc, src/aven.cc, src/aven.h, src/gfxcore.cc,
	  src/mainfrm.cc, src/printwx.cc, src/printwx.h, src/wx.h: Say
	  "wxWidgets" instead of "wxWindows" consistently.
	  Require wxWidgets 2.6.0 or newer - 2.4 is really old now.

Mon Mar 31 01:53:00 GMT 2008  Olly Betts <olly@survex.com>

	* doc/3dformat.htm: Update for v6 format from Mike McCombe

Fri Sep 07 18:29:00 GMT 2007  Olly Betts <olly@survex.com>

	* src/gla-gl.cc: Calling glGetError() resets the error state, so we
	  need to store the value in a variable rather than calling it twice!

Fri Sep 07 13:54:00 GMT 2007  Olly Betts <olly@survex.com>

	* src/gla-gl.cc: Add missing CHECK_GL_ERROR() calls and correct
	  some which had the wrong descriptions.
	  Use GL_POINT_SPRITE and GL_COORD_REPLACE instead of
	  GL_POINT_SPRITE_ARB and GL_COORD_REPLACE_ARB.  They have the same
	  numeric values, so the shorter (now official) names are better.

Fri Sep 07 13:31:00 GMT 2007  Olly Betts <olly@survex.com>

	* src/Makefile.am, src/gfxcore.cc, src/gfxcore.h, src/gla-gl.cc,
	  src/gla.h, src/matrix4.cc, src/matrix4.h, src/quaternion.cc,
	  src/quaternion.h: Just set the pan and tilt directly as OpenGL
	  rotations rather than messing around setting up and then decoding a
	  quaternion.  This fixes some glitches when tilting while looking
	  east, and eliminates 2 source files and 2 headers!

Sat Feb 10 13:56:00 GMT 2007  Olly Betts <olly@survex.com>

	* NEWS, configure.in, src/aven.cc, src/wx.h:
	  (Unix version): aven: Fix display of degree symbol in status bar and
	  messages with accented characters in.
	  (Mac OS X version): Require at least wxWidgets 2.5.1.

Sat Feb 10 13:46:00 GMT 2007  Olly Betts <olly@survex.com>

	* src/message.c: Test S_ISREG since that's what we use here

Sat Feb 10 13:37:00 GMT 2007  Olly Betts <olly@survex.com>

	* src/message.c: Always use utf-8 for aven on unix

